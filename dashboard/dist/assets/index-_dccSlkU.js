var vf=Object.defineProperty;var yd=e=>{throw TypeError(e)};var bf=(e,t,r)=>t in e?vf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var vd=(e,t,r)=>bf(e,typeof t!="symbol"?t+"":t,r),ul=(e,t,r)=>t.has(e)||yd("Cannot "+r);var v=(e,t,r)=>(ul(e,t,"read from private field"),r?r.call(e):t.get(e)),O=(e,t,r)=>t.has(e)?yd("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),M=(e,t,r,n)=>(ul(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Q=(e,t,r)=>(ul(e,t,"access private method"),r);var Sa=(e,t,r,n)=>({set _(a){M(e,t,a,r)},get _(){return v(e,t,n)}});function kf(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function wf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ph={exports:{}},Ui={},xh={exports:{}},W={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xa=Symbol.for("react.element"),jf=Symbol.for("react.portal"),Nf=Symbol.for("react.fragment"),Sf=Symbol.for("react.strict_mode"),Cf=Symbol.for("react.profiler"),_f=Symbol.for("react.provider"),Ef=Symbol.for("react.context"),Tf=Symbol.for("react.forward_ref"),Pf=Symbol.for("react.suspense"),If=Symbol.for("react.memo"),Rf=Symbol.for("react.lazy"),bd=Symbol.iterator;function Mf(e){return e===null||typeof e!="object"?null:(e=bd&&e[bd]||e["@@iterator"],typeof e=="function"?e:null)}var yh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vh=Object.assign,bh={};function hs(e,t,r){this.props=e,this.context=t,this.refs=bh,this.updater=r||yh}hs.prototype.isReactComponent={};hs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};hs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function kh(){}kh.prototype=hs.prototype;function ic(e,t,r){this.props=e,this.context=t,this.refs=bh,this.updater=r||yh}var lc=ic.prototype=new kh;lc.constructor=ic;vh(lc,hs.prototype);lc.isPureReactComponent=!0;var kd=Array.isArray,wh=Object.prototype.hasOwnProperty,oc={current:null},jh={key:!0,ref:!0,__self:!0,__source:!0};function Nh(e,t,r){var n,a={},i=null,l=null;if(t!=null)for(n in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)wh.call(t,n)&&!jh.hasOwnProperty(n)&&(a[n]=t[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:xa,type:e,key:i,ref:l,props:a,_owner:oc.current}}function Df(e,t){return{$$typeof:xa,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function cc(e){return typeof e=="object"&&e!==null&&e.$$typeof===xa}function Lf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var wd=/\/+/g;function hl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Lf(""+e.key):t.toString(36)}function Wa(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case xa:case jf:l=!0}}if(l)return l=e,a=a(l),e=n===""?"."+hl(l,0):n,kd(a)?(r="",e!=null&&(r=e.replace(wd,"$&/")+"/"),Wa(a,t,r,"",function(d){return d})):a!=null&&(cc(a)&&(a=Df(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(wd,"$&/")+"/")+e)),t.push(a)),1;if(l=0,n=n===""?".":n+":",kd(e))for(var o=0;o<e.length;o++){i=e[o];var c=n+hl(i,o);l+=Wa(i,t,r,c,a)}else if(c=Mf(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=n+hl(i,o++),l+=Wa(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Ca(e,t,r){if(e==null)return e;var n=[],a=0;return Wa(e,n,"","",function(i){return t.call(r,i,a++)}),n}function Ff(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var He={current:null},Ka={transition:null},Af={ReactCurrentDispatcher:He,ReactCurrentBatchConfig:Ka,ReactCurrentOwner:oc};function Sh(){throw Error("act(...) is not supported in production builds of React.")}W.Children={map:Ca,forEach:function(e,t,r){Ca(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ca(e,function(){t++}),t},toArray:function(e){return Ca(e,function(t){return t})||[]},only:function(e){if(!cc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};W.Component=hs;W.Fragment=Nf;W.Profiler=Cf;W.PureComponent=ic;W.StrictMode=Sf;W.Suspense=Pf;W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Af;W.act=Sh;W.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=vh({},e.props),a=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=oc.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)wh.call(t,c)&&!jh.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];n.children=o}return{$$typeof:xa,type:e.type,key:a,ref:i,props:n,_owner:l}};W.createContext=function(e){return e={$$typeof:Ef,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_f,_context:e},e.Consumer=e};W.createElement=Nh;W.createFactory=function(e){var t=Nh.bind(null,e);return t.type=e,t};W.createRef=function(){return{current:null}};W.forwardRef=function(e){return{$$typeof:Tf,render:e}};W.isValidElement=cc;W.lazy=function(e){return{$$typeof:Rf,_payload:{_status:-1,_result:e},_init:Ff}};W.memo=function(e,t){return{$$typeof:If,type:e,compare:t===void 0?null:t}};W.startTransition=function(e){var t=Ka.transition;Ka.transition={};try{e()}finally{Ka.transition=t}};W.unstable_act=Sh;W.useCallback=function(e,t){return He.current.useCallback(e,t)};W.useContext=function(e){return He.current.useContext(e)};W.useDebugValue=function(){};W.useDeferredValue=function(e){return He.current.useDeferredValue(e)};W.useEffect=function(e,t){return He.current.useEffect(e,t)};W.useId=function(){return He.current.useId()};W.useImperativeHandle=function(e,t,r){return He.current.useImperativeHandle(e,t,r)};W.useInsertionEffect=function(e,t){return He.current.useInsertionEffect(e,t)};W.useLayoutEffect=function(e,t){return He.current.useLayoutEffect(e,t)};W.useMemo=function(e,t){return He.current.useMemo(e,t)};W.useReducer=function(e,t,r){return He.current.useReducer(e,t,r)};W.useRef=function(e){return He.current.useRef(e)};W.useState=function(e){return He.current.useState(e)};W.useSyncExternalStore=function(e,t,r){return He.current.useSyncExternalStore(e,t,r)};W.useTransition=function(){return He.current.useTransition()};W.version="18.3.1";xh.exports=W;var y=xh.exports;const Ch=wf(y),Of=kf({__proto__:null,default:Ch},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $f=y,Uf=Symbol.for("react.element"),zf=Symbol.for("react.fragment"),Bf=Object.prototype.hasOwnProperty,Hf=$f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qf={key:!0,ref:!0,__self:!0,__source:!0};function _h(e,t,r){var n,a={},i=null,l=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)Bf.call(t,n)&&!qf.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:Uf,type:e,key:i,ref:l,props:a,_owner:Hf.current}}Ui.Fragment=zf;Ui.jsx=_h;Ui.jsxs=_h;ph.exports=Ui;var s=ph.exports,zl={},Eh={exports:{}},lt={},Th={exports:{}},Ph={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,B){var H=C.length;C.push(B);e:for(;0<H;){var ne=H-1>>>1,he=C[ne];if(0<a(he,B))C[ne]=B,C[H]=he,H=ne;else break e}}function r(C){return C.length===0?null:C[0]}function n(C){if(C.length===0)return null;var B=C[0],H=C.pop();if(H!==B){C[0]=H;e:for(var ne=0,he=C.length,Vr=he>>>1;ne<Vr;){var $=2*(ne+1)-1,Y=C[$],tt=$+1,Gr=C[tt];if(0>a(Y,H))tt<he&&0>a(Gr,Y)?(C[ne]=Gr,C[tt]=H,ne=tt):(C[ne]=Y,C[$]=H,ne=$);else if(tt<he&&0>a(Gr,H))C[ne]=Gr,C[tt]=H,ne=tt;else break e}}return B}function a(C,B){var H=C.sortIndex-B.sortIndex;return H!==0?H:C.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],d=[],h=1,u=null,m=3,x=!1,k=!1,w=!1,j=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(C){for(var B=r(d);B!==null;){if(B.callback===null)n(d);else if(B.startTime<=C)n(d),B.sortIndex=B.expirationTime,t(c,B);else break;B=r(d)}}function b(C){if(w=!1,p(C),!k)if(r(c)!==null)k=!0,U(N);else{var B=r(d);B!==null&&me(b,B.startTime-C)}}function N(C,B){k=!1,w&&(w=!1,g(E),E=-1),x=!0;var H=m;try{for(p(B),u=r(c);u!==null&&(!(u.expirationTime>B)||C&&!A());){var ne=u.callback;if(typeof ne=="function"){u.callback=null,m=u.priorityLevel;var he=ne(u.expirationTime<=B);B=e.unstable_now(),typeof he=="function"?u.callback=he:u===r(c)&&n(c),p(B)}else n(c);u=r(c)}if(u!==null)var Vr=!0;else{var $=r(d);$!==null&&me(b,$.startTime-B),Vr=!1}return Vr}finally{u=null,m=H,x=!1}}var T=!1,S=null,E=-1,D=5,I=-1;function A(){return!(e.unstable_now()-I<D)}function V(){if(S!==null){var C=e.unstable_now();I=C;var B=!0;try{B=S(!0,C)}finally{B?X():(T=!1,S=null)}}else T=!1}var X;if(typeof f=="function")X=function(){f(V)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,L=R.port2;R.port1.onmessage=V,X=function(){L.postMessage(null)}}else X=function(){j(V,0)};function U(C){S=C,T||(T=!0,X())}function me(C,B){E=j(function(){C(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){k||x||(k=!0,U(N))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(C){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var H=m;m=B;try{return C()}finally{m=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,B){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var H=m;m=C;try{return B()}finally{m=H}},e.unstable_scheduleCallback=function(C,B,H){var ne=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?ne+H:ne):H=ne,C){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=H+he,C={id:h++,callback:B,priorityLevel:C,startTime:H,expirationTime:he,sortIndex:-1},H>ne?(C.sortIndex=H,t(d,C),r(c)===null&&C===r(d)&&(w?(g(E),E=-1):w=!0,me(b,H-ne))):(C.sortIndex=he,t(c,C),k||x||(k=!0,U(N))),C},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(C){var B=m;return function(){var H=m;m=B;try{return C.apply(this,arguments)}finally{m=H}}}})(Ph);Th.exports=Ph;var Qf=Th.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wf=y,it=Qf;function P(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ih=new Set,Hs={};function Nn(e,t){ns(e,t),ns(e+"Capture",t)}function ns(e,t){for(Hs[e]=t,e=0;e<t.length;e++)Ih.add(t[e])}var er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bl=Object.prototype.hasOwnProperty,Kf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jd={},Nd={};function Vf(e){return Bl.call(Nd,e)?!0:Bl.call(jd,e)?!1:Kf.test(e)?Nd[e]=!0:(jd[e]=!0,!1)}function Gf(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Xf(e,t,r,n){if(t===null||typeof t>"u"||Gf(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function qe(e,t,r,n,a,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Ie={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ie[e]=new qe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ie[t]=new qe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ie[e]=new qe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ie[e]=new qe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ie[e]=new qe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ie[e]=new qe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ie[e]=new qe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ie[e]=new qe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ie[e]=new qe(e,5,!1,e.toLowerCase(),null,!1,!1)});var dc=/[\-:]([a-z])/g;function uc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(dc,uc);Ie[t]=new qe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(dc,uc);Ie[t]=new qe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(dc,uc);Ie[t]=new qe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ie[e]=new qe(e,1,!1,e.toLowerCase(),null,!1,!1)});Ie.xlinkHref=new qe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ie[e]=new qe(e,1,!1,e.toLowerCase(),null,!0,!0)});function hc(e,t,r,n){var a=Ie.hasOwnProperty(t)?Ie[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Xf(t,r,a,n)&&(r=null),n||a===null?Vf(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var ir=Wf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_a=Symbol.for("react.element"),_n=Symbol.for("react.portal"),En=Symbol.for("react.fragment"),gc=Symbol.for("react.strict_mode"),Hl=Symbol.for("react.profiler"),Rh=Symbol.for("react.provider"),Mh=Symbol.for("react.context"),fc=Symbol.for("react.forward_ref"),ql=Symbol.for("react.suspense"),Ql=Symbol.for("react.suspense_list"),mc=Symbol.for("react.memo"),dr=Symbol.for("react.lazy"),Dh=Symbol.for("react.offscreen"),Sd=Symbol.iterator;function bs(e){return e===null||typeof e!="object"?null:(e=Sd&&e[Sd]||e["@@iterator"],typeof e=="function"?e:null)}var ce=Object.assign,gl;function Ts(e){if(gl===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);gl=t&&t[1]||""}return`
`+gl+e}var fl=!1;function ml(e,t){if(!e||fl)return"";fl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var c=`
`+a[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{fl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ts(e):""}function Yf(e){switch(e.tag){case 5:return Ts(e.type);case 16:return Ts("Lazy");case 13:return Ts("Suspense");case 19:return Ts("SuspenseList");case 0:case 2:case 15:return e=ml(e.type,!1),e;case 11:return e=ml(e.type.render,!1),e;case 1:return e=ml(e.type,!0),e;default:return""}}function Wl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case En:return"Fragment";case _n:return"Portal";case Hl:return"Profiler";case gc:return"StrictMode";case ql:return"Suspense";case Ql:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Mh:return(e.displayName||"Context")+".Consumer";case Rh:return(e._context.displayName||"Context")+".Provider";case fc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case mc:return t=e.displayName||null,t!==null?t:Wl(e.type)||"Memo";case dr:t=e._payload,e=e._init;try{return Wl(e(t))}catch{}}return null}function Jf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wl(t);case 8:return t===gc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function $r(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Lh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Zf(e){var t=Lh(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){n=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ea(e){e._valueTracker||(e._valueTracker=Zf(e))}function Fh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Lh(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ii(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Kl(e,t){var r=t.checked;return ce({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Cd(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=$r(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ah(e,t){t=t.checked,t!=null&&hc(e,"checked",t,!1)}function Vl(e,t){Ah(e,t);var r=$r(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Gl(e,t.type,r):t.hasOwnProperty("defaultValue")&&Gl(e,t.type,$r(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function _d(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Gl(e,t,r){(t!=="number"||ii(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ps=Array.isArray;function $n(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+$r(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Xl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(P(91));return ce({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ed(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(P(92));if(Ps(r)){if(1<r.length)throw Error(P(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:$r(r)}}function Oh(e,t){var r=$r(t.value),n=$r(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Td(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function $h(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?$h(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ta,Uh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ta=Ta||document.createElement("div"),Ta.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ta.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qs(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ds={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},em=["Webkit","ms","Moz","O"];Object.keys(Ds).forEach(function(e){em.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ds[t]=Ds[e]})});function zh(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ds.hasOwnProperty(e)&&Ds[e]?(""+t).trim():t+"px"}function Bh(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=zh(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var tm=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jl(e,t){if(t){if(tm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(P(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(P(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(P(61))}if(t.style!=null&&typeof t.style!="object")throw Error(P(62))}}function Zl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eo=null;function pc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var to=null,Un=null,zn=null;function Pd(e){if(e=ba(e)){if(typeof to!="function")throw Error(P(280));var t=e.stateNode;t&&(t=Qi(t),to(e.stateNode,e.type,t))}}function Hh(e){Un?zn?zn.push(e):zn=[e]:Un=e}function qh(){if(Un){var e=Un,t=zn;if(zn=Un=null,Pd(e),t)for(e=0;e<t.length;e++)Pd(t[e])}}function Qh(e,t){return e(t)}function Wh(){}var pl=!1;function Kh(e,t,r){if(pl)return e(t,r);pl=!0;try{return Qh(e,t,r)}finally{pl=!1,(Un!==null||zn!==null)&&(Wh(),qh())}}function Qs(e,t){var r=e.stateNode;if(r===null)return null;var n=Qi(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(P(231,t,typeof r));return r}var ro=!1;if(er)try{var ks={};Object.defineProperty(ks,"passive",{get:function(){ro=!0}}),window.addEventListener("test",ks,ks),window.removeEventListener("test",ks,ks)}catch{ro=!1}function rm(e,t,r,n,a,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(h){this.onError(h)}}var Ls=!1,li=null,oi=!1,no=null,nm={onError:function(e){Ls=!0,li=e}};function sm(e,t,r,n,a,i,l,o,c){Ls=!1,li=null,rm.apply(nm,arguments)}function am(e,t,r,n,a,i,l,o,c){if(sm.apply(this,arguments),Ls){if(Ls){var d=li;Ls=!1,li=null}else throw Error(P(198));oi||(oi=!0,no=d)}}function Sn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Vh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Id(e){if(Sn(e)!==e)throw Error(P(188))}function im(e){var t=e.alternate;if(!t){if(t=Sn(e),t===null)throw Error(P(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Id(a),e;if(i===n)return Id(a),t;i=i.sibling}throw Error(P(188))}if(r.return!==n.return)r=a,n=i;else{for(var l=!1,o=a.child;o;){if(o===r){l=!0,r=a,n=i;break}if(o===n){l=!0,n=a,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,n=a;break}if(o===n){l=!0,n=i,r=a;break}o=o.sibling}if(!l)throw Error(P(189))}}if(r.alternate!==n)throw Error(P(190))}if(r.tag!==3)throw Error(P(188));return r.stateNode.current===r?e:t}function Gh(e){return e=im(e),e!==null?Xh(e):null}function Xh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Xh(e);if(t!==null)return t;e=e.sibling}return null}var Yh=it.unstable_scheduleCallback,Rd=it.unstable_cancelCallback,lm=it.unstable_shouldYield,om=it.unstable_requestPaint,ge=it.unstable_now,cm=it.unstable_getCurrentPriorityLevel,xc=it.unstable_ImmediatePriority,Jh=it.unstable_UserBlockingPriority,ci=it.unstable_NormalPriority,dm=it.unstable_LowPriority,Zh=it.unstable_IdlePriority,zi=null,At=null;function um(e){if(At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(zi,e,void 0,(e.current.flags&128)===128)}catch{}}var Ct=Math.clz32?Math.clz32:fm,hm=Math.log,gm=Math.LN2;function fm(e){return e>>>=0,e===0?32:31-(hm(e)/gm|0)|0}var Pa=64,Ia=4194304;function Is(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function di(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,l=r&268435455;if(l!==0){var o=l&~a;o!==0?n=Is(o):(i&=l,i!==0&&(n=Is(i)))}else l=r&~a,l!==0?n=Is(l):i!==0&&(n=Is(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ct(t),a=1<<r,n|=e[r],t&=~a;return n}function mm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pm(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-Ct(i),o=1<<l,c=a[l];c===-1?(!(o&r)||o&n)&&(a[l]=mm(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function so(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function e0(){var e=Pa;return Pa<<=1,!(Pa&4194240)&&(Pa=64),e}function xl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ya(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ct(t),e[t]=r}function xm(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Ct(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function yc(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ct(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Z=0;function t0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var r0,vc,n0,s0,a0,ao=!1,Ra=[],Er=null,Tr=null,Pr=null,Ws=new Map,Ks=new Map,hr=[],ym="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Md(e,t){switch(e){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":Ws.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ks.delete(t.pointerId)}}function ws(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=ba(t),t!==null&&vc(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function vm(e,t,r,n,a){switch(t){case"focusin":return Er=ws(Er,e,t,r,n,a),!0;case"dragenter":return Tr=ws(Tr,e,t,r,n,a),!0;case"mouseover":return Pr=ws(Pr,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Ws.set(i,ws(Ws.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Ks.set(i,ws(Ks.get(i)||null,e,t,r,n,a)),!0}return!1}function i0(e){var t=Jr(e.target);if(t!==null){var r=Sn(t);if(r!==null){if(t=r.tag,t===13){if(t=Vh(r),t!==null){e.blockedOn=t,a0(e.priority,function(){n0(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Va(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=io(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);eo=n,r.target.dispatchEvent(n),eo=null}else return t=ba(r),t!==null&&vc(t),e.blockedOn=r,!1;t.shift()}return!0}function Dd(e,t,r){Va(e)&&r.delete(t)}function bm(){ao=!1,Er!==null&&Va(Er)&&(Er=null),Tr!==null&&Va(Tr)&&(Tr=null),Pr!==null&&Va(Pr)&&(Pr=null),Ws.forEach(Dd),Ks.forEach(Dd)}function js(e,t){e.blockedOn===t&&(e.blockedOn=null,ao||(ao=!0,it.unstable_scheduleCallback(it.unstable_NormalPriority,bm)))}function Vs(e){function t(a){return js(a,e)}if(0<Ra.length){js(Ra[0],e);for(var r=1;r<Ra.length;r++){var n=Ra[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Er!==null&&js(Er,e),Tr!==null&&js(Tr,e),Pr!==null&&js(Pr,e),Ws.forEach(t),Ks.forEach(t),r=0;r<hr.length;r++)n=hr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<hr.length&&(r=hr[0],r.blockedOn===null);)i0(r),r.blockedOn===null&&hr.shift()}var Bn=ir.ReactCurrentBatchConfig,ui=!0;function km(e,t,r,n){var a=Z,i=Bn.transition;Bn.transition=null;try{Z=1,bc(e,t,r,n)}finally{Z=a,Bn.transition=i}}function wm(e,t,r,n){var a=Z,i=Bn.transition;Bn.transition=null;try{Z=4,bc(e,t,r,n)}finally{Z=a,Bn.transition=i}}function bc(e,t,r,n){if(ui){var a=io(e,t,r,n);if(a===null)_l(e,t,n,hi,r),Md(e,n);else if(vm(a,e,t,r,n))n.stopPropagation();else if(Md(e,n),t&4&&-1<ym.indexOf(e)){for(;a!==null;){var i=ba(a);if(i!==null&&r0(i),i=io(e,t,r,n),i===null&&_l(e,t,n,hi,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else _l(e,t,n,null,r)}}var hi=null;function io(e,t,r,n){if(hi=null,e=pc(n),e=Jr(e),e!==null)if(t=Sn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Vh(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return hi=e,null}function l0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cm()){case xc:return 1;case Jh:return 4;case ci:case dm:return 16;case Zh:return 536870912;default:return 16}default:return 16}}var Nr=null,kc=null,Ga=null;function o0(){if(Ga)return Ga;var e,t=kc,r=t.length,n,a="value"in Nr?Nr.value:Nr.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var l=r-e;for(n=1;n<=l&&t[r-n]===a[i-n];n++);return Ga=a.slice(e,1<n?1-n:void 0)}function Xa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ma(){return!0}function Ld(){return!1}function ot(e){function t(r,n,a,i,l){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ma:Ld,this.isPropagationStopped=Ld,this}return ce(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ma)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ma)},persist:function(){},isPersistent:Ma}),t}var gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wc=ot(gs),va=ce({},gs,{view:0,detail:0}),jm=ot(va),yl,vl,Ns,Bi=ce({},va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ns&&(Ns&&e.type==="mousemove"?(yl=e.screenX-Ns.screenX,vl=e.screenY-Ns.screenY):vl=yl=0,Ns=e),yl)},movementY:function(e){return"movementY"in e?e.movementY:vl}}),Fd=ot(Bi),Nm=ce({},Bi,{dataTransfer:0}),Sm=ot(Nm),Cm=ce({},va,{relatedTarget:0}),bl=ot(Cm),_m=ce({},gs,{animationName:0,elapsedTime:0,pseudoElement:0}),Em=ot(_m),Tm=ce({},gs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Pm=ot(Tm),Im=ce({},gs,{data:0}),Ad=ot(Im),Rm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Dm[e])?!!t[e]:!1}function jc(){return Lm}var Fm=ce({},va,{key:function(e){if(e.key){var t=Rm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Mm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jc,charCode:function(e){return e.type==="keypress"?Xa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Am=ot(Fm),Om=ce({},Bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Od=ot(Om),$m=ce({},va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jc}),Um=ot($m),zm=ce({},gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bm=ot(zm),Hm=ce({},Bi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qm=ot(Hm),Qm=[9,13,27,32],Nc=er&&"CompositionEvent"in window,Fs=null;er&&"documentMode"in document&&(Fs=document.documentMode);var Wm=er&&"TextEvent"in window&&!Fs,c0=er&&(!Nc||Fs&&8<Fs&&11>=Fs),$d=" ",Ud=!1;function d0(e,t){switch(e){case"keyup":return Qm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function u0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Tn=!1;function Km(e,t){switch(e){case"compositionend":return u0(t);case"keypress":return t.which!==32?null:(Ud=!0,$d);case"textInput":return e=t.data,e===$d&&Ud?null:e;default:return null}}function Vm(e,t){if(Tn)return e==="compositionend"||!Nc&&d0(e,t)?(e=o0(),Ga=kc=Nr=null,Tn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return c0&&t.locale!=="ko"?null:t.data;default:return null}}var Gm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Gm[e.type]:t==="textarea"}function h0(e,t,r,n){Hh(n),t=gi(t,"onChange"),0<t.length&&(r=new wc("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var As=null,Gs=null;function Xm(e){j0(e,0)}function Hi(e){var t=Rn(e);if(Fh(t))return e}function Ym(e,t){if(e==="change")return t}var g0=!1;if(er){var kl;if(er){var wl="oninput"in document;if(!wl){var Bd=document.createElement("div");Bd.setAttribute("oninput","return;"),wl=typeof Bd.oninput=="function"}kl=wl}else kl=!1;g0=kl&&(!document.documentMode||9<document.documentMode)}function Hd(){As&&(As.detachEvent("onpropertychange",f0),Gs=As=null)}function f0(e){if(e.propertyName==="value"&&Hi(Gs)){var t=[];h0(t,Gs,e,pc(e)),Kh(Xm,t)}}function Jm(e,t,r){e==="focusin"?(Hd(),As=t,Gs=r,As.attachEvent("onpropertychange",f0)):e==="focusout"&&Hd()}function Zm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hi(Gs)}function ep(e,t){if(e==="click")return Hi(t)}function tp(e,t){if(e==="input"||e==="change")return Hi(t)}function rp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Et=typeof Object.is=="function"?Object.is:rp;function Xs(e,t){if(Et(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Bl.call(t,a)||!Et(e[a],t[a]))return!1}return!0}function qd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qd(e,t){var r=qd(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=qd(r)}}function m0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?m0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function p0(){for(var e=window,t=ii();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ii(e.document)}return t}function Sc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function np(e){var t=p0(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&m0(r.ownerDocument.documentElement,r)){if(n!==null&&Sc(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=Qd(r,i);var l=Qd(r,n);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sp=er&&"documentMode"in document&&11>=document.documentMode,Pn=null,lo=null,Os=null,oo=!1;function Wd(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;oo||Pn==null||Pn!==ii(n)||(n=Pn,"selectionStart"in n&&Sc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Os&&Xs(Os,n)||(Os=n,n=gi(lo,"onSelect"),0<n.length&&(t=new wc("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Pn)))}function Da(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var In={animationend:Da("Animation","AnimationEnd"),animationiteration:Da("Animation","AnimationIteration"),animationstart:Da("Animation","AnimationStart"),transitionend:Da("Transition","TransitionEnd")},jl={},x0={};er&&(x0=document.createElement("div").style,"AnimationEvent"in window||(delete In.animationend.animation,delete In.animationiteration.animation,delete In.animationstart.animation),"TransitionEvent"in window||delete In.transitionend.transition);function qi(e){if(jl[e])return jl[e];if(!In[e])return e;var t=In[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in x0)return jl[e]=t[r];return e}var y0=qi("animationend"),v0=qi("animationiteration"),b0=qi("animationstart"),k0=qi("transitionend"),w0=new Map,Kd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Br(e,t){w0.set(e,t),Nn(t,[e])}for(var Nl=0;Nl<Kd.length;Nl++){var Sl=Kd[Nl],ap=Sl.toLowerCase(),ip=Sl[0].toUpperCase()+Sl.slice(1);Br(ap,"on"+ip)}Br(y0,"onAnimationEnd");Br(v0,"onAnimationIteration");Br(b0,"onAnimationStart");Br("dblclick","onDoubleClick");Br("focusin","onFocus");Br("focusout","onBlur");Br(k0,"onTransitionEnd");ns("onMouseEnter",["mouseout","mouseover"]);ns("onMouseLeave",["mouseout","mouseover"]);ns("onPointerEnter",["pointerout","pointerover"]);ns("onPointerLeave",["pointerout","pointerover"]);Nn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rs));function Vd(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,am(n,t,void 0,e),e.currentTarget=null}function j0(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var l=n.length-1;0<=l;l--){var o=n[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;Vd(a,o,d),i=c}else for(l=0;l<n.length;l++){if(o=n[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;Vd(a,o,d),i=c}}}if(oi)throw e=no,oi=!1,no=null,e}function te(e,t){var r=t[fo];r===void 0&&(r=t[fo]=new Set);var n=e+"__bubble";r.has(n)||(N0(t,e,2,!1),r.add(n))}function Cl(e,t,r){var n=0;t&&(n|=4),N0(r,e,n,t)}var La="_reactListening"+Math.random().toString(36).slice(2);function Ys(e){if(!e[La]){e[La]=!0,Ih.forEach(function(r){r!=="selectionchange"&&(lp.has(r)||Cl(r,!1,e),Cl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[La]||(t[La]=!0,Cl("selectionchange",!1,t))}}function N0(e,t,r,n){switch(l0(t)){case 1:var a=km;break;case 4:a=wm;break;default:a=bc}r=a.bind(null,t,r,e),a=void 0,!ro||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function _l(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=n.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;o!==null;){if(l=Jr(o),l===null)return;if(c=l.tag,c===5||c===6){n=i=l;continue e}o=o.parentNode}}n=n.return}Kh(function(){var d=i,h=pc(r),u=[];e:{var m=w0.get(e);if(m!==void 0){var x=wc,k=e;switch(e){case"keypress":if(Xa(r)===0)break e;case"keydown":case"keyup":x=Am;break;case"focusin":k="focus",x=bl;break;case"focusout":k="blur",x=bl;break;case"beforeblur":case"afterblur":x=bl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Fd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Sm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Um;break;case y0:case v0:case b0:x=Em;break;case k0:x=Bm;break;case"scroll":x=jm;break;case"wheel":x=qm;break;case"copy":case"cut":case"paste":x=Pm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Od}var w=(t&4)!==0,j=!w&&e==="scroll",g=w?m!==null?m+"Capture":null:m;w=[];for(var f=d,p;f!==null;){p=f;var b=p.stateNode;if(p.tag===5&&b!==null&&(p=b,g!==null&&(b=Qs(f,g),b!=null&&w.push(Js(f,b,p)))),j)break;f=f.return}0<w.length&&(m=new x(m,k,null,r,h),u.push({event:m,listeners:w}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",m&&r!==eo&&(k=r.relatedTarget||r.fromElement)&&(Jr(k)||k[tr]))break e;if((x||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,x?(k=r.relatedTarget||r.toElement,x=d,k=k?Jr(k):null,k!==null&&(j=Sn(k),k!==j||k.tag!==5&&k.tag!==6)&&(k=null)):(x=null,k=d),x!==k)){if(w=Fd,b="onMouseLeave",g="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(w=Od,b="onPointerLeave",g="onPointerEnter",f="pointer"),j=x==null?m:Rn(x),p=k==null?m:Rn(k),m=new w(b,f+"leave",x,r,h),m.target=j,m.relatedTarget=p,b=null,Jr(h)===d&&(w=new w(g,f+"enter",k,r,h),w.target=p,w.relatedTarget=j,b=w),j=b,x&&k)t:{for(w=x,g=k,f=0,p=w;p;p=Cn(p))f++;for(p=0,b=g;b;b=Cn(b))p++;for(;0<f-p;)w=Cn(w),f--;for(;0<p-f;)g=Cn(g),p--;for(;f--;){if(w===g||g!==null&&w===g.alternate)break t;w=Cn(w),g=Cn(g)}w=null}else w=null;x!==null&&Gd(u,m,x,w,!1),k!==null&&j!==null&&Gd(u,j,k,w,!0)}}e:{if(m=d?Rn(d):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var N=Ym;else if(zd(m))if(g0)N=tp;else{N=Zm;var T=Jm}else(x=m.nodeName)&&x.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(N=ep);if(N&&(N=N(e,d))){h0(u,N,r,h);break e}T&&T(e,m,d),e==="focusout"&&(T=m._wrapperState)&&T.controlled&&m.type==="number"&&Gl(m,"number",m.value)}switch(T=d?Rn(d):window,e){case"focusin":(zd(T)||T.contentEditable==="true")&&(Pn=T,lo=d,Os=null);break;case"focusout":Os=lo=Pn=null;break;case"mousedown":oo=!0;break;case"contextmenu":case"mouseup":case"dragend":oo=!1,Wd(u,r,h);break;case"selectionchange":if(sp)break;case"keydown":case"keyup":Wd(u,r,h)}var S;if(Nc)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Tn?d0(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(c0&&r.locale!=="ko"&&(Tn||E!=="onCompositionStart"?E==="onCompositionEnd"&&Tn&&(S=o0()):(Nr=h,kc="value"in Nr?Nr.value:Nr.textContent,Tn=!0)),T=gi(d,E),0<T.length&&(E=new Ad(E,e,null,r,h),u.push({event:E,listeners:T}),S?E.data=S:(S=u0(r),S!==null&&(E.data=S)))),(S=Wm?Km(e,r):Vm(e,r))&&(d=gi(d,"onBeforeInput"),0<d.length&&(h=new Ad("onBeforeInput","beforeinput",null,r,h),u.push({event:h,listeners:d}),h.data=S))}j0(u,t)})}function Js(e,t,r){return{instance:e,listener:t,currentTarget:r}}function gi(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Qs(e,r),i!=null&&n.unshift(Js(e,i,a)),i=Qs(e,t),i!=null&&n.push(Js(e,i,a))),e=e.return}return n}function Cn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Gd(e,t,r,n,a){for(var i=t._reactName,l=[];r!==null&&r!==n;){var o=r,c=o.alternate,d=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&d!==null&&(o=d,a?(c=Qs(r,i),c!=null&&l.unshift(Js(r,c,o))):a||(c=Qs(r,i),c!=null&&l.push(Js(r,c,o)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var op=/\r\n?/g,cp=/\u0000|\uFFFD/g;function Xd(e){return(typeof e=="string"?e:""+e).replace(op,`
`).replace(cp,"")}function Fa(e,t,r){if(t=Xd(t),Xd(e)!==t&&r)throw Error(P(425))}function fi(){}var co=null,uo=null;function ho(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var go=typeof setTimeout=="function"?setTimeout:void 0,dp=typeof clearTimeout=="function"?clearTimeout:void 0,Yd=typeof Promise=="function"?Promise:void 0,up=typeof queueMicrotask=="function"?queueMicrotask:typeof Yd<"u"?function(e){return Yd.resolve(null).then(e).catch(hp)}:go;function hp(e){setTimeout(function(){throw e})}function El(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Vs(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Vs(t)}function Ir(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Jd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var fs=Math.random().toString(36).slice(2),Lt="__reactFiber$"+fs,Zs="__reactProps$"+fs,tr="__reactContainer$"+fs,fo="__reactEvents$"+fs,gp="__reactListeners$"+fs,fp="__reactHandles$"+fs;function Jr(e){var t=e[Lt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[tr]||r[Lt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Jd(e);e!==null;){if(r=e[Lt])return r;e=Jd(e)}return t}e=r,r=e.parentNode}return null}function ba(e){return e=e[Lt]||e[tr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Rn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(P(33))}function Qi(e){return e[Zs]||null}var mo=[],Mn=-1;function Hr(e){return{current:e}}function re(e){0>Mn||(e.current=mo[Mn],mo[Mn]=null,Mn--)}function ee(e,t){Mn++,mo[Mn]=e.current,e.current=t}var Ur={},Ae=Hr(Ur),Ye=Hr(!1),pn=Ur;function ss(e,t){var r=e.type.contextTypes;if(!r)return Ur;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Je(e){return e=e.childContextTypes,e!=null}function mi(){re(Ye),re(Ae)}function Zd(e,t,r){if(Ae.current!==Ur)throw Error(P(168));ee(Ae,t),ee(Ye,r)}function S0(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(P(108,Jf(e)||"Unknown",a));return ce({},r,n)}function pi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ur,pn=Ae.current,ee(Ae,e),ee(Ye,Ye.current),!0}function eu(e,t,r){var n=e.stateNode;if(!n)throw Error(P(169));r?(e=S0(e,t,pn),n.__reactInternalMemoizedMergedChildContext=e,re(Ye),re(Ae),ee(Ae,e)):re(Ye),ee(Ye,r)}var qt=null,Wi=!1,Tl=!1;function C0(e){qt===null?qt=[e]:qt.push(e)}function mp(e){Wi=!0,C0(e)}function qr(){if(!Tl&&qt!==null){Tl=!0;var e=0,t=Z;try{var r=qt;for(Z=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}qt=null,Wi=!1}catch(a){throw qt!==null&&(qt=qt.slice(e+1)),Yh(xc,qr),a}finally{Z=t,Tl=!1}}return null}var Dn=[],Ln=0,xi=null,yi=0,ut=[],ht=0,xn=null,Gt=1,Xt="";function Xr(e,t){Dn[Ln++]=yi,Dn[Ln++]=xi,xi=e,yi=t}function _0(e,t,r){ut[ht++]=Gt,ut[ht++]=Xt,ut[ht++]=xn,xn=e;var n=Gt;e=Xt;var a=32-Ct(n)-1;n&=~(1<<a),r+=1;var i=32-Ct(t)+a;if(30<i){var l=a-a%5;i=(n&(1<<l)-1).toString(32),n>>=l,a-=l,Gt=1<<32-Ct(t)+a|r<<a|n,Xt=i+e}else Gt=1<<i|r<<a|n,Xt=e}function Cc(e){e.return!==null&&(Xr(e,1),_0(e,1,0))}function _c(e){for(;e===xi;)xi=Dn[--Ln],Dn[Ln]=null,yi=Dn[--Ln],Dn[Ln]=null;for(;e===xn;)xn=ut[--ht],ut[ht]=null,Xt=ut[--ht],ut[ht]=null,Gt=ut[--ht],ut[ht]=null}var at=null,nt=null,ae=!1,Nt=null;function E0(e,t){var r=gt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function tu(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,at=e,nt=Ir(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,at=e,nt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=xn!==null?{id:Gt,overflow:Xt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=gt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,at=e,nt=null,!0):!1;default:return!1}}function po(e){return(e.mode&1)!==0&&(e.flags&128)===0}function xo(e){if(ae){var t=nt;if(t){var r=t;if(!tu(e,t)){if(po(e))throw Error(P(418));t=Ir(r.nextSibling);var n=at;t&&tu(e,t)?E0(n,r):(e.flags=e.flags&-4097|2,ae=!1,at=e)}}else{if(po(e))throw Error(P(418));e.flags=e.flags&-4097|2,ae=!1,at=e}}}function ru(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;at=e}function Aa(e){if(e!==at)return!1;if(!ae)return ru(e),ae=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ho(e.type,e.memoizedProps)),t&&(t=nt)){if(po(e))throw T0(),Error(P(418));for(;t;)E0(e,t),t=Ir(t.nextSibling)}if(ru(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(P(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){nt=Ir(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}nt=null}}else nt=at?Ir(e.stateNode.nextSibling):null;return!0}function T0(){for(var e=nt;e;)e=Ir(e.nextSibling)}function as(){nt=at=null,ae=!1}function Ec(e){Nt===null?Nt=[e]:Nt.push(e)}var pp=ir.ReactCurrentBatchConfig;function Ss(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(P(309));var n=r.stateNode}if(!n)throw Error(P(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(P(284));if(!r._owner)throw Error(P(290,e))}return e}function Oa(e,t){throw e=Object.prototype.toString.call(t),Error(P(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nu(e){var t=e._init;return t(e._payload)}function P0(e){function t(g,f){if(e){var p=g.deletions;p===null?(g.deletions=[f],g.flags|=16):p.push(f)}}function r(g,f){if(!e)return null;for(;f!==null;)t(g,f),f=f.sibling;return null}function n(g,f){for(g=new Map;f!==null;)f.key!==null?g.set(f.key,f):g.set(f.index,f),f=f.sibling;return g}function a(g,f){return g=Lr(g,f),g.index=0,g.sibling=null,g}function i(g,f,p){return g.index=p,e?(p=g.alternate,p!==null?(p=p.index,p<f?(g.flags|=2,f):p):(g.flags|=2,f)):(g.flags|=1048576,f)}function l(g){return e&&g.alternate===null&&(g.flags|=2),g}function o(g,f,p,b){return f===null||f.tag!==6?(f=Fl(p,g.mode,b),f.return=g,f):(f=a(f,p),f.return=g,f)}function c(g,f,p,b){var N=p.type;return N===En?h(g,f,p.props.children,b,p.key):f!==null&&(f.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===dr&&nu(N)===f.type)?(b=a(f,p.props),b.ref=Ss(g,f,p),b.return=g,b):(b=ni(p.type,p.key,p.props,null,g.mode,b),b.ref=Ss(g,f,p),b.return=g,b)}function d(g,f,p,b){return f===null||f.tag!==4||f.stateNode.containerInfo!==p.containerInfo||f.stateNode.implementation!==p.implementation?(f=Al(p,g.mode,b),f.return=g,f):(f=a(f,p.children||[]),f.return=g,f)}function h(g,f,p,b,N){return f===null||f.tag!==7?(f=gn(p,g.mode,b,N),f.return=g,f):(f=a(f,p),f.return=g,f)}function u(g,f,p){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Fl(""+f,g.mode,p),f.return=g,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case _a:return p=ni(f.type,f.key,f.props,null,g.mode,p),p.ref=Ss(g,null,f),p.return=g,p;case _n:return f=Al(f,g.mode,p),f.return=g,f;case dr:var b=f._init;return u(g,b(f._payload),p)}if(Ps(f)||bs(f))return f=gn(f,g.mode,p,null),f.return=g,f;Oa(g,f)}return null}function m(g,f,p,b){var N=f!==null?f.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return N!==null?null:o(g,f,""+p,b);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case _a:return p.key===N?c(g,f,p,b):null;case _n:return p.key===N?d(g,f,p,b):null;case dr:return N=p._init,m(g,f,N(p._payload),b)}if(Ps(p)||bs(p))return N!==null?null:h(g,f,p,b,null);Oa(g,p)}return null}function x(g,f,p,b,N){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(p)||null,o(f,g,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case _a:return g=g.get(b.key===null?p:b.key)||null,c(f,g,b,N);case _n:return g=g.get(b.key===null?p:b.key)||null,d(f,g,b,N);case dr:var T=b._init;return x(g,f,p,T(b._payload),N)}if(Ps(b)||bs(b))return g=g.get(p)||null,h(f,g,b,N,null);Oa(f,b)}return null}function k(g,f,p,b){for(var N=null,T=null,S=f,E=f=0,D=null;S!==null&&E<p.length;E++){S.index>E?(D=S,S=null):D=S.sibling;var I=m(g,S,p[E],b);if(I===null){S===null&&(S=D);break}e&&S&&I.alternate===null&&t(g,S),f=i(I,f,E),T===null?N=I:T.sibling=I,T=I,S=D}if(E===p.length)return r(g,S),ae&&Xr(g,E),N;if(S===null){for(;E<p.length;E++)S=u(g,p[E],b),S!==null&&(f=i(S,f,E),T===null?N=S:T.sibling=S,T=S);return ae&&Xr(g,E),N}for(S=n(g,S);E<p.length;E++)D=x(S,g,E,p[E],b),D!==null&&(e&&D.alternate!==null&&S.delete(D.key===null?E:D.key),f=i(D,f,E),T===null?N=D:T.sibling=D,T=D);return e&&S.forEach(function(A){return t(g,A)}),ae&&Xr(g,E),N}function w(g,f,p,b){var N=bs(p);if(typeof N!="function")throw Error(P(150));if(p=N.call(p),p==null)throw Error(P(151));for(var T=N=null,S=f,E=f=0,D=null,I=p.next();S!==null&&!I.done;E++,I=p.next()){S.index>E?(D=S,S=null):D=S.sibling;var A=m(g,S,I.value,b);if(A===null){S===null&&(S=D);break}e&&S&&A.alternate===null&&t(g,S),f=i(A,f,E),T===null?N=A:T.sibling=A,T=A,S=D}if(I.done)return r(g,S),ae&&Xr(g,E),N;if(S===null){for(;!I.done;E++,I=p.next())I=u(g,I.value,b),I!==null&&(f=i(I,f,E),T===null?N=I:T.sibling=I,T=I);return ae&&Xr(g,E),N}for(S=n(g,S);!I.done;E++,I=p.next())I=x(S,g,E,I.value,b),I!==null&&(e&&I.alternate!==null&&S.delete(I.key===null?E:I.key),f=i(I,f,E),T===null?N=I:T.sibling=I,T=I);return e&&S.forEach(function(V){return t(g,V)}),ae&&Xr(g,E),N}function j(g,f,p,b){if(typeof p=="object"&&p!==null&&p.type===En&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case _a:e:{for(var N=p.key,T=f;T!==null;){if(T.key===N){if(N=p.type,N===En){if(T.tag===7){r(g,T.sibling),f=a(T,p.props.children),f.return=g,g=f;break e}}else if(T.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===dr&&nu(N)===T.type){r(g,T.sibling),f=a(T,p.props),f.ref=Ss(g,T,p),f.return=g,g=f;break e}r(g,T);break}else t(g,T);T=T.sibling}p.type===En?(f=gn(p.props.children,g.mode,b,p.key),f.return=g,g=f):(b=ni(p.type,p.key,p.props,null,g.mode,b),b.ref=Ss(g,f,p),b.return=g,g=b)}return l(g);case _n:e:{for(T=p.key;f!==null;){if(f.key===T)if(f.tag===4&&f.stateNode.containerInfo===p.containerInfo&&f.stateNode.implementation===p.implementation){r(g,f.sibling),f=a(f,p.children||[]),f.return=g,g=f;break e}else{r(g,f);break}else t(g,f);f=f.sibling}f=Al(p,g.mode,b),f.return=g,g=f}return l(g);case dr:return T=p._init,j(g,f,T(p._payload),b)}if(Ps(p))return k(g,f,p,b);if(bs(p))return w(g,f,p,b);Oa(g,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,f!==null&&f.tag===6?(r(g,f.sibling),f=a(f,p),f.return=g,g=f):(r(g,f),f=Fl(p,g.mode,b),f.return=g,g=f),l(g)):r(g,f)}return j}var is=P0(!0),I0=P0(!1),vi=Hr(null),bi=null,Fn=null,Tc=null;function Pc(){Tc=Fn=bi=null}function Ic(e){var t=vi.current;re(vi),e._currentValue=t}function yo(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Hn(e,t){bi=e,Tc=Fn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Xe=!0),e.firstContext=null)}function mt(e){var t=e._currentValue;if(Tc!==e)if(e={context:e,memoizedValue:t,next:null},Fn===null){if(bi===null)throw Error(P(308));Fn=e,bi.dependencies={lanes:0,firstContext:e}}else Fn=Fn.next=e;return t}var Zr=null;function Rc(e){Zr===null?Zr=[e]:Zr.push(e)}function R0(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Rc(t)):(r.next=a.next,a.next=r),t.interleaved=r,rr(e,n)}function rr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ur=!1;function Mc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function M0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Yt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Rr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,G&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,rr(e,r)}return a=n.interleaved,a===null?(t.next=t,Rc(n)):(t.next=a.next,a.next=t),n.interleaved=t,rr(e,r)}function Ya(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,yc(e,r)}}function su(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ki(e,t,r,n){var a=e.updateQueue;ur=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var h=e.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==l&&(o===null?h.firstBaseUpdate=d:o.next=d,h.lastBaseUpdate=c))}if(i!==null){var u=a.baseState;l=0,h=d=c=null,o=i;do{var m=o.lane,x=o.eventTime;if((n&m)===m){h!==null&&(h=h.next={eventTime:x,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var k=e,w=o;switch(m=t,x=r,w.tag){case 1:if(k=w.payload,typeof k=="function"){u=k.call(x,u,m);break e}u=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=w.payload,m=typeof k=="function"?k.call(x,u,m):k,m==null)break e;u=ce({},u,m);break e;case 2:ur=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[o]:m.push(o))}else x={eventTime:x,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(d=h=x,c=u):h=h.next=x,l|=m;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;m=o,o=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(h===null&&(c=u),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=h,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);vn|=l,e.lanes=l,e.memoizedState=u}}function au(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(P(191,a));a.call(n)}}}var ka={},Ot=Hr(ka),ea=Hr(ka),ta=Hr(ka);function en(e){if(e===ka)throw Error(P(174));return e}function Dc(e,t){switch(ee(ta,t),ee(ea,e),ee(Ot,ka),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Yl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Yl(t,e)}re(Ot),ee(Ot,t)}function ls(){re(Ot),re(ea),re(ta)}function D0(e){en(ta.current);var t=en(Ot.current),r=Yl(t,e.type);t!==r&&(ee(ea,e),ee(Ot,r))}function Lc(e){ea.current===e&&(re(Ot),re(ea))}var ie=Hr(0);function wi(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Pl=[];function Fc(){for(var e=0;e<Pl.length;e++)Pl[e]._workInProgressVersionPrimary=null;Pl.length=0}var Ja=ir.ReactCurrentDispatcher,Il=ir.ReactCurrentBatchConfig,yn=0,oe=null,we=null,Se=null,ji=!1,$s=!1,ra=0,xp=0;function Re(){throw Error(P(321))}function Ac(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Et(e[r],t[r]))return!1;return!0}function Oc(e,t,r,n,a,i){if(yn=i,oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ja.current=e===null||e.memoizedState===null?kp:wp,e=r(n,a),$s){i=0;do{if($s=!1,ra=0,25<=i)throw Error(P(301));i+=1,Se=we=null,t.updateQueue=null,Ja.current=jp,e=r(n,a)}while($s)}if(Ja.current=Ni,t=we!==null&&we.next!==null,yn=0,Se=we=oe=null,ji=!1,t)throw Error(P(300));return e}function $c(){var e=ra!==0;return ra=0,e}function Pt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?oe.memoizedState=Se=e:Se=Se.next=e,Se}function pt(){if(we===null){var e=oe.alternate;e=e!==null?e.memoizedState:null}else e=we.next;var t=Se===null?oe.memoizedState:Se.next;if(t!==null)Se=t,we=e;else{if(e===null)throw Error(P(310));we=e,e={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},Se===null?oe.memoizedState=Se=e:Se=Se.next=e}return Se}function na(e,t){return typeof t=="function"?t(e):t}function Rl(e){var t=pt(),r=t.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=e;var n=we,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var o=l=null,c=null,d=i;do{var h=d.lane;if((yn&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var u={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=u,l=n):c=c.next=u,oe.lanes|=h,vn|=h}d=d.next}while(d!==null&&d!==i);c===null?l=n:c.next=o,Et(n,t.memoizedState)||(Xe=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,oe.lanes|=i,vn|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ml(e){var t=pt(),r=t.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);Et(i,t.memoizedState)||(Xe=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function L0(){}function F0(e,t){var r=oe,n=pt(),a=t(),i=!Et(n.memoizedState,a);if(i&&(n.memoizedState=a,Xe=!0),n=n.queue,Uc($0.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Se!==null&&Se.memoizedState.tag&1){if(r.flags|=2048,sa(9,O0.bind(null,r,n,a,t),void 0,null),_e===null)throw Error(P(349));yn&30||A0(r,t,a)}return a}function A0(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=oe.updateQueue,t===null?(t={lastEffect:null,stores:null},oe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function O0(e,t,r,n){t.value=r,t.getSnapshot=n,U0(t)&&z0(e)}function $0(e,t,r){return r(function(){U0(t)&&z0(e)})}function U0(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Et(e,r)}catch{return!0}}function z0(e){var t=rr(e,1);t!==null&&_t(t,e,1,-1)}function iu(e){var t=Pt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:e},t.queue=e,e=e.dispatch=bp.bind(null,oe,e),[t.memoizedState,e]}function sa(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=oe.updateQueue,t===null?(t={lastEffect:null,stores:null},oe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function B0(){return pt().memoizedState}function Za(e,t,r,n){var a=Pt();oe.flags|=e,a.memoizedState=sa(1|t,r,void 0,n===void 0?null:n)}function Ki(e,t,r,n){var a=pt();n=n===void 0?null:n;var i=void 0;if(we!==null){var l=we.memoizedState;if(i=l.destroy,n!==null&&Ac(n,l.deps)){a.memoizedState=sa(t,r,i,n);return}}oe.flags|=e,a.memoizedState=sa(1|t,r,i,n)}function lu(e,t){return Za(8390656,8,e,t)}function Uc(e,t){return Ki(2048,8,e,t)}function H0(e,t){return Ki(4,2,e,t)}function q0(e,t){return Ki(4,4,e,t)}function Q0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function W0(e,t,r){return r=r!=null?r.concat([e]):null,Ki(4,4,Q0.bind(null,t,e),r)}function zc(){}function K0(e,t){var r=pt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ac(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function V0(e,t){var r=pt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ac(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function G0(e,t,r){return yn&21?(Et(r,t)||(r=e0(),oe.lanes|=r,vn|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Xe=!0),e.memoizedState=r)}function yp(e,t){var r=Z;Z=r!==0&&4>r?r:4,e(!0);var n=Il.transition;Il.transition={};try{e(!1),t()}finally{Z=r,Il.transition=n}}function X0(){return pt().memoizedState}function vp(e,t,r){var n=Dr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Y0(e))J0(t,r);else if(r=R0(e,t,r,n),r!==null){var a=Be();_t(r,e,n,a),Z0(r,t,n)}}function bp(e,t,r){var n=Dr(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Y0(e))J0(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,r);if(a.hasEagerState=!0,a.eagerState=o,Et(o,l)){var c=t.interleaved;c===null?(a.next=a,Rc(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=R0(e,t,a,n),r!==null&&(a=Be(),_t(r,e,n,a),Z0(r,t,n))}}function Y0(e){var t=e.alternate;return e===oe||t!==null&&t===oe}function J0(e,t){$s=ji=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Z0(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,yc(e,r)}}var Ni={readContext:mt,useCallback:Re,useContext:Re,useEffect:Re,useImperativeHandle:Re,useInsertionEffect:Re,useLayoutEffect:Re,useMemo:Re,useReducer:Re,useRef:Re,useState:Re,useDebugValue:Re,useDeferredValue:Re,useTransition:Re,useMutableSource:Re,useSyncExternalStore:Re,useId:Re,unstable_isNewReconciler:!1},kp={readContext:mt,useCallback:function(e,t){return Pt().memoizedState=[e,t===void 0?null:t],e},useContext:mt,useEffect:lu,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Za(4194308,4,Q0.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Za(4194308,4,e,t)},useInsertionEffect:function(e,t){return Za(4,2,e,t)},useMemo:function(e,t){var r=Pt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Pt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=vp.bind(null,oe,e),[n.memoizedState,e]},useRef:function(e){var t=Pt();return e={current:e},t.memoizedState=e},useState:iu,useDebugValue:zc,useDeferredValue:function(e){return Pt().memoizedState=e},useTransition:function(){var e=iu(!1),t=e[0];return e=yp.bind(null,e[1]),Pt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=oe,a=Pt();if(ae){if(r===void 0)throw Error(P(407));r=r()}else{if(r=t(),_e===null)throw Error(P(349));yn&30||A0(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,lu($0.bind(null,n,i,e),[e]),n.flags|=2048,sa(9,O0.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Pt(),t=_e.identifierPrefix;if(ae){var r=Xt,n=Gt;r=(n&~(1<<32-Ct(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ra++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=xp++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},wp={readContext:mt,useCallback:K0,useContext:mt,useEffect:Uc,useImperativeHandle:W0,useInsertionEffect:H0,useLayoutEffect:q0,useMemo:V0,useReducer:Rl,useRef:B0,useState:function(){return Rl(na)},useDebugValue:zc,useDeferredValue:function(e){var t=pt();return G0(t,we.memoizedState,e)},useTransition:function(){var e=Rl(na)[0],t=pt().memoizedState;return[e,t]},useMutableSource:L0,useSyncExternalStore:F0,useId:X0,unstable_isNewReconciler:!1},jp={readContext:mt,useCallback:K0,useContext:mt,useEffect:Uc,useImperativeHandle:W0,useInsertionEffect:H0,useLayoutEffect:q0,useMemo:V0,useReducer:Ml,useRef:B0,useState:function(){return Ml(na)},useDebugValue:zc,useDeferredValue:function(e){var t=pt();return we===null?t.memoizedState=e:G0(t,we.memoizedState,e)},useTransition:function(){var e=Ml(na)[0],t=pt().memoizedState;return[e,t]},useMutableSource:L0,useSyncExternalStore:F0,useId:X0,unstable_isNewReconciler:!1};function vt(e,t){if(e&&e.defaultProps){t=ce({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function vo(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ce({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Vi={isMounted:function(e){return(e=e._reactInternals)?Sn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Be(),a=Dr(e),i=Yt(n,a);i.payload=t,r!=null&&(i.callback=r),t=Rr(e,i,a),t!==null&&(_t(t,e,a,n),Ya(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Be(),a=Dr(e),i=Yt(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Rr(e,i,a),t!==null&&(_t(t,e,a,n),Ya(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Be(),n=Dr(e),a=Yt(r,n);a.tag=2,t!=null&&(a.callback=t),t=Rr(e,a,n),t!==null&&(_t(t,e,n,r),Ya(t,e,n))}};function ou(e,t,r,n,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,l):t.prototype&&t.prototype.isPureReactComponent?!Xs(r,n)||!Xs(a,i):!0}function eg(e,t,r){var n=!1,a=Ur,i=t.contextType;return typeof i=="object"&&i!==null?i=mt(i):(a=Je(t)?pn:Ae.current,n=t.contextTypes,i=(n=n!=null)?ss(e,a):Ur),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Vi,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function cu(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Vi.enqueueReplaceState(t,t.state,null)}function bo(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Mc(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=mt(i):(i=Je(t)?pn:Ae.current,a.context=ss(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(vo(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Vi.enqueueReplaceState(a,a.state,null),ki(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function os(e,t){try{var r="",n=t;do r+=Yf(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Dl(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ko(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Np=typeof WeakMap=="function"?WeakMap:Map;function tg(e,t,r){r=Yt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ci||(Ci=!0,Io=n),ko(e,t)},r}function rg(e,t,r){r=Yt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){ko(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){ko(e,t),typeof n!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function du(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Np;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=Op.bind(null,e,t,r),t.then(e,e))}function uu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function hu(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Yt(-1,1),t.tag=2,Rr(r,t,1))),r.lanes|=1),e)}var Sp=ir.ReactCurrentOwner,Xe=!1;function Ue(e,t,r,n){t.child=e===null?I0(t,null,r,n):is(t,e.child,r,n)}function gu(e,t,r,n,a){r=r.render;var i=t.ref;return Hn(t,a),n=Oc(e,t,r,n,i,a),r=$c(),e!==null&&!Xe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,nr(e,t,a)):(ae&&r&&Cc(t),t.flags|=1,Ue(e,t,n,a),t.child)}function fu(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!Gc(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,ng(e,t,i,n,a)):(e=ni(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:Xs,r(l,n)&&e.ref===t.ref)return nr(e,t,a)}return t.flags|=1,e=Lr(i,n),e.ref=t.ref,e.return=t,t.child=e}function ng(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(Xs(i,n)&&e.ref===t.ref)if(Xe=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Xe=!0);else return t.lanes=e.lanes,nr(e,t,a)}return wo(e,t,r,n,a)}function sg(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ee(On,rt),rt|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ee(On,rt),rt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,ee(On,rt),rt|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,ee(On,rt),rt|=n;return Ue(e,t,a,r),t.child}function ag(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function wo(e,t,r,n,a){var i=Je(r)?pn:Ae.current;return i=ss(t,i),Hn(t,a),r=Oc(e,t,r,n,i,a),n=$c(),e!==null&&!Xe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,nr(e,t,a)):(ae&&n&&Cc(t),t.flags|=1,Ue(e,t,r,a),t.child)}function mu(e,t,r,n,a){if(Je(r)){var i=!0;pi(t)}else i=!1;if(Hn(t,a),t.stateNode===null)ei(e,t),eg(t,r,n),bo(t,r,n,a),n=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,d=r.contextType;typeof d=="object"&&d!==null?d=mt(d):(d=Je(r)?pn:Ae.current,d=ss(t,d));var h=r.getDerivedStateFromProps,u=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function";u||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==n||c!==d)&&cu(t,l,n,d),ur=!1;var m=t.memoizedState;l.state=m,ki(t,n,l,a),c=t.memoizedState,o!==n||m!==c||Ye.current||ur?(typeof h=="function"&&(vo(t,r,h,n),c=t.memoizedState),(o=ur||ou(t,r,o,n,m,c,d))?(u||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),l.props=n,l.state=c,l.context=d,n=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,M0(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:vt(t.type,o),l.props=d,u=t.pendingProps,m=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=mt(c):(c=Je(r)?pn:Ae.current,c=ss(t,c));var x=r.getDerivedStateFromProps;(h=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==u||m!==c)&&cu(t,l,n,c),ur=!1,m=t.memoizedState,l.state=m,ki(t,n,l,a);var k=t.memoizedState;o!==u||m!==k||Ye.current||ur?(typeof x=="function"&&(vo(t,r,x,n),k=t.memoizedState),(d=ur||ou(t,r,d,n,m,k,c)||!1)?(h||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,k,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,k,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=k),l.props=n,l.state=k,l.context=c,n=d):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return jo(e,t,r,n,i,a)}function jo(e,t,r,n,a,i){ag(e,t);var l=(t.flags&128)!==0;if(!n&&!l)return a&&eu(t,r,!1),nr(e,t,i);n=t.stateNode,Sp.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&l?(t.child=is(t,e.child,null,i),t.child=is(t,null,o,i)):Ue(e,t,o,i),t.memoizedState=n.state,a&&eu(t,r,!0),t.child}function ig(e){var t=e.stateNode;t.pendingContext?Zd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Zd(e,t.context,!1),Dc(e,t.containerInfo)}function pu(e,t,r,n,a){return as(),Ec(a),t.flags|=256,Ue(e,t,r,n),t.child}var No={dehydrated:null,treeContext:null,retryLane:0};function So(e){return{baseLanes:e,cachePool:null,transitions:null}}function lg(e,t,r){var n=t.pendingProps,a=ie.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ee(ie,a&1),e===null)return xo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=n.children,e=n.fallback,i?(n=t.mode,i=t.child,l={mode:"hidden",children:l},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Yi(l,n,0,null),e=gn(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=So(r),t.memoizedState=No,e):Bc(t,l));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return Cp(e,t,l,n,o,a,r);if(i){i=n.fallback,l=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(l&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Lr(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=Lr(o,i):(i=gn(i,l,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,l=e.child.memoizedState,l=l===null?So(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~r,t.memoizedState=No,n}return i=e.child,e=i.sibling,n=Lr(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Bc(e,t){return t=Yi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function $a(e,t,r,n){return n!==null&&Ec(n),is(t,e.child,null,r),e=Bc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Cp(e,t,r,n,a,i,l){if(r)return t.flags&256?(t.flags&=-257,n=Dl(Error(P(422))),$a(e,t,l,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Yi({mode:"visible",children:n.children},a,0,null),i=gn(i,a,l,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&is(t,e.child,null,l),t.child.memoizedState=So(l),t.memoizedState=No,i);if(!(t.mode&1))return $a(e,t,l,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(P(419)),n=Dl(i,n,void 0),$a(e,t,l,n)}if(o=(l&e.childLanes)!==0,Xe||o){if(n=_e,n!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,rr(e,a),_t(n,e,a,-1))}return Vc(),n=Dl(Error(P(421))),$a(e,t,l,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=$p.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,nt=Ir(a.nextSibling),at=t,ae=!0,Nt=null,e!==null&&(ut[ht++]=Gt,ut[ht++]=Xt,ut[ht++]=xn,Gt=e.id,Xt=e.overflow,xn=t),t=Bc(t,n.children),t.flags|=4096,t)}function xu(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),yo(e.return,t,r)}function Ll(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function og(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Ue(e,t,n.children,r),n=ie.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&xu(e,r,t);else if(e.tag===19)xu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ee(ie,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&wi(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Ll(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&wi(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Ll(t,!0,r,null,i);break;case"together":Ll(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ei(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function nr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),vn|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(P(153));if(t.child!==null){for(e=t.child,r=Lr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Lr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function _p(e,t,r){switch(t.tag){case 3:ig(t),as();break;case 5:D0(t);break;case 1:Je(t.type)&&pi(t);break;case 4:Dc(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;ee(vi,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ee(ie,ie.current&1),t.flags|=128,null):r&t.child.childLanes?lg(e,t,r):(ee(ie,ie.current&1),e=nr(e,t,r),e!==null?e.sibling:null);ee(ie,ie.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return og(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ee(ie,ie.current),n)break;return null;case 22:case 23:return t.lanes=0,sg(e,t,r)}return nr(e,t,r)}var cg,Co,dg,ug;cg=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Co=function(){};dg=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,en(Ot.current);var i=null;switch(r){case"input":a=Kl(e,a),n=Kl(e,n),i=[];break;case"select":a=ce({},a,{value:void 0}),n=ce({},n,{value:void 0}),i=[];break;case"textarea":a=Xl(e,a),n=Xl(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=fi)}Jl(r,n);var l;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Hs.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(o=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Hs.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&te("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};ug=function(e,t,r,n){r!==n&&(t.flags|=4)};function Cs(e,t){if(!ae)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Me(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Ep(e,t,r){var n=t.pendingProps;switch(_c(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Me(t),null;case 1:return Je(t.type)&&mi(),Me(t),null;case 3:return n=t.stateNode,ls(),re(Ye),re(Ae),Fc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Aa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Nt!==null&&(Do(Nt),Nt=null))),Co(e,t),Me(t),null;case 5:Lc(t);var a=en(ta.current);if(r=t.type,e!==null&&t.stateNode!=null)dg(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(P(166));return Me(t),null}if(e=en(Ot.current),Aa(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Lt]=t,n[Zs]=i,e=(t.mode&1)!==0,r){case"dialog":te("cancel",n),te("close",n);break;case"iframe":case"object":case"embed":te("load",n);break;case"video":case"audio":for(a=0;a<Rs.length;a++)te(Rs[a],n);break;case"source":te("error",n);break;case"img":case"image":case"link":te("error",n),te("load",n);break;case"details":te("toggle",n);break;case"input":Cd(n,i),te("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},te("invalid",n);break;case"textarea":Ed(n,i),te("invalid",n)}Jl(r,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&Fa(n.textContent,o,e),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Fa(n.textContent,o,e),a=["children",""+o]):Hs.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&te("scroll",n)}switch(r){case"input":Ea(n),_d(n,i,!0);break;case"textarea":Ea(n),Td(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=fi)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=$h(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),r==="select"&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[Lt]=t,e[Zs]=n,cg(e,t,!1,!1),t.stateNode=e;e:{switch(l=Zl(r,n),r){case"dialog":te("cancel",e),te("close",e),a=n;break;case"iframe":case"object":case"embed":te("load",e),a=n;break;case"video":case"audio":for(a=0;a<Rs.length;a++)te(Rs[a],e);a=n;break;case"source":te("error",e),a=n;break;case"img":case"image":case"link":te("error",e),te("load",e),a=n;break;case"details":te("toggle",e),a=n;break;case"input":Cd(e,n),a=Kl(e,n),te("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=ce({},n,{value:void 0}),te("invalid",e);break;case"textarea":Ed(e,n),a=Xl(e,n),te("invalid",e);break;default:a=n}Jl(r,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?Bh(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Uh(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&qs(e,c):typeof c=="number"&&qs(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Hs.hasOwnProperty(i)?c!=null&&i==="onScroll"&&te("scroll",e):c!=null&&hc(e,i,c,l))}switch(r){case"input":Ea(e),_d(e,n,!1);break;case"textarea":Ea(e),Td(e);break;case"option":n.value!=null&&e.setAttribute("value",""+$r(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?$n(e,!!n.multiple,i,!1):n.defaultValue!=null&&$n(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=fi)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Me(t),null;case 6:if(e&&t.stateNode!=null)ug(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(P(166));if(r=en(ta.current),en(Ot.current),Aa(t)){if(n=t.stateNode,r=t.memoizedProps,n[Lt]=t,(i=n.nodeValue!==r)&&(e=at,e!==null))switch(e.tag){case 3:Fa(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fa(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Lt]=t,t.stateNode=n}return Me(t),null;case 13:if(re(ie),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ae&&nt!==null&&t.mode&1&&!(t.flags&128))T0(),as(),t.flags|=98560,i=!1;else if(i=Aa(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(P(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(P(317));i[Lt]=t}else as(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Me(t),i=!1}else Nt!==null&&(Do(Nt),Nt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ie.current&1?je===0&&(je=3):Vc())),t.updateQueue!==null&&(t.flags|=4),Me(t),null);case 4:return ls(),Co(e,t),e===null&&Ys(t.stateNode.containerInfo),Me(t),null;case 10:return Ic(t.type._context),Me(t),null;case 17:return Je(t.type)&&mi(),Me(t),null;case 19:if(re(ie),i=t.memoizedState,i===null)return Me(t),null;if(n=(t.flags&128)!==0,l=i.rendering,l===null)if(n)Cs(i,!1);else{if(je!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=wi(e),l!==null){for(t.flags|=128,Cs(i,!1),n=l.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ee(ie,ie.current&1|2),t.child}e=e.sibling}i.tail!==null&&ge()>cs&&(t.flags|=128,n=!0,Cs(i,!1),t.lanes=4194304)}else{if(!n)if(e=wi(l),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Cs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!ae)return Me(t),null}else 2*ge()-i.renderingStartTime>cs&&r!==1073741824&&(t.flags|=128,n=!0,Cs(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(r=i.last,r!==null?r.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ge(),t.sibling=null,r=ie.current,ee(ie,n?r&1|2:r&1),t):(Me(t),null);case 22:case 23:return Kc(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?rt&1073741824&&(Me(t),t.subtreeFlags&6&&(t.flags|=8192)):Me(t),null;case 24:return null;case 25:return null}throw Error(P(156,t.tag))}function Tp(e,t){switch(_c(t),t.tag){case 1:return Je(t.type)&&mi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ls(),re(Ye),re(Ae),Fc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Lc(t),null;case 13:if(re(ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(P(340));as()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return re(ie),null;case 4:return ls(),null;case 10:return Ic(t.type._context),null;case 22:case 23:return Kc(),null;case 24:return null;default:return null}}var Ua=!1,De=!1,Pp=typeof WeakSet=="function"?WeakSet:Set,F=null;function An(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ue(e,t,n)}else r.current=null}function _o(e,t,r){try{r()}catch(n){ue(e,t,n)}}var yu=!1;function Ip(e,t){if(co=ui,e=p0(),Sc(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,d=0,h=0,u=e,m=null;t:for(;;){for(var x;u!==r||a!==0&&u.nodeType!==3||(o=l+a),u!==i||n!==0&&u.nodeType!==3||(c=l+n),u.nodeType===3&&(l+=u.nodeValue.length),(x=u.firstChild)!==null;)m=u,u=x;for(;;){if(u===e)break t;if(m===r&&++d===a&&(o=l),m===i&&++h===n&&(c=l),(x=u.nextSibling)!==null)break;u=m,m=u.parentNode}u=x}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(uo={focusedElem:e,selectionRange:r},ui=!1,F=t;F!==null;)if(t=F,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,F=e;else for(;F!==null;){t=F;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var w=k.memoizedProps,j=k.memoizedState,g=t.stateNode,f=g.getSnapshotBeforeUpdate(t.elementType===t.type?w:vt(t.type,w),j);g.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(b){ue(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,F=e;break}F=t.return}return k=yu,yu=!1,k}function Us(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&_o(t,r,i)}a=a.next}while(a!==n)}}function Gi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Eo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function hg(e){var t=e.alternate;t!==null&&(e.alternate=null,hg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Lt],delete t[Zs],delete t[fo],delete t[gp],delete t[fp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function gg(e){return e.tag===5||e.tag===3||e.tag===4}function vu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function To(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=fi));else if(n!==4&&(e=e.child,e!==null))for(To(e,t,r),e=e.sibling;e!==null;)To(e,t,r),e=e.sibling}function Po(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Po(e,t,r),e=e.sibling;e!==null;)Po(e,t,r),e=e.sibling}var Ee=null,wt=!1;function or(e,t,r){for(r=r.child;r!==null;)fg(e,t,r),r=r.sibling}function fg(e,t,r){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(zi,r)}catch{}switch(r.tag){case 5:De||An(r,t);case 6:var n=Ee,a=wt;Ee=null,or(e,t,r),Ee=n,wt=a,Ee!==null&&(wt?(e=Ee,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ee.removeChild(r.stateNode));break;case 18:Ee!==null&&(wt?(e=Ee,r=r.stateNode,e.nodeType===8?El(e.parentNode,r):e.nodeType===1&&El(e,r),Vs(e)):El(Ee,r.stateNode));break;case 4:n=Ee,a=wt,Ee=r.stateNode.containerInfo,wt=!0,or(e,t,r),Ee=n,wt=a;break;case 0:case 11:case 14:case 15:if(!De&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&_o(r,t,l),a=a.next}while(a!==n)}or(e,t,r);break;case 1:if(!De&&(An(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){ue(r,t,o)}or(e,t,r);break;case 21:or(e,t,r);break;case 22:r.mode&1?(De=(n=De)||r.memoizedState!==null,or(e,t,r),De=n):or(e,t,r);break;default:or(e,t,r)}}function bu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Pp),t.forEach(function(n){var a=Up.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function yt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:Ee=o.stateNode,wt=!1;break e;case 3:Ee=o.stateNode.containerInfo,wt=!0;break e;case 4:Ee=o.stateNode.containerInfo,wt=!0;break e}o=o.return}if(Ee===null)throw Error(P(160));fg(i,l,a),Ee=null,wt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){ue(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)mg(t,e),t=t.sibling}function mg(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yt(t,e),Tt(e),n&4){try{Us(3,e,e.return),Gi(3,e)}catch(w){ue(e,e.return,w)}try{Us(5,e,e.return)}catch(w){ue(e,e.return,w)}}break;case 1:yt(t,e),Tt(e),n&512&&r!==null&&An(r,r.return);break;case 5:if(yt(t,e),Tt(e),n&512&&r!==null&&An(r,r.return),e.flags&32){var a=e.stateNode;try{qs(a,"")}catch(w){ue(e,e.return,w)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=r!==null?r.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&Ah(a,i),Zl(o,l);var d=Zl(o,i);for(l=0;l<c.length;l+=2){var h=c[l],u=c[l+1];h==="style"?Bh(a,u):h==="dangerouslySetInnerHTML"?Uh(a,u):h==="children"?qs(a,u):hc(a,h,u,d)}switch(o){case"input":Vl(a,i);break;case"textarea":Oh(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?$n(a,!!i.multiple,x,!1):m!==!!i.multiple&&(i.defaultValue!=null?$n(a,!!i.multiple,i.defaultValue,!0):$n(a,!!i.multiple,i.multiple?[]:"",!1))}a[Zs]=i}catch(w){ue(e,e.return,w)}}break;case 6:if(yt(t,e),Tt(e),n&4){if(e.stateNode===null)throw Error(P(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(w){ue(e,e.return,w)}}break;case 3:if(yt(t,e),Tt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Vs(t.containerInfo)}catch(w){ue(e,e.return,w)}break;case 4:yt(t,e),Tt(e);break;case 13:yt(t,e),Tt(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Qc=ge())),n&4&&bu(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(De=(d=De)||h,yt(t,e),De=d):yt(t,e),Tt(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(F=e,h=e.child;h!==null;){for(u=F=h;F!==null;){switch(m=F,x=m.child,m.tag){case 0:case 11:case 14:case 15:Us(4,m,m.return);break;case 1:An(m,m.return);var k=m.stateNode;if(typeof k.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(w){ue(n,r,w)}}break;case 5:An(m,m.return);break;case 22:if(m.memoizedState!==null){wu(u);continue}}x!==null?(x.return=m,F=x):wu(u)}h=h.sibling}e:for(h=null,u=e;;){if(u.tag===5){if(h===null){h=u;try{a=u.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=u.stateNode,c=u.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=zh("display",l))}catch(w){ue(e,e.return,w)}}}else if(u.tag===6){if(h===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(w){ue(e,e.return,w)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:yt(t,e),Tt(e),n&4&&bu(e);break;case 21:break;default:yt(t,e),Tt(e)}}function Tt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(gg(r)){var n=r;break e}r=r.return}throw Error(P(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(qs(a,""),n.flags&=-33);var i=vu(e);Po(e,i,a);break;case 3:case 4:var l=n.stateNode.containerInfo,o=vu(e);To(e,o,l);break;default:throw Error(P(161))}}catch(c){ue(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Rp(e,t,r){F=e,pg(e)}function pg(e,t,r){for(var n=(e.mode&1)!==0;F!==null;){var a=F,i=a.child;if(a.tag===22&&n){var l=a.memoizedState!==null||Ua;if(!l){var o=a.alternate,c=o!==null&&o.memoizedState!==null||De;o=Ua;var d=De;if(Ua=l,(De=c)&&!d)for(F=a;F!==null;)l=F,c=l.child,l.tag===22&&l.memoizedState!==null?ju(a):c!==null?(c.return=l,F=c):ju(a);for(;i!==null;)F=i,pg(i),i=i.sibling;F=a,Ua=o,De=d}ku(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,F=i):ku(e)}}function ku(e){for(;F!==null;){var t=F;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:De||Gi(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!De)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:vt(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&au(t,i,n);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}au(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var u=h.dehydrated;u!==null&&Vs(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}De||t.flags&512&&Eo(t)}catch(m){ue(t,t.return,m)}}if(t===e){F=null;break}if(r=t.sibling,r!==null){r.return=t.return,F=r;break}F=t.return}}function wu(e){for(;F!==null;){var t=F;if(t===e){F=null;break}var r=t.sibling;if(r!==null){r.return=t.return,F=r;break}F=t.return}}function ju(e){for(;F!==null;){var t=F;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Gi(4,t)}catch(c){ue(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){ue(t,a,c)}}var i=t.return;try{Eo(t)}catch(c){ue(t,i,c)}break;case 5:var l=t.return;try{Eo(t)}catch(c){ue(t,l,c)}}}catch(c){ue(t,t.return,c)}if(t===e){F=null;break}var o=t.sibling;if(o!==null){o.return=t.return,F=o;break}F=t.return}}var Mp=Math.ceil,Si=ir.ReactCurrentDispatcher,Hc=ir.ReactCurrentOwner,ft=ir.ReactCurrentBatchConfig,G=0,_e=null,ve=null,Pe=0,rt=0,On=Hr(0),je=0,aa=null,vn=0,Xi=0,qc=0,zs=null,Ge=null,Qc=0,cs=1/0,Ht=null,Ci=!1,Io=null,Mr=null,za=!1,Sr=null,_i=0,Bs=0,Ro=null,ti=-1,ri=0;function Be(){return G&6?ge():ti!==-1?ti:ti=ge()}function Dr(e){return e.mode&1?G&2&&Pe!==0?Pe&-Pe:pp.transition!==null?(ri===0&&(ri=e0()),ri):(e=Z,e!==0||(e=window.event,e=e===void 0?16:l0(e.type)),e):1}function _t(e,t,r,n){if(50<Bs)throw Bs=0,Ro=null,Error(P(185));ya(e,r,n),(!(G&2)||e!==_e)&&(e===_e&&(!(G&2)&&(Xi|=r),je===4&&gr(e,Pe)),Ze(e,n),r===1&&G===0&&!(t.mode&1)&&(cs=ge()+500,Wi&&qr()))}function Ze(e,t){var r=e.callbackNode;pm(e,t);var n=di(e,e===_e?Pe:0);if(n===0)r!==null&&Rd(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Rd(r),t===1)e.tag===0?mp(Nu.bind(null,e)):C0(Nu.bind(null,e)),up(function(){!(G&6)&&qr()}),r=null;else{switch(t0(n)){case 1:r=xc;break;case 4:r=Jh;break;case 16:r=ci;break;case 536870912:r=Zh;break;default:r=ci}r=Ng(r,xg.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function xg(e,t){if(ti=-1,ri=0,G&6)throw Error(P(327));var r=e.callbackNode;if(qn()&&e.callbackNode!==r)return null;var n=di(e,e===_e?Pe:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ei(e,n);else{t=n;var a=G;G|=2;var i=vg();(_e!==e||Pe!==t)&&(Ht=null,cs=ge()+500,hn(e,t));do try{Fp();break}catch(o){yg(e,o)}while(!0);Pc(),Si.current=i,G=a,ve!==null?t=0:(_e=null,Pe=0,t=je)}if(t!==0){if(t===2&&(a=so(e),a!==0&&(n=a,t=Mo(e,a))),t===1)throw r=aa,hn(e,0),gr(e,n),Ze(e,ge()),r;if(t===6)gr(e,n);else{if(a=e.current.alternate,!(n&30)&&!Dp(a)&&(t=Ei(e,n),t===2&&(i=so(e),i!==0&&(n=i,t=Mo(e,i))),t===1))throw r=aa,hn(e,0),gr(e,n),Ze(e,ge()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(P(345));case 2:Yr(e,Ge,Ht);break;case 3:if(gr(e,n),(n&130023424)===n&&(t=Qc+500-ge(),10<t)){if(di(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Be(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=go(Yr.bind(null,e,Ge,Ht),t);break}Yr(e,Ge,Ht);break;case 4:if(gr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var l=31-Ct(n);i=1<<l,l=t[l],l>a&&(a=l),n&=~i}if(n=a,n=ge()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Mp(n/1960))-n,10<n){e.timeoutHandle=go(Yr.bind(null,e,Ge,Ht),n);break}Yr(e,Ge,Ht);break;case 5:Yr(e,Ge,Ht);break;default:throw Error(P(329))}}}return Ze(e,ge()),e.callbackNode===r?xg.bind(null,e):null}function Mo(e,t){var r=zs;return e.current.memoizedState.isDehydrated&&(hn(e,t).flags|=256),e=Ei(e,t),e!==2&&(t=Ge,Ge=r,t!==null&&Do(t)),e}function Do(e){Ge===null?Ge=e:Ge.push.apply(Ge,e)}function Dp(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Et(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function gr(e,t){for(t&=~qc,t&=~Xi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ct(t),n=1<<r;e[r]=-1,t&=~n}}function Nu(e){if(G&6)throw Error(P(327));qn();var t=di(e,0);if(!(t&1))return Ze(e,ge()),null;var r=Ei(e,t);if(e.tag!==0&&r===2){var n=so(e);n!==0&&(t=n,r=Mo(e,n))}if(r===1)throw r=aa,hn(e,0),gr(e,t),Ze(e,ge()),r;if(r===6)throw Error(P(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Yr(e,Ge,Ht),Ze(e,ge()),null}function Wc(e,t){var r=G;G|=1;try{return e(t)}finally{G=r,G===0&&(cs=ge()+500,Wi&&qr())}}function bn(e){Sr!==null&&Sr.tag===0&&!(G&6)&&qn();var t=G;G|=1;var r=ft.transition,n=Z;try{if(ft.transition=null,Z=1,e)return e()}finally{Z=n,ft.transition=r,G=t,!(G&6)&&qr()}}function Kc(){rt=On.current,re(On)}function hn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,dp(r)),ve!==null)for(r=ve.return;r!==null;){var n=r;switch(_c(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&mi();break;case 3:ls(),re(Ye),re(Ae),Fc();break;case 5:Lc(n);break;case 4:ls();break;case 13:re(ie);break;case 19:re(ie);break;case 10:Ic(n.type._context);break;case 22:case 23:Kc()}r=r.return}if(_e=e,ve=e=Lr(e.current,null),Pe=rt=t,je=0,aa=null,qc=Xi=vn=0,Ge=zs=null,Zr!==null){for(t=0;t<Zr.length;t++)if(r=Zr[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var l=i.next;i.next=a,n.next=l}r.pending=n}Zr=null}return e}function yg(e,t){do{var r=ve;try{if(Pc(),Ja.current=Ni,ji){for(var n=oe.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}ji=!1}if(yn=0,Se=we=oe=null,$s=!1,ra=0,Hc.current=null,r===null||r.return===null){je=1,aa=t,ve=null;break}e:{var i=e,l=r.return,o=r,c=t;if(t=Pe,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=o,u=h.tag;if(!(h.mode&1)&&(u===0||u===11||u===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var x=uu(l);if(x!==null){x.flags&=-257,hu(x,l,o,i,t),x.mode&1&&du(i,d,t),t=x,c=d;var k=t.updateQueue;if(k===null){var w=new Set;w.add(c),t.updateQueue=w}else k.add(c);break e}else{if(!(t&1)){du(i,d,t),Vc();break e}c=Error(P(426))}}else if(ae&&o.mode&1){var j=uu(l);if(j!==null){!(j.flags&65536)&&(j.flags|=256),hu(j,l,o,i,t),Ec(os(c,o));break e}}i=c=os(c,o),je!==4&&(je=2),zs===null?zs=[i]:zs.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=tg(i,c,t);su(i,g);break e;case 1:o=c;var f=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Mr===null||!Mr.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var b=rg(i,o,t);su(i,b);break e}}i=i.return}while(i!==null)}kg(r)}catch(N){t=N,ve===r&&r!==null&&(ve=r=r.return);continue}break}while(!0)}function vg(){var e=Si.current;return Si.current=Ni,e===null?Ni:e}function Vc(){(je===0||je===3||je===2)&&(je=4),_e===null||!(vn&268435455)&&!(Xi&268435455)||gr(_e,Pe)}function Ei(e,t){var r=G;G|=2;var n=vg();(_e!==e||Pe!==t)&&(Ht=null,hn(e,t));do try{Lp();break}catch(a){yg(e,a)}while(!0);if(Pc(),G=r,Si.current=n,ve!==null)throw Error(P(261));return _e=null,Pe=0,je}function Lp(){for(;ve!==null;)bg(ve)}function Fp(){for(;ve!==null&&!lm();)bg(ve)}function bg(e){var t=jg(e.alternate,e,rt);e.memoizedProps=e.pendingProps,t===null?kg(e):ve=t,Hc.current=null}function kg(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Tp(r,t),r!==null){r.flags&=32767,ve=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{je=6,ve=null;return}}else if(r=Ep(r,t,rt),r!==null){ve=r;return}if(t=t.sibling,t!==null){ve=t;return}ve=t=e}while(t!==null);je===0&&(je=5)}function Yr(e,t,r){var n=Z,a=ft.transition;try{ft.transition=null,Z=1,Ap(e,t,r,n)}finally{ft.transition=a,Z=n}return null}function Ap(e,t,r,n){do qn();while(Sr!==null);if(G&6)throw Error(P(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(P(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(xm(e,i),e===_e&&(ve=_e=null,Pe=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||za||(za=!0,Ng(ci,function(){return qn(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ft.transition,ft.transition=null;var l=Z;Z=1;var o=G;G|=4,Hc.current=null,Ip(e,r),mg(r,e),np(uo),ui=!!co,uo=co=null,e.current=r,Rp(r),om(),G=o,Z=l,ft.transition=i}else e.current=r;if(za&&(za=!1,Sr=e,_i=a),i=e.pendingLanes,i===0&&(Mr=null),um(r.stateNode),Ze(e,ge()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Ci)throw Ci=!1,e=Io,Io=null,e;return _i&1&&e.tag!==0&&qn(),i=e.pendingLanes,i&1?e===Ro?Bs++:(Bs=0,Ro=e):Bs=0,qr(),null}function qn(){if(Sr!==null){var e=t0(_i),t=ft.transition,r=Z;try{if(ft.transition=null,Z=16>e?16:e,Sr===null)var n=!1;else{if(e=Sr,Sr=null,_i=0,G&6)throw Error(P(331));var a=G;for(G|=4,F=e.current;F!==null;){var i=F,l=i.child;if(F.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(F=d;F!==null;){var h=F;switch(h.tag){case 0:case 11:case 15:Us(8,h,i)}var u=h.child;if(u!==null)u.return=h,F=u;else for(;F!==null;){h=F;var m=h.sibling,x=h.return;if(hg(h),h===d){F=null;break}if(m!==null){m.return=x,F=m;break}F=x}}}var k=i.alternate;if(k!==null){var w=k.child;if(w!==null){k.child=null;do{var j=w.sibling;w.sibling=null,w=j}while(w!==null)}}F=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,F=l;else e:for(;F!==null;){if(i=F,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Us(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,F=g;break e}F=i.return}}var f=e.current;for(F=f;F!==null;){l=F;var p=l.child;if(l.subtreeFlags&2064&&p!==null)p.return=l,F=p;else e:for(l=f;F!==null;){if(o=F,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Gi(9,o)}}catch(N){ue(o,o.return,N)}if(o===l){F=null;break e}var b=o.sibling;if(b!==null){b.return=o.return,F=b;break e}F=o.return}}if(G=a,qr(),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(zi,e)}catch{}n=!0}return n}finally{Z=r,ft.transition=t}}return!1}function Su(e,t,r){t=os(r,t),t=tg(e,t,1),e=Rr(e,t,1),t=Be(),e!==null&&(ya(e,1,t),Ze(e,t))}function ue(e,t,r){if(e.tag===3)Su(e,e,r);else for(;t!==null;){if(t.tag===3){Su(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Mr===null||!Mr.has(n))){e=os(r,e),e=rg(t,e,1),t=Rr(t,e,1),e=Be(),t!==null&&(ya(t,1,e),Ze(t,e));break}}t=t.return}}function Op(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Be(),e.pingedLanes|=e.suspendedLanes&r,_e===e&&(Pe&r)===r&&(je===4||je===3&&(Pe&130023424)===Pe&&500>ge()-Qc?hn(e,0):qc|=r),Ze(e,t)}function wg(e,t){t===0&&(e.mode&1?(t=Ia,Ia<<=1,!(Ia&130023424)&&(Ia=4194304)):t=1);var r=Be();e=rr(e,t),e!==null&&(ya(e,t,r),Ze(e,r))}function $p(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),wg(e,r)}function Up(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(P(314))}n!==null&&n.delete(t),wg(e,r)}var jg;jg=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ye.current)Xe=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Xe=!1,_p(e,t,r);Xe=!!(e.flags&131072)}else Xe=!1,ae&&t.flags&1048576&&_0(t,yi,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ei(e,t),e=t.pendingProps;var a=ss(t,Ae.current);Hn(t,r),a=Oc(null,t,n,e,a,r);var i=$c();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Je(n)?(i=!0,pi(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Mc(t),a.updater=Vi,t.stateNode=a,a._reactInternals=t,bo(t,n,e,r),t=jo(null,t,n,!0,i,r)):(t.tag=0,ae&&i&&Cc(t),Ue(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ei(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=Bp(n),e=vt(n,e),a){case 0:t=wo(null,t,n,e,r);break e;case 1:t=mu(null,t,n,e,r);break e;case 11:t=gu(null,t,n,e,r);break e;case 14:t=fu(null,t,n,vt(n.type,e),r);break e}throw Error(P(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:vt(n,a),wo(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:vt(n,a),mu(e,t,n,a,r);case 3:e:{if(ig(t),e===null)throw Error(P(387));n=t.pendingProps,i=t.memoizedState,a=i.element,M0(e,t),ki(t,n,null,r);var l=t.memoizedState;if(n=l.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=os(Error(P(423)),t),t=pu(e,t,n,r,a);break e}else if(n!==a){a=os(Error(P(424)),t),t=pu(e,t,n,r,a);break e}else for(nt=Ir(t.stateNode.containerInfo.firstChild),at=t,ae=!0,Nt=null,r=I0(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(as(),n===a){t=nr(e,t,r);break e}Ue(e,t,n,r)}t=t.child}return t;case 5:return D0(t),e===null&&xo(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,ho(n,a)?l=null:i!==null&&ho(n,i)&&(t.flags|=32),ag(e,t),Ue(e,t,l,r),t.child;case 6:return e===null&&xo(t),null;case 13:return lg(e,t,r);case 4:return Dc(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=is(t,null,n,r):Ue(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:vt(n,a),gu(e,t,n,a,r);case 7:return Ue(e,t,t.pendingProps,r),t.child;case 8:return Ue(e,t,t.pendingProps.children,r),t.child;case 12:return Ue(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,ee(vi,n._currentValue),n._currentValue=l,i!==null)if(Et(i.value,l)){if(i.children===a.children&&!Ye.current){t=nr(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Yt(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),yo(i.return,r,t),o.lanes|=r;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(P(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),yo(l,r,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Ue(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Hn(t,r),a=mt(a),n=n(a),t.flags|=1,Ue(e,t,n,r),t.child;case 14:return n=t.type,a=vt(n,t.pendingProps),a=vt(n.type,a),fu(e,t,n,a,r);case 15:return ng(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:vt(n,a),ei(e,t),t.tag=1,Je(n)?(e=!0,pi(t)):e=!1,Hn(t,r),eg(t,n,a),bo(t,n,a,r),jo(null,t,n,!0,e,r);case 19:return og(e,t,r);case 22:return sg(e,t,r)}throw Error(P(156,t.tag))};function Ng(e,t){return Yh(e,t)}function zp(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gt(e,t,r,n){return new zp(e,t,r,n)}function Gc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Bp(e){if(typeof e=="function")return Gc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fc)return 11;if(e===mc)return 14}return 2}function Lr(e,t){var r=e.alternate;return r===null?(r=gt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ni(e,t,r,n,a,i){var l=2;if(n=e,typeof e=="function")Gc(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case En:return gn(r.children,a,i,t);case gc:l=8,a|=8;break;case Hl:return e=gt(12,r,t,a|2),e.elementType=Hl,e.lanes=i,e;case ql:return e=gt(13,r,t,a),e.elementType=ql,e.lanes=i,e;case Ql:return e=gt(19,r,t,a),e.elementType=Ql,e.lanes=i,e;case Dh:return Yi(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Rh:l=10;break e;case Mh:l=9;break e;case fc:l=11;break e;case mc:l=14;break e;case dr:l=16,n=null;break e}throw Error(P(130,e==null?e:typeof e,""))}return t=gt(l,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function gn(e,t,r,n){return e=gt(7,e,n,t),e.lanes=r,e}function Yi(e,t,r,n){return e=gt(22,e,n,t),e.elementType=Dh,e.lanes=r,e.stateNode={isHidden:!1},e}function Fl(e,t,r){return e=gt(6,e,null,t),e.lanes=r,e}function Al(e,t,r){return t=gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hp(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xl(0),this.expirationTimes=xl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xl(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Xc(e,t,r,n,a,i,l,o,c){return e=new Hp(e,t,r,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=gt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mc(i),e}function qp(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_n,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Sg(e){if(!e)return Ur;e=e._reactInternals;e:{if(Sn(e)!==e||e.tag!==1)throw Error(P(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Je(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(P(171))}if(e.tag===1){var r=e.type;if(Je(r))return S0(e,r,t)}return t}function Cg(e,t,r,n,a,i,l,o,c){return e=Xc(r,n,!0,e,a,i,l,o,c),e.context=Sg(null),r=e.current,n=Be(),a=Dr(r),i=Yt(n,a),i.callback=t??null,Rr(r,i,a),e.current.lanes=a,ya(e,a,n),Ze(e,n),e}function Ji(e,t,r,n){var a=t.current,i=Be(),l=Dr(a);return r=Sg(r),t.context===null?t.context=r:t.pendingContext=r,t=Yt(i,l),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Rr(a,t,l),e!==null&&(_t(e,a,l,i),Ya(e,a,l)),l}function Ti(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Cu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Yc(e,t){Cu(e,t),(e=e.alternate)&&Cu(e,t)}function Qp(){return null}var _g=typeof reportError=="function"?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}Zi.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(P(409));Ji(e,t,null,null)};Zi.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;bn(function(){Ji(null,e,null,null)}),t[tr]=null}};function Zi(e){this._internalRoot=e}Zi.prototype.unstable_scheduleHydration=function(e){if(e){var t=s0();e={blockedOn:null,target:e,priority:t};for(var r=0;r<hr.length&&t!==0&&t<hr[r].priority;r++);hr.splice(r,0,e),r===0&&i0(e)}};function Zc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function el(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function _u(){}function Wp(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=Ti(l);i.call(d)}}var l=Cg(t,n,e,0,null,!1,!1,"",_u);return e._reactRootContainer=l,e[tr]=l.current,Ys(e.nodeType===8?e.parentNode:e),bn(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var d=Ti(c);o.call(d)}}var c=Xc(e,0,!1,null,null,!1,!1,"",_u);return e._reactRootContainer=c,e[tr]=c.current,Ys(e.nodeType===8?e.parentNode:e),bn(function(){Ji(t,c,r,n)}),c}function tl(e,t,r,n,a){var i=r._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var c=Ti(l);o.call(c)}}Ji(t,l,e,a)}else l=Wp(r,t,e,a,n);return Ti(l)}r0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Is(t.pendingLanes);r!==0&&(yc(t,r|1),Ze(t,ge()),!(G&6)&&(cs=ge()+500,qr()))}break;case 13:bn(function(){var n=rr(e,1);if(n!==null){var a=Be();_t(n,e,1,a)}}),Yc(e,1)}};vc=function(e){if(e.tag===13){var t=rr(e,134217728);if(t!==null){var r=Be();_t(t,e,134217728,r)}Yc(e,134217728)}};n0=function(e){if(e.tag===13){var t=Dr(e),r=rr(e,t);if(r!==null){var n=Be();_t(r,e,t,n)}Yc(e,t)}};s0=function(){return Z};a0=function(e,t){var r=Z;try{return Z=e,t()}finally{Z=r}};to=function(e,t,r){switch(t){case"input":if(Vl(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Qi(n);if(!a)throw Error(P(90));Fh(n),Vl(n,a)}}}break;case"textarea":Oh(e,r);break;case"select":t=r.value,t!=null&&$n(e,!!r.multiple,t,!1)}};Qh=Wc;Wh=bn;var Kp={usingClientEntryPoint:!1,Events:[ba,Rn,Qi,Hh,qh,Wc]},_s={findFiberByHostInstance:Jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vp={bundleType:_s.bundleType,version:_s.version,rendererPackageName:_s.rendererPackageName,rendererConfig:_s.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ir.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Gh(e),e===null?null:e.stateNode},findFiberByHostInstance:_s.findFiberByHostInstance||Qp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ba=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ba.isDisabled&&Ba.supportsFiber)try{zi=Ba.inject(Vp),At=Ba}catch{}}lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kp;lt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zc(t))throw Error(P(200));return qp(e,t,null,r)};lt.createRoot=function(e,t){if(!Zc(e))throw Error(P(299));var r=!1,n="",a=_g;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Xc(e,1,!1,null,null,r,!1,n,a),e[tr]=t.current,Ys(e.nodeType===8?e.parentNode:e),new Jc(t)};lt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(P(188)):(e=Object.keys(e).join(","),Error(P(268,e)));return e=Gh(t),e=e===null?null:e.stateNode,e};lt.flushSync=function(e){return bn(e)};lt.hydrate=function(e,t,r){if(!el(t))throw Error(P(200));return tl(null,e,t,!0,r)};lt.hydrateRoot=function(e,t,r){if(!Zc(e))throw Error(P(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",l=_g;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=Cg(t,null,e,1,r??null,a,!1,i,l),e[tr]=t.current,Ys(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Zi(t)};lt.render=function(e,t,r){if(!el(t))throw Error(P(200));return tl(null,e,t,!1,r)};lt.unmountComponentAtNode=function(e){if(!el(e))throw Error(P(40));return e._reactRootContainer?(bn(function(){tl(null,null,e,!1,function(){e._reactRootContainer=null,e[tr]=null})}),!0):!1};lt.unstable_batchedUpdates=Wc;lt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!el(r))throw Error(P(200));if(e==null||e._reactInternals===void 0)throw Error(P(38));return tl(e,t,r,!1,n)};lt.version="18.3.1-next-f1338f8080-20240426";function Eg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Eg)}catch(e){console.error(e)}}Eg(),Eh.exports=lt;var Gp=Eh.exports,Eu=Gp;zl.createRoot=Eu.createRoot,zl.hydrateRoot=Eu.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ia(){return ia=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ia.apply(this,arguments)}var Cr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Cr||(Cr={}));const Tu="popstate";function Xp(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:l,hash:o}=n.location;return Lo("",{pathname:i,search:l,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Pi(a)}return Jp(t,r,null,e)}function fe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Tg(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Yp(){return Math.random().toString(36).substr(2,8)}function Pu(e,t){return{usr:e.state,key:e.key,idx:t}}function Lo(e,t,r,n){return r===void 0&&(r=null),ia({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ms(t):t,{state:r,key:t&&t.key||n||Yp()})}function Pi(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ms(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Jp(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,l=a.history,o=Cr.Pop,c=null,d=h();d==null&&(d=0,l.replaceState(ia({},l.state,{idx:d}),""));function h(){return(l.state||{idx:null}).idx}function u(){o=Cr.Pop;let j=h(),g=j==null?null:j-d;d=j,c&&c({action:o,location:w.location,delta:g})}function m(j,g){o=Cr.Push;let f=Lo(w.location,j,g);d=h()+1;let p=Pu(f,d),b=w.createHref(f);try{l.pushState(p,"",b)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;a.location.assign(b)}i&&c&&c({action:o,location:w.location,delta:1})}function x(j,g){o=Cr.Replace;let f=Lo(w.location,j,g);d=h();let p=Pu(f,d),b=w.createHref(f);l.replaceState(p,"",b),i&&c&&c({action:o,location:w.location,delta:0})}function k(j){let g=a.location.origin!=="null"?a.location.origin:a.location.href,f=typeof j=="string"?j:Pi(j);return f=f.replace(/ $/,"%20"),fe(g,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,g)}let w={get action(){return o},get location(){return e(a,l)},listen(j){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Tu,u),c=j,()=>{a.removeEventListener(Tu,u),c=null}},createHref(j){return t(a,j)},createURL:k,encodeLocation(j){let g=k(j);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:m,replace:x,go(j){return l.go(j)}};return w}var Iu;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Iu||(Iu={}));function Zp(e,t,r){return r===void 0&&(r="/"),ex(e,t,r)}function ex(e,t,r,n){let a=typeof t=="string"?ms(t):t,i=ed(a.pathname||"/",r);if(i==null)return null;let l=Pg(e);tx(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=gx(i);o=dx(l[c],d)}return o}function Pg(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,l,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};c.relativePath.startsWith("/")&&(fe(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=Fr([n,c.relativePath]),h=r.concat(c);i.children&&i.children.length>0&&(fe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Pg(i.children,t,h,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:ox(d,i.index),routesMeta:h})};return e.forEach((i,l)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))a(i,l);else for(let c of Ig(i.path))a(i,l,c)}),t}function Ig(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let l=Ig(n.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),a&&o.push(...l),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function tx(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:cx(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const rx=/^:[\w-]+$/,nx=3,sx=2,ax=1,ix=10,lx=-2,Ru=e=>e==="*";function ox(e,t){let r=e.split("/"),n=r.length;return r.some(Ru)&&(n+=lx),t&&(n+=sx),r.filter(a=>!Ru(a)).reduce((a,i)=>a+(rx.test(i)?nx:i===""?ax:ix),n)}function cx(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function dx(e,t,r){let{routesMeta:n}=e,a={},i="/",l=[];for(let o=0;o<n.length;++o){let c=n[o],d=o===n.length-1,h=i==="/"?t:t.slice(i.length)||"/",u=ux({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),m=c.route;if(!u)return null;Object.assign(a,u.params),l.push({params:a,pathname:Fr([i,u.pathname]),pathnameBase:xx(Fr([i,u.pathnameBase])),route:m}),u.pathnameBase!=="/"&&(i=Fr([i,u.pathnameBase]))}return l}function ux(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=hx(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((d,h,u)=>{let{paramName:m,isOptional:x}=h;if(m==="*"){let w=o[u]||"";l=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const k=o[u];return x&&!k?d[m]=void 0:d[m]=(k||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:e}}function hx(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Tg(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function gx(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Tg(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ed(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function fx(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?ms(e):e;return{pathname:r?r.startsWith("/")?r:mx(r,t):t,search:yx(n),hash:vx(a)}}function mx(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Ol(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function px(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function td(e,t){let r=px(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function rd(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=ms(e):(a=ia({},e),fe(!a.pathname||!a.pathname.includes("?"),Ol("?","pathname","search",a)),fe(!a.pathname||!a.pathname.includes("#"),Ol("#","pathname","hash",a)),fe(!a.search||!a.search.includes("#"),Ol("#","search","hash",a)));let i=e===""||a.pathname==="",l=i?"/":a.pathname,o;if(l==null)o=r;else{let u=t.length-1;if(!n&&l.startsWith("..")){let m=l.split("/");for(;m[0]==="..";)m.shift(),u-=1;a.pathname=m.join("/")}o=u>=0?t[u]:"/"}let c=fx(a,o),d=l&&l!=="/"&&l.endsWith("/"),h=(i||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const Fr=e=>e.join("/").replace(/\/\/+/g,"/"),xx=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),yx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,vx=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function bx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Rg=["post","put","patch","delete"];new Set(Rg);const kx=["get",...Rg];new Set(kx);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function la(){return la=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},la.apply(this,arguments)}const nd=y.createContext(null),wx=y.createContext(null),Qr=y.createContext(null),rl=y.createContext(null),lr=y.createContext({outlet:null,matches:[],isDataRoute:!1}),Mg=y.createContext(null);function jx(e,t){let{relative:r}=t===void 0?{}:t;ps()||fe(!1);let{basename:n,navigator:a}=y.useContext(Qr),{hash:i,pathname:l,search:o}=Lg(e,{relative:r}),c=l;return n!=="/"&&(c=l==="/"?n:Fr([n,l])),a.createHref({pathname:c,search:o,hash:i})}function ps(){return y.useContext(rl)!=null}function xs(){return ps()||fe(!1),y.useContext(rl).location}function Dg(e){y.useContext(Qr).static||y.useLayoutEffect(e)}function Qe(){let{isDataRoute:e}=y.useContext(lr);return e?Ax():Nx()}function Nx(){ps()||fe(!1);let e=y.useContext(nd),{basename:t,future:r,navigator:n}=y.useContext(Qr),{matches:a}=y.useContext(lr),{pathname:i}=xs(),l=JSON.stringify(td(a,r.v7_relativeSplatPath)),o=y.useRef(!1);return Dg(()=>{o.current=!0}),y.useCallback(function(d,h){if(h===void 0&&(h={}),!o.current)return;if(typeof d=="number"){n.go(d);return}let u=rd(d,JSON.parse(l),i,h.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Fr([t,u.pathname])),(h.replace?n.replace:n.push)(u,h.state,h)},[t,n,l,i,e])}function Sx(){let{matches:e}=y.useContext(lr),t=e[e.length-1];return t?t.params:{}}function Lg(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=y.useContext(Qr),{matches:a}=y.useContext(lr),{pathname:i}=xs(),l=JSON.stringify(td(a,n.v7_relativeSplatPath));return y.useMemo(()=>rd(e,JSON.parse(l),i,r==="path"),[e,l,i,r])}function Cx(e,t){return _x(e,t)}function _x(e,t,r,n){ps()||fe(!1);let{navigator:a}=y.useContext(Qr),{matches:i}=y.useContext(lr),l=i[i.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let d=xs(),h;if(t){var u;let j=typeof t=="string"?ms(t):t;c==="/"||(u=j.pathname)!=null&&u.startsWith(c)||fe(!1),h=j}else h=d;let m=h.pathname||"/",x=m;if(c!=="/"){let j=c.replace(/^\//,"").split("/");x="/"+m.replace(/^\//,"").split("/").slice(j.length).join("/")}let k=Zp(e,{pathname:x}),w=Rx(k&&k.map(j=>Object.assign({},j,{params:Object.assign({},o,j.params),pathname:Fr([c,a.encodeLocation?a.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?c:Fr([c,a.encodeLocation?a.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),i,r,n);return t&&w?y.createElement(rl.Provider,{value:{location:la({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Cr.Pop}},w):w}function Ex(){let e=Fx(),t=bx(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),r?y.createElement("pre",{style:a},r):null,null)}const Tx=y.createElement(Ex,null);class Px extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?y.createElement(lr.Provider,{value:this.props.routeContext},y.createElement(Mg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ix(e){let{routeContext:t,match:r,children:n}=e,a=y.useContext(nd);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),y.createElement(lr.Provider,{value:t},n)}function Rx(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,o=(a=r)==null?void 0:a.errors;if(o!=null){let h=l.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);h>=0||fe(!1),l=l.slice(0,Math.min(l.length,h+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<l.length;h++){let u=l[h];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(d=h),u.route.id){let{loaderData:m,errors:x}=r,k=u.route.loader&&m[u.route.id]===void 0&&(!x||x[u.route.id]===void 0);if(u.route.lazy||k){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((h,u,m)=>{let x,k=!1,w=null,j=null;r&&(x=o&&u.route.id?o[u.route.id]:void 0,w=u.route.errorElement||Tx,c&&(d<0&&m===0?(Ox("route-fallback"),k=!0,j=null):d===m&&(k=!0,j=u.route.hydrateFallbackElement||null)));let g=t.concat(l.slice(0,m+1)),f=()=>{let p;return x?p=w:k?p=j:u.route.Component?p=y.createElement(u.route.Component,null):u.route.element?p=u.route.element:p=h,y.createElement(Ix,{match:u,routeContext:{outlet:h,matches:g,isDataRoute:r!=null},children:p})};return r&&(u.route.ErrorBoundary||u.route.errorElement||m===0)?y.createElement(Px,{location:r.location,revalidation:r.revalidation,component:w,error:x,children:f(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):f()},null)}var Fg=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Fg||{}),Ag=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ag||{});function Mx(e){let t=y.useContext(nd);return t||fe(!1),t}function Dx(e){let t=y.useContext(wx);return t||fe(!1),t}function Lx(e){let t=y.useContext(lr);return t||fe(!1),t}function Og(e){let t=Lx(),r=t.matches[t.matches.length-1];return r.route.id||fe(!1),r.route.id}function Fx(){var e;let t=y.useContext(Mg),r=Dx(),n=Og();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Ax(){let{router:e}=Mx(Fg.UseNavigateStable),t=Og(Ag.UseNavigateStable),r=y.useRef(!1);return Dg(()=>{r.current=!0}),y.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,la({fromRouteId:t},i)))},[e,t])}const Mu={};function Ox(e,t,r){Mu[e]||(Mu[e]=!0)}function $x(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ux(e){let{to:t,replace:r,state:n,relative:a}=e;ps()||fe(!1);let{future:i,static:l}=y.useContext(Qr),{matches:o}=y.useContext(lr),{pathname:c}=xs(),d=Qe(),h=rd(t,td(o,i.v7_relativeSplatPath),c,a==="path"),u=JSON.stringify(h);return y.useEffect(()=>d(JSON.parse(u),{replace:r,state:n,relative:a}),[d,u,a,r,n]),null}function We(e){fe(!1)}function zx(e){let{basename:t="/",children:r=null,location:n,navigationType:a=Cr.Pop,navigator:i,static:l=!1,future:o}=e;ps()&&fe(!1);let c=t.replace(/^\/*/,"/"),d=y.useMemo(()=>({basename:c,navigator:i,static:l,future:la({v7_relativeSplatPath:!1},o)}),[c,o,i,l]);typeof n=="string"&&(n=ms(n));let{pathname:h="/",search:u="",hash:m="",state:x=null,key:k="default"}=n,w=y.useMemo(()=>{let j=ed(h,c);return j==null?null:{location:{pathname:j,search:u,hash:m,state:x,key:k},navigationType:a}},[c,h,u,m,x,k,a]);return w==null?null:y.createElement(Qr.Provider,{value:d},y.createElement(rl.Provider,{children:r,value:w}))}function Du(e){let{children:t,location:r}=e;return Cx(Fo(t),r)}new Promise(()=>{});function Fo(e,t){t===void 0&&(t=[]);let r=[];return y.Children.forEach(e,(n,a)=>{if(!y.isValidElement(n))return;let i=[...t,a];if(n.type===y.Fragment){r.push.apply(r,Fo(n.props.children,i));return}n.type!==We&&fe(!1),!n.props.index||!n.props.children||fe(!1);let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Fo(n.props.children,i)),r.push(l)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ao(){return Ao=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ao.apply(this,arguments)}function Bx(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Hx(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function qx(e,t){return e.button===0&&(!t||t==="_self")&&!Hx(e)}const Qx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Wx="6";try{window.__reactRouterVersion=Wx}catch{}const Kx="startTransition",Lu=Of[Kx];function Vx(e){let{basename:t,children:r,future:n,window:a}=e,i=y.useRef();i.current==null&&(i.current=Xp({window:a,v5Compat:!0}));let l=i.current,[o,c]=y.useState({action:l.action,location:l.location}),{v7_startTransition:d}=n||{},h=y.useCallback(u=>{d&&Lu?Lu(()=>c(u)):c(u)},[c,d]);return y.useLayoutEffect(()=>l.listen(h),[l,h]),y.useEffect(()=>$x(n),[n]),y.createElement(zx,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:l,future:n})}const Gx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Xx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ii=y.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:h,viewTransition:u}=t,m=Bx(t,Qx),{basename:x}=y.useContext(Qr),k,w=!1;if(typeof d=="string"&&Xx.test(d)&&(k=d,Gx))try{let p=new URL(window.location.href),b=d.startsWith("//")?new URL(p.protocol+d):new URL(d),N=ed(b.pathname,x);b.origin===p.origin&&N!=null?d=N+b.search+b.hash:w=!0}catch{}let j=jx(d,{relative:a}),g=Yx(d,{replace:l,state:o,target:c,preventScrollReset:h,relative:a,viewTransition:u});function f(p){n&&n(p),p.defaultPrevented||g(p)}return y.createElement("a",Ao({},m,{href:k||j,onClick:w||i?n:f,ref:r,target:c}))});var Fu;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Fu||(Fu={}));var Au;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Au||(Au={}));function Yx(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:l,viewTransition:o}=t===void 0?{}:t,c=Qe(),d=xs(),h=Lg(e,{relative:l});return y.useCallback(u=>{if(qx(u,r)){u.preventDefault();let m=n!==void 0?n:Pi(d)===Pi(h);c(e,{replace:m,state:a,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,h,n,a,r,e,i,l,o])}var ys=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Jx={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},mr,ac,ah,Zx=(ah=class{constructor(){O(this,mr,Jx);O(this,ac,!1)}setTimeoutProvider(e){M(this,mr,e)}setTimeout(e,t){return v(this,mr).setTimeout(e,t)}clearTimeout(e){v(this,mr).clearTimeout(e)}setInterval(e,t){return v(this,mr).setInterval(e,t)}clearInterval(e){v(this,mr).clearInterval(e)}},mr=new WeakMap,ac=new WeakMap,ah),tn=new Zx;function ey(e){setTimeout(e,0)}var kn=typeof window>"u"||"Deno"in globalThis;function ze(){}function ty(e,t){return typeof e=="function"?e(t):e}function Oo(e){return typeof e=="number"&&e>=0&&e!==1/0}function $g(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ar(e,t){return typeof e=="function"?e(t):e}function dt(e,t){return typeof e=="function"?e(t):e}function Ou(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:l,stale:o}=e;if(l){if(n){if(t.queryHash!==sd(l,t.options))return!1}else if(!oa(t.queryKey,l))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||a&&a!==t.state.fetchStatus||i&&!i(t))}function $u(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(wn(t.options.mutationKey)!==wn(i))return!1}else if(!oa(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function sd(e,t){return((t==null?void 0:t.queryKeyHashFn)||wn)(e)}function wn(e){return JSON.stringify(e,(t,r)=>$o(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function oa(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>oa(e[r],t[r])):!1}var ry=Object.prototype.hasOwnProperty;function ad(e,t){if(e===t)return e;const r=Uu(e)&&Uu(t);if(!r&&!($o(e)&&$o(t)))return t;const a=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),l=i.length,o=r?new Array(l):{};let c=0;for(let d=0;d<l;d++){const h=r?d:i[d],u=e[h],m=t[h];if(u===m){o[h]=u,(r?d<a:ry.call(e,h))&&c++;continue}if(u===null||m===null||typeof u!="object"||typeof m!="object"){o[h]=m;continue}const x=ad(u,m);o[h]=x,x===u&&c++}return a===l&&c===a?e:o}function Ri(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Uu(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function $o(e){if(!zu(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!zu(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function zu(e){return Object.prototype.toString.call(e)==="[object Object]"}function ny(e){return new Promise(t=>{tn.setTimeout(t,e)})}function Uo(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?ad(e,t):t}function sy(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function ay(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var id=Symbol();function Ug(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===id?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function zg(e,t){return typeof e=="function"?e(...t):!!e}var rn,pr,Qn,ih,iy=(ih=class extends ys{constructor(){super();O(this,rn);O(this,pr);O(this,Qn);M(this,Qn,t=>{if(!kn&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){v(this,pr)||this.setEventListener(v(this,Qn))}onUnsubscribe(){var t;this.hasListeners()||((t=v(this,pr))==null||t.call(this),M(this,pr,void 0))}setEventListener(t){var r;M(this,Qn,t),(r=v(this,pr))==null||r.call(this),M(this,pr,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){v(this,rn)!==t&&(M(this,rn,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof v(this,rn)=="boolean"?v(this,rn):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},rn=new WeakMap,pr=new WeakMap,Qn=new WeakMap,ih),ld=new iy;function zo(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}var ly=ey;function oy(){let e=[],t=0,r=o=>{o()},n=o=>{o()},a=ly;const i=o=>{t?e.push(o):a(()=>{r(o)})},l=()=>{const o=e;e=[],o.length&&a(()=>{n(()=>{o.forEach(c=>{r(c)})})})};return{batch:o=>{let c;t++;try{c=o()}finally{t--,t||l()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{a=o}}}var xe=oy(),Wn,xr,Kn,lh,cy=(lh=class extends ys{constructor(){super();O(this,Wn,!0);O(this,xr);O(this,Kn);M(this,Kn,t=>{if(!kn&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){v(this,xr)||this.setEventListener(v(this,Kn))}onUnsubscribe(){var t;this.hasListeners()||((t=v(this,xr))==null||t.call(this),M(this,xr,void 0))}setEventListener(t){var r;M(this,Kn,t),(r=v(this,xr))==null||r.call(this),M(this,xr,t(this.setOnline.bind(this)))}setOnline(t){v(this,Wn)!==t&&(M(this,Wn,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return v(this,Wn)}},Wn=new WeakMap,xr=new WeakMap,Kn=new WeakMap,lh),Mi=new cy;function dy(e){return Math.min(1e3*2**e,3e4)}function Bg(e){return(e??"online")==="online"?Mi.isOnline():!0}var Bo=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Hg(e){let t=!1,r=0,n;const a=zo(),i=()=>a.status!=="pending",l=w=>{var j;if(!i()){const g=new Bo(w);m(g),(j=e.onCancel)==null||j.call(e,g)}},o=()=>{t=!0},c=()=>{t=!1},d=()=>ld.isFocused()&&(e.networkMode==="always"||Mi.isOnline())&&e.canRun(),h=()=>Bg(e.networkMode)&&e.canRun(),u=w=>{i()||(n==null||n(),a.resolve(w))},m=w=>{i()||(n==null||n(),a.reject(w))},x=()=>new Promise(w=>{var j;n=g=>{(i()||d())&&w(g)},(j=e.onPause)==null||j.call(e)}).then(()=>{var w;n=void 0,i()||(w=e.onContinue)==null||w.call(e)}),k=()=>{if(i())return;let w;const j=r===0?e.initialPromise:void 0;try{w=j??e.fn()}catch(g){w=Promise.reject(g)}Promise.resolve(w).then(u).catch(g=>{var T;if(i())return;const f=e.retry??(kn?0:3),p=e.retryDelay??dy,b=typeof p=="function"?p(r,g):p,N=f===!0||typeof f=="number"&&r<f||typeof f=="function"&&f(r,g);if(t||!N){m(g);return}r++,(T=e.onFail)==null||T.call(e,r,g),ny(b).then(()=>d()?void 0:x()).then(()=>{t?m(g):k()})})};return{promise:a,status:()=>a.status,cancel:l,continue:()=>(n==null||n(),a),cancelRetry:o,continueRetry:c,canStart:h,start:()=>(h()?k():x().then(k),a)}}var nn,oh,qg=(oh=class{constructor(){O(this,nn)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Oo(this.gcTime)&&M(this,nn,tn.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(kn?1/0:5*60*1e3))}clearGcTimeout(){v(this,nn)&&(tn.clearTimeout(v(this,nn)),M(this,nn,void 0))}},nn=new WeakMap,oh),sn,Vn,ct,an,Ne,ha,ln,bt,Bt,ch,uy=(ch=class extends qg{constructor(t){super();O(this,bt);O(this,sn);O(this,Vn);O(this,ct);O(this,an);O(this,Ne);O(this,ha);O(this,ln);M(this,ln,!1),M(this,ha,t.defaultOptions),this.setOptions(t.options),this.observers=[],M(this,an,t.client),M(this,ct,v(this,an).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,M(this,sn,Bu(this.options)),this.state=t.state??v(this,sn),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=v(this,Ne))==null?void 0:t.promise}setOptions(t){if(this.options={...v(this,ha),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=Bu(this.options);r.data!==void 0&&(this.setData(r.data,{updatedAt:r.dataUpdatedAt,manual:!0}),M(this,sn,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&v(this,ct).remove(this)}setData(t,r){const n=Uo(this.state.data,t,this.options);return Q(this,bt,Bt).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Q(this,bt,Bt).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=v(this,Ne))==null?void 0:n.promise;return(a=v(this,Ne))==null||a.cancel(t),r?r.then(ze).catch(ze):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(v(this,sn))}isActive(){return this.observers.some(t=>dt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===id||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ar(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!$g(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=v(this,Ne))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=v(this,Ne))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),v(this,ct).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(v(this,Ne)&&(v(this,ln)?v(this,Ne).cancel({revert:!0}):v(this,Ne).cancelRetry()),this.scheduleGc()),v(this,ct).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Q(this,bt,Bt).call(this,{type:"invalidate"})}async fetch(t,r){var c,d,h,u,m,x,k,w,j,g,f,p;if(this.state.fetchStatus!=="idle"&&((c=v(this,Ne))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(v(this,Ne))return v(this,Ne).continueRetry(),v(this,Ne).promise}if(t&&this.setOptions(t),!this.options.queryFn){const b=this.observers.find(N=>N.options.queryFn);b&&this.setOptions(b.options)}const n=new AbortController,a=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(M(this,ln,!0),n.signal)})},i=()=>{const b=Ug(this.options,r),T=(()=>{const S={client:v(this,an),queryKey:this.queryKey,meta:this.meta};return a(S),S})();return M(this,ln,!1),this.options.persister?this.options.persister(b,T,this):b(T)},o=(()=>{const b={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:v(this,an),state:this.state,fetchFn:i};return a(b),b})();(d=this.options.behavior)==null||d.onFetch(o,this),M(this,Vn,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=o.fetchOptions)==null?void 0:h.meta))&&Q(this,bt,Bt).call(this,{type:"fetch",meta:(u=o.fetchOptions)==null?void 0:u.meta}),M(this,Ne,Hg({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,onCancel:b=>{b instanceof Bo&&b.revert&&this.setState({...v(this,Vn),fetchStatus:"idle"}),n.abort()},onFail:(b,N)=>{Q(this,bt,Bt).call(this,{type:"failed",failureCount:b,error:N})},onPause:()=>{Q(this,bt,Bt).call(this,{type:"pause"})},onContinue:()=>{Q(this,bt,Bt).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const b=await v(this,Ne).start();if(b===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(b),(x=(m=v(this,ct).config).onSuccess)==null||x.call(m,b,this),(w=(k=v(this,ct).config).onSettled)==null||w.call(k,b,this.state.error,this),b}catch(b){if(b instanceof Bo){if(b.silent)return v(this,Ne).promise;if(b.revert){if(this.state.data===void 0)throw b;return this.state.data}}throw Q(this,bt,Bt).call(this,{type:"error",error:b}),(g=(j=v(this,ct).config).onError)==null||g.call(j,b,this),(p=(f=v(this,ct).config).onSettled)==null||p.call(f,this.state.data,b,this),b}finally{this.scheduleGc()}}},sn=new WeakMap,Vn=new WeakMap,ct=new WeakMap,an=new WeakMap,Ne=new WeakMap,ha=new WeakMap,ln=new WeakMap,bt=new WeakSet,Bt=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Qg(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return M(this,Vn,t.manual?a:void 0),a;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),xe.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),v(this,ct).notify({query:this,type:"updated",action:t})})},ch);function Qg(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Bg(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Bu(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Ke,K,ga,Oe,on,Gn,Qt,yr,fa,Xn,Yn,cn,dn,vr,Jn,J,Ms,Ho,qo,Qo,Wo,Ko,Vo,Go,Wg,dh,hy=(dh=class extends ys{constructor(t,r){super();O(this,J);O(this,Ke);O(this,K);O(this,ga);O(this,Oe);O(this,on);O(this,Gn);O(this,Qt);O(this,yr);O(this,fa);O(this,Xn);O(this,Yn);O(this,cn);O(this,dn);O(this,vr);O(this,Jn,new Set);this.options=r,M(this,Ke,t),M(this,yr,null),M(this,Qt,zo()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(v(this,K).addObserver(this),Hu(v(this,K),this.options)?Q(this,J,Ms).call(this):this.updateResult(),Q(this,J,Wo).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Xo(v(this,K),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Xo(v(this,K),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Q(this,J,Ko).call(this),Q(this,J,Vo).call(this),v(this,K).removeObserver(this)}setOptions(t){const r=this.options,n=v(this,K);if(this.options=v(this,Ke).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof dt(this.options.enabled,v(this,K))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Q(this,J,Go).call(this),v(this,K).setOptions(this.options),r._defaulted&&!Ri(this.options,r)&&v(this,Ke).getQueryCache().notify({type:"observerOptionsUpdated",query:v(this,K),observer:this});const a=this.hasListeners();a&&qu(v(this,K),n,this.options,r)&&Q(this,J,Ms).call(this),this.updateResult(),a&&(v(this,K)!==n||dt(this.options.enabled,v(this,K))!==dt(r.enabled,v(this,K))||Ar(this.options.staleTime,v(this,K))!==Ar(r.staleTime,v(this,K)))&&Q(this,J,Ho).call(this);const i=Q(this,J,qo).call(this);a&&(v(this,K)!==n||dt(this.options.enabled,v(this,K))!==dt(r.enabled,v(this,K))||i!==v(this,vr))&&Q(this,J,Qo).call(this,i)}getOptimisticResult(t){const r=v(this,Ke).getQueryCache().build(v(this,Ke),t),n=this.createResult(r,t);return fy(this,n)&&(M(this,Oe,n),M(this,Gn,this.options),M(this,on,v(this,K).state)),n}getCurrentResult(){return v(this,Oe)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&!this.options.experimental_prefetchInRender&&v(this,Qt).status==="pending"&&v(this,Qt).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(n,a))})}trackProp(t){v(this,Jn).add(t)}getCurrentQuery(){return v(this,K)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=v(this,Ke).defaultQueryOptions(t),n=v(this,Ke).getQueryCache().build(v(this,Ke),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return Q(this,J,Ms).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),v(this,Oe)))}createResult(t,r){var D;const n=v(this,K),a=this.options,i=v(this,Oe),l=v(this,on),o=v(this,Gn),d=t!==n?t.state:v(this,ga),{state:h}=t;let u={...h},m=!1,x;if(r._optimisticResults){const I=this.hasListeners(),A=!I&&Hu(t,r),V=I&&qu(t,n,r,a);(A||V)&&(u={...u,...Qg(h.data,t.options)}),r._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:k,errorUpdatedAt:w,status:j}=u;x=u.data;let g=!1;if(r.placeholderData!==void 0&&x===void 0&&j==="pending"){let I;i!=null&&i.isPlaceholderData&&r.placeholderData===(o==null?void 0:o.placeholderData)?(I=i.data,g=!0):I=typeof r.placeholderData=="function"?r.placeholderData((D=v(this,Yn))==null?void 0:D.state.data,v(this,Yn)):r.placeholderData,I!==void 0&&(j="success",x=Uo(i==null?void 0:i.data,I,r),m=!0)}if(r.select&&x!==void 0&&!g)if(i&&x===(l==null?void 0:l.data)&&r.select===v(this,fa))x=v(this,Xn);else try{M(this,fa,r.select),x=r.select(x),x=Uo(i==null?void 0:i.data,x,r),M(this,Xn,x),M(this,yr,null)}catch(I){M(this,yr,I)}v(this,yr)&&(k=v(this,yr),x=v(this,Xn),w=Date.now(),j="error");const f=u.fetchStatus==="fetching",p=j==="pending",b=j==="error",N=p&&f,T=x!==void 0,E={status:j,fetchStatus:u.fetchStatus,isPending:p,isSuccess:j==="success",isError:b,isInitialLoading:N,isLoading:N,data:x,dataUpdatedAt:u.dataUpdatedAt,error:k,errorUpdatedAt:w,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>d.dataUpdateCount||u.errorUpdateCount>d.errorUpdateCount,isFetching:f,isRefetching:f&&!p,isLoadingError:b&&!T,isPaused:u.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:b&&T,isStale:od(t,r),refetch:this.refetch,promise:v(this,Qt),isEnabled:dt(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const I=X=>{E.status==="error"?X.reject(E.error):E.data!==void 0&&X.resolve(E.data)},A=()=>{const X=M(this,Qt,E.promise=zo());I(X)},V=v(this,Qt);switch(V.status){case"pending":t.queryHash===n.queryHash&&I(V);break;case"fulfilled":(E.status==="error"||E.data!==V.value)&&A();break;case"rejected":(E.status!=="error"||E.error!==V.reason)&&A();break}}return E}updateResult(){const t=v(this,Oe),r=this.createResult(v(this,K),this.options);if(M(this,on,v(this,K).state),M(this,Gn,this.options),v(this,on).data!==void 0&&M(this,Yn,v(this,K)),Ri(r,t))return;M(this,Oe,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!v(this,Jn).size)return!0;const l=new Set(i??v(this,Jn));return this.options.throwOnError&&l.add("error"),Object.keys(v(this,Oe)).some(o=>{const c=o;return v(this,Oe)[c]!==t[c]&&l.has(c)})};Q(this,J,Wg).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Q(this,J,Wo).call(this)}},Ke=new WeakMap,K=new WeakMap,ga=new WeakMap,Oe=new WeakMap,on=new WeakMap,Gn=new WeakMap,Qt=new WeakMap,yr=new WeakMap,fa=new WeakMap,Xn=new WeakMap,Yn=new WeakMap,cn=new WeakMap,dn=new WeakMap,vr=new WeakMap,Jn=new WeakMap,J=new WeakSet,Ms=function(t){Q(this,J,Go).call(this);let r=v(this,K).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(ze)),r},Ho=function(){Q(this,J,Ko).call(this);const t=Ar(this.options.staleTime,v(this,K));if(kn||v(this,Oe).isStale||!Oo(t))return;const n=$g(v(this,Oe).dataUpdatedAt,t)+1;M(this,cn,tn.setTimeout(()=>{v(this,Oe).isStale||this.updateResult()},n))},qo=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(v(this,K)):this.options.refetchInterval)??!1},Qo=function(t){Q(this,J,Vo).call(this),M(this,vr,t),!(kn||dt(this.options.enabled,v(this,K))===!1||!Oo(v(this,vr))||v(this,vr)===0)&&M(this,dn,tn.setInterval(()=>{(this.options.refetchIntervalInBackground||ld.isFocused())&&Q(this,J,Ms).call(this)},v(this,vr)))},Wo=function(){Q(this,J,Ho).call(this),Q(this,J,Qo).call(this,Q(this,J,qo).call(this))},Ko=function(){v(this,cn)&&(tn.clearTimeout(v(this,cn)),M(this,cn,void 0))},Vo=function(){v(this,dn)&&(tn.clearInterval(v(this,dn)),M(this,dn,void 0))},Go=function(){const t=v(this,Ke).getQueryCache().build(v(this,Ke),this.options);if(t===v(this,K))return;const r=v(this,K);M(this,K,t),M(this,ga,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Wg=function(t){xe.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(v(this,Oe))}),v(this,Ke).getQueryCache().notify({query:v(this,K),type:"observerResultsUpdated"})})},dh);function gy(e,t){return dt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Hu(e,t){return gy(e,t)||e.state.data!==void 0&&Xo(e,t,t.refetchOnMount)}function Xo(e,t,r){if(dt(t.enabled,e)!==!1&&Ar(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&od(e,t)}return!1}function qu(e,t,r,n){return(e!==t||dt(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&od(e,r)}function od(e,t){return dt(t.enabled,e)!==!1&&e.isStaleByTime(Ar(t.staleTime,e))}function fy(e,t){return!Ri(e.getCurrentResult(),t)}function Qu(e){return{onFetch:(t,r)=>{var h,u,m,x,k;const n=t.options,a=(m=(u=(h=t.fetchOptions)==null?void 0:h.meta)==null?void 0:u.fetchMore)==null?void 0:m.direction,i=((x=t.state.data)==null?void 0:x.pages)||[],l=((k=t.state.data)==null?void 0:k.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const d=async()=>{let w=!1;const j=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(t.signal.aborted?w=!0:t.signal.addEventListener("abort",()=>{w=!0}),t.signal)})},g=Ug(t.options,t.fetchOptions),f=async(p,b,N)=>{if(w)return Promise.reject();if(b==null&&p.pages.length)return Promise.resolve(p);const S=(()=>{const A={client:t.client,queryKey:t.queryKey,pageParam:b,direction:N?"backward":"forward",meta:t.options.meta};return j(A),A})(),E=await g(S),{maxPages:D}=t.options,I=N?ay:sy;return{pages:I(p.pages,E,D),pageParams:I(p.pageParams,b,D)}};if(a&&i.length){const p=a==="backward",b=p?my:Wu,N={pages:i,pageParams:l},T=b(n,N);o=await f(N,T,p)}else{const p=e??i.length;do{const b=c===0?l[0]??n.initialPageParam:Wu(n,o);if(c>0&&b==null)break;o=await f(o,b),c++}while(c<p)}return o};t.options.persister?t.fetchFn=()=>{var w,j;return(j=(w=t.options).persister)==null?void 0:j.call(w,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function Wu(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function my(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var ma,Rt,$e,un,Mt,cr,uh,py=(uh=class extends qg{constructor(t){super();O(this,Mt);O(this,ma);O(this,Rt);O(this,$e);O(this,un);M(this,ma,t.client),this.mutationId=t.mutationId,M(this,$e,t.mutationCache),M(this,Rt,[]),this.state=t.state||Kg(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){v(this,Rt).includes(t)||(v(this,Rt).push(t),this.clearGcTimeout(),v(this,$e).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){M(this,Rt,v(this,Rt).filter(r=>r!==t)),this.scheduleGc(),v(this,$e).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){v(this,Rt).length||(this.state.status==="pending"?this.scheduleGc():v(this,$e).remove(this))}continue(){var t;return((t=v(this,un))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var l,o,c,d,h,u,m,x,k,w,j,g,f,p,b,N,T,S,E,D;const r=()=>{Q(this,Mt,cr).call(this,{type:"continue"})},n={client:v(this,ma),meta:this.options.meta,mutationKey:this.options.mutationKey};M(this,un,Hg({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(I,A)=>{Q(this,Mt,cr).call(this,{type:"failed",failureCount:I,error:A})},onPause:()=>{Q(this,Mt,cr).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>v(this,$e).canRun(this)}));const a=this.state.status==="pending",i=!v(this,un).canStart();try{if(a)r();else{Q(this,Mt,cr).call(this,{type:"pending",variables:t,isPaused:i}),await((o=(l=v(this,$e).config).onMutate)==null?void 0:o.call(l,t,this,n));const A=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t,n));A!==this.state.context&&Q(this,Mt,cr).call(this,{type:"pending",context:A,variables:t,isPaused:i})}const I=await v(this,un).start();return await((u=(h=v(this,$e).config).onSuccess)==null?void 0:u.call(h,I,t,this.state.context,this,n)),await((x=(m=this.options).onSuccess)==null?void 0:x.call(m,I,t,this.state.context,n)),await((w=(k=v(this,$e).config).onSettled)==null?void 0:w.call(k,I,null,this.state.variables,this.state.context,this,n)),await((g=(j=this.options).onSettled)==null?void 0:g.call(j,I,null,t,this.state.context,n)),Q(this,Mt,cr).call(this,{type:"success",data:I}),I}catch(I){try{throw await((p=(f=v(this,$e).config).onError)==null?void 0:p.call(f,I,t,this.state.context,this,n)),await((N=(b=this.options).onError)==null?void 0:N.call(b,I,t,this.state.context,n)),await((S=(T=v(this,$e).config).onSettled)==null?void 0:S.call(T,void 0,I,this.state.variables,this.state.context,this,n)),await((D=(E=this.options).onSettled)==null?void 0:D.call(E,void 0,I,t,this.state.context,n)),I}finally{Q(this,Mt,cr).call(this,{type:"error",error:I})}}finally{v(this,$e).runNext(this)}}},ma=new WeakMap,Rt=new WeakMap,$e=new WeakMap,un=new WeakMap,Mt=new WeakSet,cr=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),xe.batch(()=>{v(this,Rt).forEach(n=>{n.onMutationUpdate(t)}),v(this,$e).notify({mutation:this,type:"updated",action:t})})},uh);function Kg(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Wt,kt,pa,hh,xy=(hh=class extends ys{constructor(t={}){super();O(this,Wt);O(this,kt);O(this,pa);this.config=t,M(this,Wt,new Set),M(this,kt,new Map),M(this,pa,0)}build(t,r,n){const a=new py({client:t,mutationCache:this,mutationId:++Sa(this,pa)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){v(this,Wt).add(t);const r=Ha(t);if(typeof r=="string"){const n=v(this,kt).get(r);n?n.push(t):v(this,kt).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(v(this,Wt).delete(t)){const r=Ha(t);if(typeof r=="string"){const n=v(this,kt).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&v(this,kt).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Ha(t);if(typeof r=="string"){const n=v(this,kt).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=Ha(t);if(typeof r=="string"){const a=(n=v(this,kt).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){xe.batch(()=>{v(this,Wt).forEach(t=>{this.notify({type:"removed",mutation:t})}),v(this,Wt).clear(),v(this,kt).clear()})}getAll(){return Array.from(v(this,Wt))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>$u(r,n))}findAll(t={}){return this.getAll().filter(r=>$u(t,r))}notify(t){xe.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return xe.batch(()=>Promise.all(t.map(r=>r.continue().catch(ze))))}},Wt=new WeakMap,kt=new WeakMap,pa=new WeakMap,hh);function Ha(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Kt,br,Ve,Vt,Zt,si,Yo,gh,yy=(gh=class extends ys{constructor(r,n){super();O(this,Zt);O(this,Kt);O(this,br);O(this,Ve);O(this,Vt);M(this,Kt,r),this.setOptions(n),this.bindMethods(),Q(this,Zt,si).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=v(this,Kt).defaultMutationOptions(r),Ri(this.options,n)||v(this,Kt).getMutationCache().notify({type:"observerOptionsUpdated",mutation:v(this,Ve),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&wn(n.mutationKey)!==wn(this.options.mutationKey)?this.reset():((a=v(this,Ve))==null?void 0:a.state.status)==="pending"&&v(this,Ve).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=v(this,Ve))==null||r.removeObserver(this)}onMutationUpdate(r){Q(this,Zt,si).call(this),Q(this,Zt,Yo).call(this,r)}getCurrentResult(){return v(this,br)}reset(){var r;(r=v(this,Ve))==null||r.removeObserver(this),M(this,Ve,void 0),Q(this,Zt,si).call(this),Q(this,Zt,Yo).call(this)}mutate(r,n){var a;return M(this,Vt,n),(a=v(this,Ve))==null||a.removeObserver(this),M(this,Ve,v(this,Kt).getMutationCache().build(v(this,Kt),this.options)),v(this,Ve).addObserver(this),v(this,Ve).execute(r)}},Kt=new WeakMap,br=new WeakMap,Ve=new WeakMap,Vt=new WeakMap,Zt=new WeakSet,si=function(){var n;const r=((n=v(this,Ve))==null?void 0:n.state)??Kg();M(this,br,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Yo=function(r){xe.batch(()=>{var n,a,i,l,o,c,d,h;if(v(this,Vt)&&this.hasListeners()){const u=v(this,br).variables,m=v(this,br).context,x={client:v(this,Kt),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((a=(n=v(this,Vt)).onSuccess)==null||a.call(n,r.data,u,m,x),(l=(i=v(this,Vt)).onSettled)==null||l.call(i,r.data,null,u,m,x)):(r==null?void 0:r.type)==="error"&&((c=(o=v(this,Vt)).onError)==null||c.call(o,r.error,u,m,x),(h=(d=v(this,Vt)).onSettled)==null||h.call(d,void 0,r.error,u,m,x))}this.listeners.forEach(u=>{u(v(this,br))})})},gh),Dt,fh,vy=(fh=class extends ys{constructor(t={}){super();O(this,Dt);this.config=t,M(this,Dt,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??sd(a,r);let l=this.get(i);return l||(l=new uy({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(l)),l}add(t){v(this,Dt).has(t.queryHash)||(v(this,Dt).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=v(this,Dt).get(t.queryHash);r&&(t.destroy(),r===t&&v(this,Dt).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){xe.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return v(this,Dt).get(t)}getAll(){return[...v(this,Dt).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Ou(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>Ou(t,n)):r}notify(t){xe.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){xe.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){xe.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Dt=new WeakMap,fh),de,kr,wr,Zn,es,jr,ts,rs,mh,by=(mh=class{constructor(e={}){O(this,de);O(this,kr);O(this,wr);O(this,Zn);O(this,es);O(this,jr);O(this,ts);O(this,rs);M(this,de,e.queryCache||new vy),M(this,kr,e.mutationCache||new xy),M(this,wr,e.defaultOptions||{}),M(this,Zn,new Map),M(this,es,new Map),M(this,jr,0)}mount(){Sa(this,jr)._++,v(this,jr)===1&&(M(this,ts,ld.subscribe(async e=>{e&&(await this.resumePausedMutations(),v(this,de).onFocus())})),M(this,rs,Mi.subscribe(async e=>{e&&(await this.resumePausedMutations(),v(this,de).onOnline())})))}unmount(){var e,t;Sa(this,jr)._--,v(this,jr)===0&&((e=v(this,ts))==null||e.call(this),M(this,ts,void 0),(t=v(this,rs))==null||t.call(this),M(this,rs,void 0))}isFetching(e){return v(this,de).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return v(this,kr).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=v(this,de).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=v(this,de).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Ar(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return v(this,de).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=v(this,de).get(n.queryHash),i=a==null?void 0:a.state.data,l=ty(t,i);if(l!==void 0)return v(this,de).build(this,n).setData(l,{...r,manual:!0})}setQueriesData(e,t,r){return xe.batch(()=>v(this,de).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=v(this,de).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=v(this,de);xe.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=v(this,de);return xe.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=xe.batch(()=>v(this,de).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(ze).catch(ze)}invalidateQueries(e,t={}){return xe.batch(()=>(v(this,de).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=xe.batch(()=>v(this,de).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(ze)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(ze)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=v(this,de).build(this,t);return r.isStaleByTime(Ar(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ze).catch(ze)}fetchInfiniteQuery(e){return e.behavior=Qu(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ze).catch(ze)}ensureInfiniteQueryData(e){return e.behavior=Qu(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Mi.isOnline()?v(this,kr).resumePausedMutations():Promise.resolve()}getQueryCache(){return v(this,de)}getMutationCache(){return v(this,kr)}getDefaultOptions(){return v(this,wr)}setDefaultOptions(e){M(this,wr,e)}setQueryDefaults(e,t){v(this,Zn).set(wn(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...v(this,Zn).values()],r={};return t.forEach(n=>{oa(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){v(this,es).set(wn(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...v(this,es).values()],r={};return t.forEach(n=>{oa(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...v(this,wr).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=sd(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===id&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...v(this,wr).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){v(this,de).clear(),v(this,kr).clear()}},de=new WeakMap,kr=new WeakMap,wr=new WeakMap,Zn=new WeakMap,es=new WeakMap,jr=new WeakMap,ts=new WeakMap,rs=new WeakMap,mh),Vg=y.createContext(void 0),xt=e=>{const t=y.useContext(Vg);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},ky=({client:e,children:t})=>(y.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(Vg.Provider,{value:e,children:t})),Gg=y.createContext(!1),wy=()=>y.useContext(Gg);Gg.Provider;function jy(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Ny=y.createContext(jy()),Sy=()=>y.useContext(Ny),Cy=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},_y=e=>{y.useEffect(()=>{e.clearReset()},[e])},Ey=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||zg(r,[e.error,n])),Ty=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Py=(e,t)=>e.isLoading&&e.isFetching&&!t,Iy=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Ku=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function Ry(e,t,r){var u,m,x,k,w;const n=wy(),a=Sy(),i=xt(),l=i.defaultQueryOptions(e);(m=(u=i.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||m.call(u,l),l._optimisticResults=n?"isRestoring":"optimistic",Ty(l),Cy(l,a),_y(a);const o=!i.getQueryCache().get(l.queryHash),[c]=y.useState(()=>new t(i,l)),d=c.getOptimisticResult(l),h=!n&&e.subscribed!==!1;if(y.useSyncExternalStore(y.useCallback(j=>{const g=h?c.subscribe(xe.batchCalls(j)):ze;return c.updateResult(),g},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),y.useEffect(()=>{c.setOptions(l)},[l,c]),Iy(l,d))throw Ku(l,c,a);if(Ey({result:d,errorResetBoundary:a,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw d.error;if((k=(x=i.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||k.call(x,l,d),l.experimental_prefetchInRender&&!kn&&Py(d,n)){const j=o?Ku(l,c,a):(w=i.getQueryCache().get(l.queryHash))==null?void 0:w.promise;j==null||j.catch(ze).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?d:c.trackResult(d)}function be(e,t){return Ry(e,hy)}function Vu(e,t){return e.findAll(t.filters).map(r=>t.select?t.select(r):r.state)}function Gu(e={},t){const r=xt().getMutationCache(),n=y.useRef(e),a=y.useRef(null);return a.current||(a.current=Vu(r,e)),y.useEffect(()=>{n.current=e}),y.useSyncExternalStore(y.useCallback(i=>r.subscribe(()=>{const l=ad(a.current,Vu(r,n.current));a.current!==l&&(a.current=l,xe.schedule(i))}),[r]),()=>a.current,()=>a.current)}function $t(e,t){const r=xt(),[n]=y.useState(()=>new yy(r,e));y.useEffect(()=>{n.setOptions(e)},[n,e]);const a=y.useSyncExternalStore(y.useCallback(l=>n.subscribe(xe.batchCalls(l)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=y.useCallback((l,o)=>{n.mutate(l,o).catch(ze)},[n]);if(a.error&&zg(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}let My={data:""},Dy=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||My},Ly=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Fy=/\/\*[^]*?\*\/|  +/g,Xu=/\n+/g,fr=(e,t)=>{let r="",n="",a="";for(let i in e){let l=e[i];i[0]=="@"?i[1]=="i"?r=i+" "+l+";":n+=i[1]=="f"?fr(l,i):i+"{"+fr(l,i[1]=="k"?"":t)+"}":typeof l=="object"?n+=fr(l,t?t.replace(/([^,])+/g,o=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,o):o?o+" "+c:c)):i):l!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=fr.p?fr.p(i,l):i+":"+l+";")}return r+(t&&a?t+"{"+a+"}":a)+n},zt={},Xg=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+Xg(e[r]);return t}return e},Ay=(e,t,r,n,a)=>{let i=Xg(e),l=zt[i]||(zt[i]=(c=>{let d=0,h=11;for(;d<c.length;)h=101*h+c.charCodeAt(d++)>>>0;return"go"+h})(i));if(!zt[l]){let c=i!==e?e:(d=>{let h,u,m=[{}];for(;h=Ly.exec(d.replace(Fy,""));)h[4]?m.shift():h[3]?(u=h[3].replace(Xu," ").trim(),m.unshift(m[0][u]=m[0][u]||{})):m[0][h[1]]=h[2].replace(Xu," ").trim();return m[0]})(e);zt[l]=fr(a?{["@keyframes "+l]:c}:c,r?"":"."+l)}let o=r&&zt.g?zt.g:null;return r&&(zt.g=zt[l]),((c,d,h,u)=>{u?d.data=d.data.replace(u,c):d.data.indexOf(c)===-1&&(d.data=h?c+d.data:d.data+c)})(zt[l],t,n,o),l},Oy=(e,t,r)=>e.reduce((n,a,i)=>{let l=t[i];if(l&&l.call){let o=l(r),c=o&&o.props&&o.props.className||/^go/.test(o)&&o;l=c?"."+c:o&&typeof o=="object"?o.props?"":fr(o,""):o===!1?"":o}return n+a+(l??"")},"");function nl(e){let t=this||{},r=e.call?e(t.p):e;return Ay(r.unshift?r.raw?Oy(r,[].slice.call(arguments,1),t.p):r.reduce((n,a)=>Object.assign(n,a&&a.call?a(t.p):a),{}):r,Dy(t.target),t.g,t.o,t.k)}let Yg,Jo,Zo;nl.bind({g:1});let sr=nl.bind({k:1});function $y(e,t,r,n){fr.p=t,Yg=e,Jo=r,Zo=n}function Wr(e,t){let r=this||{};return function(){let n=arguments;function a(i,l){let o=Object.assign({},i),c=o.className||a.className;r.p=Object.assign({theme:Jo&&Jo()},o),r.o=/ *go\d+/.test(c),o.className=nl.apply(r,n)+(c?" "+c:"");let d=e;return e[0]&&(d=o.as||e,delete o.as),Zo&&d[0]&&Zo(o),Yg(d,o)}return a}}var Uy=e=>typeof e=="function",Di=(e,t)=>Uy(e)?e(t):e,zy=(()=>{let e=0;return()=>(++e).toString()})(),Jg=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),By=20,cd="default",Zg=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(l=>l.id===t.toast.id?{...l,...t.toast}:l)};case 2:let{toast:n}=t;return Zg(e,{type:e.toasts.find(l=>l.id===n.id)?1:0,toast:n});case 3:let{toastId:a}=t;return{...e,toasts:e.toasts.map(l=>l.id===a||a===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(l=>l.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+i}))}}},ai=[],ef={toasts:[],pausedAt:void 0,settings:{toastLimit:By}},Ft={},tf=(e,t=cd)=>{Ft[t]=Zg(Ft[t]||ef,e),ai.forEach(([r,n])=>{r===t&&n(Ft[t])})},rf=e=>Object.keys(Ft).forEach(t=>tf(e,t)),Hy=e=>Object.keys(Ft).find(t=>Ft[t].toasts.some(r=>r.id===e)),sl=(e=cd)=>t=>{tf(t,e)},qy={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Qy=(e={},t=cd)=>{let[r,n]=y.useState(Ft[t]||ef),a=y.useRef(Ft[t]);y.useEffect(()=>(a.current!==Ft[t]&&n(Ft[t]),ai.push([t,n]),()=>{let l=ai.findIndex(([o])=>o===t);l>-1&&ai.splice(l,1)}),[t]);let i=r.toasts.map(l=>{var o,c,d;return{...e,...e[l.type],...l,removeDelay:l.removeDelay||((o=e[l.type])==null?void 0:o.removeDelay)||(e==null?void 0:e.removeDelay),duration:l.duration||((c=e[l.type])==null?void 0:c.duration)||(e==null?void 0:e.duration)||qy[l.type],style:{...e.style,...(d=e[l.type])==null?void 0:d.style,...l.style}}});return{...r,toasts:i}},Wy=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||zy()}),wa=e=>(t,r)=>{let n=Wy(t,e,r);return sl(n.toasterId||Hy(n.id))({type:2,toast:n}),n.id},Ce=(e,t)=>wa("blank")(e,t);Ce.error=wa("error");Ce.success=wa("success");Ce.loading=wa("loading");Ce.custom=wa("custom");Ce.dismiss=(e,t)=>{let r={type:3,toastId:e};t?sl(t)(r):rf(r)};Ce.dismissAll=e=>Ce.dismiss(void 0,e);Ce.remove=(e,t)=>{let r={type:4,toastId:e};t?sl(t)(r):rf(r)};Ce.removeAll=e=>Ce.remove(void 0,e);Ce.promise=(e,t,r)=>{let n=Ce.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(a=>{let i=t.success?Di(t.success,a):void 0;return i?Ce.success(i,{id:n,...r,...r==null?void 0:r.success}):Ce.dismiss(n),a}).catch(a=>{let i=t.error?Di(t.error,a):void 0;i?Ce.error(i,{id:n,...r,...r==null?void 0:r.error}):Ce.dismiss(n)}),e};var Ky=1e3,Vy=(e,t="default")=>{let{toasts:r,pausedAt:n}=Qy(e,t),a=y.useRef(new Map).current,i=y.useCallback((u,m=Ky)=>{if(a.has(u))return;let x=setTimeout(()=>{a.delete(u),l({type:4,toastId:u})},m);a.set(u,x)},[]);y.useEffect(()=>{if(n)return;let u=Date.now(),m=r.map(x=>{if(x.duration===1/0)return;let k=(x.duration||0)+x.pauseDuration-(u-x.createdAt);if(k<0){x.visible&&Ce.dismiss(x.id);return}return setTimeout(()=>Ce.dismiss(x.id,t),k)});return()=>{m.forEach(x=>x&&clearTimeout(x))}},[r,n,t]);let l=y.useCallback(sl(t),[t]),o=y.useCallback(()=>{l({type:5,time:Date.now()})},[l]),c=y.useCallback((u,m)=>{l({type:1,toast:{id:u,height:m}})},[l]),d=y.useCallback(()=>{n&&l({type:6,time:Date.now()})},[n,l]),h=y.useCallback((u,m)=>{let{reverseOrder:x=!1,gutter:k=8,defaultPosition:w}=m||{},j=r.filter(p=>(p.position||w)===(u.position||w)&&p.height),g=j.findIndex(p=>p.id===u.id),f=j.filter((p,b)=>b<g&&p.visible).length;return j.filter(p=>p.visible).slice(...x?[f+1]:[0,f]).reduce((p,b)=>p+(b.height||0)+k,0)},[r]);return y.useEffect(()=>{r.forEach(u=>{if(u.dismissed)i(u.id,u.removeDelay);else{let m=a.get(u.id);m&&(clearTimeout(m),a.delete(u.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:c,startPause:o,endPause:d,calculateOffset:h}}},Gy=sr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Xy=sr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Yy=sr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Jy=Wr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Gy} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Xy} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Yy} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Zy=sr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ev=Wr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Zy} 1s linear infinite;
`,tv=sr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,rv=sr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,nv=Wr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${tv} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${rv} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,sv=Wr("div")`
  position: absolute;
`,av=Wr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,iv=sr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,lv=Wr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${iv} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ov=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?y.createElement(lv,null,t):t:r==="blank"?null:y.createElement(av,null,y.createElement(ev,{...n}),r!=="loading"&&y.createElement(sv,null,r==="error"?y.createElement(Jy,{...n}):y.createElement(nv,{...n})))},cv=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,dv=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,uv="0%{opacity:0;} 100%{opacity:1;}",hv="0%{opacity:1;} 100%{opacity:0;}",gv=Wr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,fv=Wr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,mv=(e,t)=>{let r=e.includes("top")?1:-1,[n,a]=Jg()?[uv,hv]:[cv(r),dv(r)];return{animation:t?`${sr(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${sr(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},pv=y.memo(({toast:e,position:t,style:r,children:n})=>{let a=e.height?mv(e.position||t||"top-center",e.visible):{opacity:0},i=y.createElement(ov,{toast:e}),l=y.createElement(fv,{...e.ariaProps},Di(e.message,e));return y.createElement(gv,{className:e.className,style:{...a,...r,...e.style}},typeof n=="function"?n({icon:i,message:l}):y.createElement(y.Fragment,null,i,l))});$y(y.createElement);var xv=({id:e,className:t,style:r,onHeightUpdate:n,children:a})=>{let i=y.useCallback(l=>{if(l){let o=()=>{let c=l.getBoundingClientRect().height;n(e,c)};o(),new MutationObserver(o).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return y.createElement("div",{ref:i,className:t,style:r},a)},yv=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Jg()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...a}},vv=nl`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,qa=16,bv=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:a,toasterId:i,containerStyle:l,containerClassName:o})=>{let{toasts:c,handlers:d}=Vy(r,i);return y.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:qa,left:qa,right:qa,bottom:qa,pointerEvents:"none",...l},className:o,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(h=>{let u=h.position||t,m=d.calculateOffset(h,{reverseOrder:e,gutter:n,defaultPosition:t}),x=yv(u,m);return y.createElement(xv,{id:h.id,key:h.id,onHeightUpdate:d.updateHeight,className:h.visible?vv:"",style:x},h.type==="custom"?Di(h.message,h):a?a(h):y.createElement(pv,{toast:h,position:u}))}))};/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nf=(...e)=>e.filter((t,r,n)=>!!t&&n.indexOf(t)===r).join(" ");/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=y.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:l,...o},c)=>y.createElement("svg",{ref:c,...wv,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:nf("lucide",a),...o},[...l.map(([d,h])=>y.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=(e,t)=>{const r=y.forwardRef(({className:n,...a},i)=>y.createElement(jv,{ref:i,iconNode:t,className:nf(`lucide-${kv(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=z("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=z("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=z("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=z("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=z("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=z("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=z("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=z("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=z("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=z("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=z("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=z("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=z("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=z("FileSearch",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=z("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=z("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=z("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=z("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=z("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=z("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=z("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=z("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=z("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=z("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=z("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=z("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=z("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=z("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=z("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=z("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=z("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=z("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=z("Signal",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=z("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=z("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=z("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=z("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=z("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=z("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Jt={},It=(Jt==null?void 0:Jt.VITE_API_URL)||"/api",Av=(Jt==null?void 0:Jt.VITE_SIGNALR_URL)||"/hubs",Ov=(Jt==null?void 0:Jt.VITE_SIGNALR_HUB)||"scan-progress",$l="auth_token";class Or{static async login(t,r){const n=await fetch(`${It}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:r})});if(!n.ok)throw new Error("Login failed");const a=await n.json().catch(()=>({})),i=n.headers.get("authorization")||n.headers.get("Authorization");let l;const o=[a,a==null?void 0:a.data];for(const c of o)if(!(!c||typeof c!="object")&&(l=c.accessToken||c.token||c.jwt||c.bearerToken||c.id_token||c.idToken,l))break;if(!l&&typeof i=="string"){const c=i.split(" ");l=c.length===2?c[1]:i}return l&&localStorage.setItem($l,l),{accessToken:l||"",...a}}static logout(){localStorage.removeItem($l)}static getToken(){return localStorage.getItem($l)}}const $v=[{name:"Dashboard",href:"/",icon:Pv,description:"Mission Control Center"},{name:"AI Chat",href:"/chat",icon:tc,description:"Ask CastellanAI"},{name:"Security Events",href:"/security-events",icon:Ut,description:"Event Investigation"},{name:"Timeline",href:"/timeline",icon:ud,description:"Attack Visualization"},{name:"Threat Intelligence",href:"/mitre-attack",icon:ll,description:"MITRE ATT&CK"},{name:"Malware Detection",href:"/malware-rules",icon:il,description:"Rule Management"},{name:"Threat Scanner",href:"/threat-scanner",icon:cf,description:"Security Scanning"},{name:"System Status",href:"/system-status",icon:ds,description:"Platform Health"}];function Uv({children:e}){const t=xs(),r=Qe(),[n,a]=y.useState(!1),[i,l]=y.useState(()=>{const h=localStorage.getItem("theme");return h?h==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}),o=y.useRef(null);y.useEffect(()=>{i?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[i]),y.useEffect(()=>{function h(u){o.current&&!o.current.contains(u.target)&&a(!1)}return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const c=()=>{Or.logout(),r("/login",{replace:!0})},d=()=>{l(!i)};return s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsxs("div",{className:"fixed inset-y-0 left-0 z-50 w-72 bg-white dark:bg-gray-800 shadow-xl border-r border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex h-16 items-center justify-between px-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-blue-600",children:s.jsx(Le,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"CastellanAI"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Security Platform"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(sf,{className:"hidden h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 cursor-pointer"}),s.jsxs("div",{className:"relative",ref:o,children:[s.jsx("button",{onClick:()=>a(!n),className:"flex items-center justify-center h-8 w-8 rounded-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:s.jsx(uf,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})}),n&&s.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-50",children:[s.jsx("button",{onClick:()=>{d(),a(!1)},className:"w-full flex items-center space-x-3 px-4 py-2.5 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:i?s.jsxs(s.Fragment,{children:[s.jsx(Fv,{className:"h-4 w-4"}),s.jsx("span",{children:"Light Mode"})]}):s.jsxs(s.Fragment,{children:[s.jsx(Mv,{className:"h-4 w-4"}),s.jsx("span",{children:"Dark Mode"})]})}),s.jsxs(Ii,{to:"/configuration",onClick:()=>a(!1),className:"w-full flex items-center space-x-3 px-4 py-2.5 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[s.jsx(gd,{className:"h-4 w-4"}),s.jsx("span",{children:"Configuration"})]}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-1"}),s.jsxs("button",{onClick:c,className:"w-full flex items-center space-x-3 px-4 py-2.5 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[s.jsx(Iv,{className:"h-4 w-4"}),s.jsx("span",{children:"Logout"})]})]})]})]})]}),s.jsx("nav",{className:"mt-6 px-3",children:s.jsx("ul",{className:"space-y-1",children:$v.map(h=>{const u=t.pathname===h.href,m=h.icon;return s.jsx("li",{children:s.jsxs(Ii,{to:h.href,className:`group flex items-center justify-between rounded-lg px-3 py-2.5 text-sm font-medium transition-all duration-200 ${u?"bg-blue-50 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"text-gray-700 hover:bg-gray-50 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white"}`,children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(m,{className:`h-5 w-5 ${u?"text-blue-600 dark:text-blue-400":"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300"}`}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:h.name}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:h.description})]})]}),u&&s.jsx(af,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})]})},h.name)})})}),s.jsx("div",{className:"absolute bottom-6 left-6 right-6",children:s.jsxs("div",{className:"rounded-lg bg-green-50 dark:bg-green-900/20 p-3 border border-green-200 dark:border-green-800",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500 animate-pulse"}),s.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"System Operational"})]}),s.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:"All services running normally"})]})})]}),s.jsx("div",{className:"pl-72",children:s.jsx("main",{className:"min-h-screen",children:e})})]})}const zv={blue:{bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-800",icon:"text-blue-600 dark:text-blue-400",text:"text-blue-900 dark:text-blue-100",change:"text-blue-600 dark:text-blue-400"},green:{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",icon:"text-green-600 dark:text-green-400",text:"text-green-900 dark:text-green-100",change:"text-green-600 dark:text-green-400"},yellow:{bg:"bg-yellow-50 dark:bg-yellow-900/20",border:"border-yellow-200 dark:border-yellow-800",icon:"text-yellow-600 dark:text-yellow-400",text:"text-yellow-900 dark:text-yellow-100",change:"text-yellow-600 dark:text-yellow-400"},red:{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",icon:"text-red-600 dark:text-red-400",text:"text-red-900 dark:text-red-100",change:"text-red-600 dark:text-red-400"},gray:{bg:"bg-gray-50 dark:bg-gray-800",border:"border-gray-200 dark:border-gray-700",icon:"text-gray-600 dark:text-gray-400",text:"text-gray-900 dark:text-gray-100",change:"text-gray-600 dark:text-gray-400"}};function jt({title:e,value:t,change:r,icon:n,color:a,description:i}){const l=zv[a];return s.jsxs("div",{className:`rounded-xl border p-6 transition-all duration-200 hover:shadow-md ${l.bg} ${l.border}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`rounded-lg p-2 ${l.bg}`,children:s.jsx(n,{className:`h-6 w-6 ${l.icon}`})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:e}),s.jsx("p",{className:`text-2xl font-bold ${l.text}`,children:typeof t=="number"?t.toLocaleString():t})]})]}),r&&s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:`text-sm font-medium ${l.change}`,children:[r.value>0?"+":"",r.value]}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.period})]})]}),i&&s.jsx("p",{className:"mt-3 text-sm text-gray-600 dark:text-gray-400",children:i})]})}function Bv(e){switch((e||"MEDIUM").toUpperCase()){case"CRITICAL":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"HIGH":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";case"MEDIUM":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"LOW":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}}function Hv({events:e,isLoading:t}){return t?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Activity"}),s.jsx("div",{className:"space-y-3",children:[...Array(5)].map((r,n)=>s.jsx("div",{className:"h-20 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 animate-pulse"},n))})]}):s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Activity"}),s.jsx(Ii,{to:"/security-events",className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium",children:"View all →"})]}),s.jsx("div",{className:"space-y-3",children:!e||e.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Le,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No recent security events"})]}):e.map(r=>{const n=(r.riskLevel||"MEDIUM").toUpperCase();return s.jsx(Ii,{to:`/security-events/${r.id}`,className:"block rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-4 cursor-pointer hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-600 transition-all duration-200",children:s.jsx("div",{className:"flex items-start justify-between gap-3",children:s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[s.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${Bv(r.riskLevel)}`,children:n}),s.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 truncate",children:r.eventType||"Security Event"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-gray-500 dark:text-gray-400",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-gray-400"}),s.jsx("span",{children:new Date(r.timestamp||Date.now()).toLocaleString()})]}),r.machine&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Machine:"})," ",s.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:r.machine})]}),r.source&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Source:"})," ",s.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:r.source})]})]})]})})},r.id)})})]})}function qv({data:e,isLoading:t}){if(t)return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"Threat Distribution"}),s.jsx("div",{className:"space-y-3",children:[...Array(4)].map((l,o)=>s.jsx("div",{className:"animate-pulse",children:s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-full mb-2"})},o))})]});const r={CRITICAL:"bg-red-500",HIGH:"bg-orange-500",MEDIUM:"bg-yellow-500",LOW:"bg-green-500"},n=(e||[]).reduce((l,o)=>l+o.count,0)||1,a={CRITICAL:0,HIGH:1,MEDIUM:2,LOW:3,UNKNOWN:4},i=[...e||[]].sort((l,o)=>{const c=(l.severity||"UNKNOWN").toUpperCase(),d=(o.severity||"UNKNOWN").toUpperCase();return(a[c]??999)-(a[d]??999)});return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"Threat Distribution"}),s.jsx("div",{className:"space-y-4",children:!e||e.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Le,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No threat data available"})]}):i.map(l=>{const o=(l.severity||"UNKNOWN").toUpperCase(),c=o.charAt(0)+o.slice(1).toLowerCase(),d=l.count/n*100,h=r[o]||"bg-gray-500";return s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${h}`}),s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:c})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-20 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full ${h}`,style:{width:`${d}%`}})}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400 min-w-[3rem] text-right",children:l.count})]})]},l.severity)})})]})}function Kr({size:e="medium"}){const t={small:"h-6 w-6",medium:"h-12 w-12",large:"h-16 w-16"};return s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:`animate-spin rounded-full border-b-2 border-blue-600 ${t[e]}`})})}class fn extends Error{constructor(t,r){const n=new.target.prototype;super(`${t}: Status code '${r}'`),this.statusCode=r,this.__proto__=n}}class md extends Error{constructor(t="A timeout occurred."){const r=new.target.prototype;super(t),this.__proto__=r}}class St extends Error{constructor(t="An abort occurred."){const r=new.target.prototype;super(t),this.__proto__=r}}class Qv extends Error{constructor(t,r){const n=new.target.prototype;super(t),this.transport=r,this.errorType="UnsupportedTransportError",this.__proto__=n}}class Wv extends Error{constructor(t,r){const n=new.target.prototype;super(t),this.transport=r,this.errorType="DisabledTransportError",this.__proto__=n}}class Kv extends Error{constructor(t,r){const n=new.target.prototype;super(t),this.transport=r,this.errorType="FailedToStartTransportError",this.__proto__=n}}class Ju extends Error{constructor(t){const r=new.target.prototype;super(t),this.errorType="FailedToNegotiateWithServerError",this.__proto__=r}}class Vv extends Error{constructor(t,r){const n=new.target.prototype;super(t),this.innerErrors=r,this.__proto__=n}}class hf{constructor(t,r,n){this.statusCode=t,this.statusText=r,this.content=n}}class dl{get(t,r){return this.send({...r,method:"GET",url:t})}post(t,r){return this.send({...r,method:"POST",url:t})}delete(t,r){return this.send({...r,method:"DELETE",url:t})}getCookieString(t){return""}}var _;(function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Information=2]="Information",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.None=6]="None"})(_||(_={}));class da{constructor(){}log(t,r){}}da.instance=new da;const Gv="9.0.6";class ye{static isRequired(t,r){if(t==null)throw new Error(`The '${r}' argument is required.`)}static isNotEmpty(t,r){if(!t||t.match(/^\s*$/))throw new Error(`The '${r}' argument should not be empty.`)}static isIn(t,r,n){if(!(t in r))throw new Error(`Unknown ${n} value: ${t}.`)}}class le{static get isBrowser(){return!le.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!le.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!le.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function ua(e,t){let r="";return jn(e)?(r=`Binary data of length ${e.byteLength}`,t&&(r+=`. Content: '${Xv(e)}'`)):typeof e=="string"&&(r=`String data of length ${e.length}`,t&&(r+=`. Content: '${e}'`)),r}function Xv(e){const t=new Uint8Array(e);let r="";return t.forEach(n=>{const a=n<16?"0":"";r+=`0x${a}${n.toString(16)} `}),r.substr(0,r.length-1)}function jn(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}async function gf(e,t,r,n,a,i){const l={},[o,c]=us();l[o]=c,e.log(_.Trace,`(${t} transport) sending data. ${ua(a,i.logMessageContent)}.`);const d=jn(a)?"arraybuffer":"text",h=await r.post(n,{content:a,headers:{...l,...i.headers},responseType:d,timeout:i.timeout,withCredentials:i.withCredentials});e.log(_.Trace,`(${t} transport) request complete. Response status: ${h.statusCode}.`)}function Yv(e){return e===void 0?new $i(_.Information):e===null?da.instance:e.log!==void 0?e:new $i(e)}class Jv{constructor(t,r){this._subject=t,this._observer=r}dispose(){const t=this._subject.observers.indexOf(this._observer);t>-1&&this._subject.observers.splice(t,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(r=>{})}}class $i{constructor(t){this._minLevel=t,this.out=console}log(t,r){if(t>=this._minLevel){const n=`[${new Date().toISOString()}] ${_[t]}: ${r}`;switch(t){case _.Critical:case _.Error:this.out.error(n);break;case _.Warning:this.out.warn(n);break;case _.Information:this.out.info(n);break;default:this.out.log(n);break}}}}function us(){let e="X-SignalR-User-Agent";return le.isNode&&(e="User-Agent"),[e,Zv(Gv,eb(),rb(),tb())]}function Zv(e,t,r,n){let a="Microsoft SignalR/";const i=e.split(".");return a+=`${i[0]}.${i[1]}`,a+=` (${e}; `,t&&t!==""?a+=`${t}; `:a+="Unknown OS; ",a+=`${r}`,n?a+=`; ${n}`:a+="; Unknown Runtime Version",a+=")",a}function eb(){if(le.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function tb(){if(le.isNode)return process.versions.node}function rb(){return le.isNode?"NodeJS":"Browser"}function Ul(e){return e.stack?e.stack:e.message?e.message:`${e}`}function nb(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}class sb extends dl{constructor(t){if(super(),this._logger=t,typeof fetch>"u"||le.isNode){const r=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(r("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=r("node-fetch"):this._fetchType=fetch,this._fetchType=r("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(nb());if(typeof AbortController>"u"){const r=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=r("abort-controller")}else this._abortControllerType=AbortController}async send(t){if(t.abortSignal&&t.abortSignal.aborted)throw new St;if(!t.method)throw new Error("No method defined.");if(!t.url)throw new Error("No url defined.");const r=new this._abortControllerType;let n;t.abortSignal&&(t.abortSignal.onabort=()=>{r.abort(),n=new St});let a=null;if(t.timeout){const c=t.timeout;a=setTimeout(()=>{r.abort(),this._logger.log(_.Warning,"Timeout from HTTP request."),n=new md},c)}t.content===""&&(t.content=void 0),t.content&&(t.headers=t.headers||{},jn(t.content)?t.headers["Content-Type"]="application/octet-stream":t.headers["Content-Type"]="text/plain;charset=UTF-8");let i;try{i=await this._fetchType(t.url,{body:t.content,cache:"no-cache",credentials:t.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...t.headers},method:t.method,mode:"cors",redirect:"follow",signal:r.signal})}catch(c){throw n||(this._logger.log(_.Warning,`Error from HTTP request. ${c}.`),c)}finally{a&&clearTimeout(a),t.abortSignal&&(t.abortSignal.onabort=null)}if(!i.ok){const c=await Zu(i,"text");throw new fn(c||i.statusText,i.status)}const o=await Zu(i,t.responseType);return new hf(i.status,i.statusText,o)}getCookieString(t){let r="";return le.isNode&&this._jar&&this._jar.getCookies(t,(n,a)=>r=a.join("; ")),r}}function Zu(e,t){let r;switch(t){case"arraybuffer":r=e.arrayBuffer();break;case"text":r=e.text();break;case"blob":case"document":case"json":throw new Error(`${t} is not supported.`);default:r=e.text();break}return r}class ab extends dl{constructor(t){super(),this._logger=t}send(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new St):t.method?t.url?new Promise((r,n)=>{const a=new XMLHttpRequest;a.open(t.method,t.url,!0),a.withCredentials=t.withCredentials===void 0?!0:t.withCredentials,a.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.content===""&&(t.content=void 0),t.content&&(jn(t.content)?a.setRequestHeader("Content-Type","application/octet-stream"):a.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const i=t.headers;i&&Object.keys(i).forEach(l=>{a.setRequestHeader(l,i[l])}),t.responseType&&(a.responseType=t.responseType),t.abortSignal&&(t.abortSignal.onabort=()=>{a.abort(),n(new St)}),t.timeout&&(a.timeout=t.timeout),a.onload=()=>{t.abortSignal&&(t.abortSignal.onabort=null),a.status>=200&&a.status<300?r(new hf(a.status,a.statusText,a.response||a.responseText)):n(new fn(a.response||a.responseText||a.statusText,a.status))},a.onerror=()=>{this._logger.log(_.Warning,`Error from HTTP request. ${a.status}: ${a.statusText}.`),n(new fn(a.statusText,a.status))},a.ontimeout=()=>{this._logger.log(_.Warning,"Timeout from HTTP request."),n(new md)},a.send(t.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class ib extends dl{constructor(t){if(super(),typeof fetch<"u"||le.isNode)this._httpClient=new sb(t);else if(typeof XMLHttpRequest<"u")this._httpClient=new ab(t);else throw new Error("No usable HttpClient found.")}send(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new St):t.method?t.url?this._httpClient.send(t):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(t){return this._httpClient.getCookieString(t)}}class st{static write(t){return`${t}${st.RecordSeparator}`}static parse(t){if(t[t.length-1]!==st.RecordSeparator)throw new Error("Message is incomplete.");const r=t.split(st.RecordSeparator);return r.pop(),r}}st.RecordSeparatorCode=30;st.RecordSeparator=String.fromCharCode(st.RecordSeparatorCode);class lb{writeHandshakeRequest(t){return st.write(JSON.stringify(t))}parseHandshakeResponse(t){let r,n;if(jn(t)){const o=new Uint8Array(t),c=o.indexOf(st.RecordSeparatorCode);if(c===-1)throw new Error("Message is incomplete.");const d=c+1;r=String.fromCharCode.apply(null,Array.prototype.slice.call(o.slice(0,d))),n=o.byteLength>d?o.slice(d).buffer:null}else{const o=t,c=o.indexOf(st.RecordSeparator);if(c===-1)throw new Error("Message is incomplete.");const d=c+1;r=o.substring(0,d),n=o.length>d?o.substring(d):null}const a=st.parse(r),i=JSON.parse(a[0]);if(i.type)throw new Error("Expected a handshake response from the server.");return[n,i]}}var q;(function(e){e[e.Invocation=1]="Invocation",e[e.StreamItem=2]="StreamItem",e[e.Completion=3]="Completion",e[e.StreamInvocation=4]="StreamInvocation",e[e.CancelInvocation=5]="CancelInvocation",e[e.Ping=6]="Ping",e[e.Close=7]="Close",e[e.Ack=8]="Ack",e[e.Sequence=9]="Sequence"})(q||(q={}));class ob{constructor(){this.observers=[]}next(t){for(const r of this.observers)r.next(t)}error(t){for(const r of this.observers)r.error&&r.error(t)}complete(){for(const t of this.observers)t.complete&&t.complete()}subscribe(t){return this.observers.push(t),new Jv(this,t)}}class cb{constructor(t,r,n){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=t,this._connection=r,this._bufferSize=n}async _send(t){const r=this._protocol.writeMessage(t);let n=Promise.resolve();if(this._isInvocationMessage(t)){this._totalMessageCount++;let a=()=>{},i=()=>{};jn(r)?this._bufferedByteCount+=r.byteLength:this._bufferedByteCount+=r.length,this._bufferedByteCount>=this._bufferSize&&(n=new Promise((l,o)=>{a=l,i=o})),this._messages.push(new db(r,this._totalMessageCount,a,i))}try{this._reconnectInProgress||await this._connection.send(r)}catch{this._disconnected()}await n}_ack(t){let r=-1;for(let n=0;n<this._messages.length;n++){const a=this._messages[n];if(a._id<=t.sequenceId)r=n,jn(a._message)?this._bufferedByteCount-=a._message.byteLength:this._bufferedByteCount-=a._message.length,a._resolver();else if(this._bufferedByteCount<this._bufferSize)a._resolver();else break}r!==-1&&(this._messages=this._messages.slice(r+1))}_shouldProcessMessage(t){if(this._waitForSequenceMessage)return t.type!==q.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(t))return!0;const r=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,r<=this._latestReceivedSequenceId?(r===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=r,this._ackTimer(),!0)}_resetSequence(t){if(t.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=t.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const t=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:q.Sequence,sequenceId:t}));const r=this._messages;for(const n of r)await this._connection.send(n._message);this._reconnectInProgress=!1}_dispose(t){t??(t=new Error("Unable to reconnect to server."));for(const r of this._messages)r._rejector(t)}_isInvocationMessage(t){switch(t.type){case q.Invocation:case q.StreamItem:case q.Completion:case q.StreamInvocation:case q.CancelInvocation:return!0;case q.Close:case q.Sequence:case q.Ping:case q.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:q.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class db{constructor(t,r,n,a){this._message=t,this._id=r,this._resolver=n,this._rejector=a}}const ub=30*1e3,hb=15*1e3,gb=1e5;var se;(function(e){e.Disconnected="Disconnected",e.Connecting="Connecting",e.Connected="Connected",e.Disconnecting="Disconnecting",e.Reconnecting="Reconnecting"})(se||(se={}));class pd{static create(t,r,n,a,i,l,o){return new pd(t,r,n,a,i,l,o)}constructor(t,r,n,a,i,l,o){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(_.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},ye.isRequired(t,"connection"),ye.isRequired(r,"logger"),ye.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=i??ub,this.keepAliveIntervalInMilliseconds=l??hb,this._statefulReconnectBufferSize=o??gb,this._logger=r,this._protocol=n,this.connection=t,this._reconnectPolicy=a,this._handshakeProtocol=new lb,this.connection.onreceive=c=>this._processIncomingData(c),this.connection.onclose=c=>this._connectionClosed(c),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=se.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:q.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(t){if(this._connectionState!==se.Disconnected&&this._connectionState!==se.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!t)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=t}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==se.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=se.Connecting,this._logger.log(_.Debug,"Starting HubConnection.");try{await this._startInternal(),le.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=se.Connected,this._connectionStarted=!0,this._logger.log(_.Debug,"HubConnection connected successfully.")}catch(t){return this._connectionState=se.Disconnected,this._logger.log(_.Debug,`HubConnection failed to start successfully because of error '${t}'.`),Promise.reject(t)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const t=new Promise((r,n)=>{this._handshakeResolver=r,this._handshakeRejecter=n});await this.connection.start(this._protocol.transferFormat);try{let r=this._protocol.version;this.connection.features.reconnect||(r=1);const n={protocol:this._protocol.name,version:r};if(this._logger.log(_.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(n)),this._logger.log(_.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await t,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new cb(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(r){throw this._logger.log(_.Debug,`Hub handshake failed with error '${r}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(r),r}}async stop(){const t=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await t}catch{}}_stopInternal(t){if(this._connectionState===se.Disconnected)return this._logger.log(_.Debug,`Call to HubConnection.stop(${t}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===se.Disconnecting)return this._logger.log(_.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const r=this._connectionState;return this._connectionState=se.Disconnecting,this._logger.log(_.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(_.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(r===se.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=t||new St("The connection was stopped before the hub handshake could complete."),this.connection.stop(t))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(t,...r){const[n,a]=this._replaceStreamingParams(r),i=this._createStreamInvocation(t,r,a);let l;const o=new ob;return o.cancelCallback=()=>{const c=this._createCancelInvocation(i.invocationId);return delete this._callbacks[i.invocationId],l.then(()=>this._sendWithProtocol(c))},this._callbacks[i.invocationId]=(c,d)=>{if(d){o.error(d);return}else c&&(c.type===q.Completion?c.error?o.error(new Error(c.error)):o.complete():o.next(c.item))},l=this._sendWithProtocol(i).catch(c=>{o.error(c),delete this._callbacks[i.invocationId]}),this._launchStreams(n,l),o}_sendMessage(t){return this._resetKeepAliveInterval(),this.connection.send(t)}_sendWithProtocol(t){return this._messageBuffer?this._messageBuffer._send(t):this._sendMessage(this._protocol.writeMessage(t))}send(t,...r){const[n,a]=this._replaceStreamingParams(r),i=this._sendWithProtocol(this._createInvocation(t,r,!0,a));return this._launchStreams(n,i),i}invoke(t,...r){const[n,a]=this._replaceStreamingParams(r),i=this._createInvocation(t,r,!1,a);return new Promise((o,c)=>{this._callbacks[i.invocationId]=(h,u)=>{if(u){c(u);return}else h&&(h.type===q.Completion?h.error?c(new Error(h.error)):o(h.result):c(new Error(`Unexpected message type: ${h.type}`)))};const d=this._sendWithProtocol(i).catch(h=>{c(h),delete this._callbacks[i.invocationId]});this._launchStreams(n,d)})}on(t,r){!t||!r||(t=t.toLowerCase(),this._methods[t]||(this._methods[t]=[]),this._methods[t].indexOf(r)===-1&&this._methods[t].push(r))}off(t,r){if(!t)return;t=t.toLowerCase();const n=this._methods[t];if(n)if(r){const a=n.indexOf(r);a!==-1&&(n.splice(a,1),n.length===0&&delete this._methods[t])}else delete this._methods[t]}onclose(t){t&&this._closedCallbacks.push(t)}onreconnecting(t){t&&this._reconnectingCallbacks.push(t)}onreconnected(t){t&&this._reconnectedCallbacks.push(t)}_processIncomingData(t){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(t=this._processHandshakeResponse(t),this._receivedHandshakeResponse=!0),t){const r=this._protocol.parseMessages(t,this._logger);for(const n of r)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(n)))switch(n.type){case q.Invocation:this._invokeClientMethod(n).catch(a=>{this._logger.log(_.Error,`Invoke client method threw error: ${Ul(a)}`)});break;case q.StreamItem:case q.Completion:{const a=this._callbacks[n.invocationId];if(a){n.type===q.Completion&&delete this._callbacks[n.invocationId];try{a(n)}catch(i){this._logger.log(_.Error,`Stream callback threw error: ${Ul(i)}`)}}break}case q.Ping:break;case q.Close:{this._logger.log(_.Information,"Close message received from server.");const a=n.error?new Error("Server returned an error on close: "+n.error):void 0;n.allowReconnect===!0?this.connection.stop(a):this._stopPromise=this._stopInternal(a);break}case q.Ack:this._messageBuffer&&this._messageBuffer._ack(n);break;case q.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(n);break;default:this._logger.log(_.Warning,`Invalid message type: ${n.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(t){let r,n;try{[n,r]=this._handshakeProtocol.parseHandshakeResponse(t)}catch(a){const i="Error parsing handshake response: "+a;this._logger.log(_.Error,i);const l=new Error(i);throw this._handshakeRejecter(l),l}if(r.error){const a="Server returned handshake error: "+r.error;this._logger.log(_.Error,a);const i=new Error(a);throw this._handshakeRejecter(i),i}else this._logger.log(_.Debug,"Server handshake complete.");return this._handshakeResolver(),n}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let t=this._nextKeepAlive-new Date().getTime();t<0&&(t=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===se.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}},t)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(t){const r=t.target.toLowerCase(),n=this._methods[r];if(!n){this._logger.log(_.Warning,`No client method with the name '${r}' found.`),t.invocationId&&(this._logger.log(_.Warning,`No result given for '${r}' method and invocation ID '${t.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(t.invocationId,"Client didn't provide a result.",null)));return}const a=n.slice(),i=!!t.invocationId;let l,o,c;for(const d of a)try{const h=l;l=await d.apply(this,t.arguments),i&&l&&h&&(this._logger.log(_.Error,`Multiple results provided for '${r}'. Sending error to server.`),c=this._createCompletionMessage(t.invocationId,"Client provided multiple results.",null)),o=void 0}catch(h){o=h,this._logger.log(_.Error,`A callback for the method '${r}' threw error '${h}'.`)}c?await this._sendWithProtocol(c):i?(o?c=this._createCompletionMessage(t.invocationId,`${o}`,null):l!==void 0?c=this._createCompletionMessage(t.invocationId,null,l):(this._logger.log(_.Warning,`No result given for '${r}' method and invocation ID '${t.invocationId}'.`),c=this._createCompletionMessage(t.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(c)):l&&this._logger.log(_.Error,`Result given for '${r}' method but server is not expecting a result.`)}_connectionClosed(t){this._logger.log(_.Debug,`HubConnection.connectionClosed(${t}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||t||new St("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(t||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===se.Disconnecting?this._completeClose(t):this._connectionState===se.Connected&&this._reconnectPolicy?this._reconnect(t):this._connectionState===se.Connected&&this._completeClose(t)}_completeClose(t){if(this._connectionStarted){this._connectionState=se.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(t??new Error("Connection closed.")),this._messageBuffer=void 0),le.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(r=>r.apply(this,[t]))}catch(r){this._logger.log(_.Error,`An onclose callback called with error '${t}' threw error '${r}'.`)}}}async _reconnect(t){const r=Date.now();let n=0,a=t!==void 0?t:new Error("Attempting to reconnect due to a unknown error."),i=this._getNextRetryDelay(n++,0,a);if(i===null){this._logger.log(_.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(t);return}if(this._connectionState=se.Reconnecting,t?this._logger.log(_.Information,`Connection reconnecting because of error '${t}'.`):this._logger.log(_.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(l=>l.apply(this,[t]))}catch(l){this._logger.log(_.Error,`An onreconnecting callback called with error '${t}' threw error '${l}'.`)}if(this._connectionState!==se.Reconnecting){this._logger.log(_.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;i!==null;){if(this._logger.log(_.Information,`Reconnect attempt number ${n} will start in ${i} ms.`),await new Promise(l=>{this._reconnectDelayHandle=setTimeout(l,i)}),this._reconnectDelayHandle=void 0,this._connectionState!==se.Reconnecting){this._logger.log(_.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=se.Connected,this._logger.log(_.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(l=>l.apply(this,[this.connection.connectionId]))}catch(l){this._logger.log(_.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${l}'.`)}return}catch(l){if(this._logger.log(_.Information,`Reconnect attempt failed because of error '${l}'.`),this._connectionState!==se.Reconnecting){this._logger.log(_.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===se.Disconnecting&&this._completeClose();return}a=l instanceof Error?l:new Error(l.toString()),i=this._getNextRetryDelay(n++,Date.now()-r,a)}}this._logger.log(_.Information,`Reconnect retries have been exhausted after ${Date.now()-r} ms and ${n} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(t,r,n){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:r,previousRetryCount:t,retryReason:n})}catch(a){return this._logger.log(_.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${t}, ${r}) threw error '${a}'.`),null}}_cancelCallbacksWithError(t){const r=this._callbacks;this._callbacks={},Object.keys(r).forEach(n=>{const a=r[n];try{a(null,t)}catch(i){this._logger.log(_.Error,`Stream 'error' callback called with '${t}' threw error: ${Ul(i)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(t,r,n,a){if(n)return a.length!==0?{target:t,arguments:r,streamIds:a,type:q.Invocation}:{target:t,arguments:r,type:q.Invocation};{const i=this._invocationId;return this._invocationId++,a.length!==0?{target:t,arguments:r,invocationId:i.toString(),streamIds:a,type:q.Invocation}:{target:t,arguments:r,invocationId:i.toString(),type:q.Invocation}}}_launchStreams(t,r){if(t.length!==0){r||(r=Promise.resolve());for(const n in t)t[n].subscribe({complete:()=>{r=r.then(()=>this._sendWithProtocol(this._createCompletionMessage(n)))},error:a=>{let i;a instanceof Error?i=a.message:a&&a.toString?i=a.toString():i="Unknown error",r=r.then(()=>this._sendWithProtocol(this._createCompletionMessage(n,i)))},next:a=>{r=r.then(()=>this._sendWithProtocol(this._createStreamItemMessage(n,a)))}})}}_replaceStreamingParams(t){const r=[],n=[];for(let a=0;a<t.length;a++){const i=t[a];if(this._isObservable(i)){const l=this._invocationId;this._invocationId++,r[l]=i,n.push(l.toString()),t.splice(a,1)}}return[r,n]}_isObservable(t){return t&&t.subscribe&&typeof t.subscribe=="function"}_createStreamInvocation(t,r,n){const a=this._invocationId;return this._invocationId++,n.length!==0?{target:t,arguments:r,invocationId:a.toString(),streamIds:n,type:q.StreamInvocation}:{target:t,arguments:r,invocationId:a.toString(),type:q.StreamInvocation}}_createCancelInvocation(t){return{invocationId:t,type:q.CancelInvocation}}_createStreamItemMessage(t,r){return{invocationId:t,item:r,type:q.StreamItem}}_createCompletionMessage(t,r,n){return r?{error:r,invocationId:t,type:q.Completion}:{invocationId:t,result:n,type:q.Completion}}_createCloseMessage(){return{type:q.Close}}}const fb=[0,2e3,1e4,3e4,null];class eh{constructor(t){this._retryDelays=t!==void 0?[...t,null]:fb}nextRetryDelayInMilliseconds(t){return this._retryDelays[t.previousRetryCount]}}class mn{}mn.Authorization="Authorization";mn.Cookie="Cookie";class mb extends dl{constructor(t,r){super(),this._innerClient=t,this._accessTokenFactory=r}async send(t){let r=!0;this._accessTokenFactory&&(!this._accessToken||t.url&&t.url.indexOf("/negotiate?")>0)&&(r=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(t);const n=await this._innerClient.send(t);return r&&n.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(t),await this._innerClient.send(t)):n}_setAuthorizationHeader(t){t.headers||(t.headers={}),this._accessToken?t.headers[mn.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&t.headers[mn.Authorization]&&delete t.headers[mn.Authorization]}getCookieString(t){return this._innerClient.getCookieString(t)}}var ke;(function(e){e[e.None=0]="None",e[e.WebSockets=1]="WebSockets",e[e.ServerSentEvents=2]="ServerSentEvents",e[e.LongPolling=4]="LongPolling"})(ke||(ke={}));var Fe;(function(e){e[e.Text=1]="Text",e[e.Binary=2]="Binary"})(Fe||(Fe={}));let pb=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class th{get pollAborted(){return this._pollAbort.aborted}constructor(t,r,n){this._httpClient=t,this._logger=r,this._pollAbort=new pb,this._options=n,this._running=!1,this.onreceive=null,this.onclose=null}async connect(t,r){if(ye.isRequired(t,"url"),ye.isRequired(r,"transferFormat"),ye.isIn(r,Fe,"transferFormat"),this._url=t,this._logger.log(_.Trace,"(LongPolling transport) Connecting."),r===Fe.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[n,a]=us(),i={[n]:a,...this._options.headers},l={abortSignal:this._pollAbort.signal,headers:i,timeout:1e5,withCredentials:this._options.withCredentials};r===Fe.Binary&&(l.responseType="arraybuffer");const o=`${t}&_=${Date.now()}`;this._logger.log(_.Trace,`(LongPolling transport) polling: ${o}.`);const c=await this._httpClient.get(o,l);c.statusCode!==200?(this._logger.log(_.Error,`(LongPolling transport) Unexpected response code: ${c.statusCode}.`),this._closeError=new fn(c.statusText||"",c.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,l)}async _poll(t,r){try{for(;this._running;)try{const n=`${t}&_=${Date.now()}`;this._logger.log(_.Trace,`(LongPolling transport) polling: ${n}.`);const a=await this._httpClient.get(n,r);a.statusCode===204?(this._logger.log(_.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):a.statusCode!==200?(this._logger.log(_.Error,`(LongPolling transport) Unexpected response code: ${a.statusCode}.`),this._closeError=new fn(a.statusText||"",a.statusCode),this._running=!1):a.content?(this._logger.log(_.Trace,`(LongPolling transport) data received. ${ua(a.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(a.content)):this._logger.log(_.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(n){this._running?n instanceof md?this._logger.log(_.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=n,this._running=!1):this._logger.log(_.Trace,`(LongPolling transport) Poll errored after shutdown: ${n.message}`)}}finally{this._logger.log(_.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(t){return this._running?gf(this._logger,"LongPolling",this._httpClient,this._url,t,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(_.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(_.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const t={},[r,n]=us();t[r]=n;const a={headers:{...t,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let i;try{await this._httpClient.delete(this._url,a)}catch(l){i=l}i?i instanceof fn&&(i.statusCode===404?this._logger.log(_.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(_.Trace,`(LongPolling transport) Error sending a DELETE request: ${i}`)):this._logger.log(_.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(_.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let t="(LongPolling transport) Firing onclose event.";this._closeError&&(t+=" Error: "+this._closeError),this._logger.log(_.Trace,t),this.onclose(this._closeError)}}}class xb{constructor(t,r,n,a){this._httpClient=t,this._accessToken=r,this._logger=n,this._options=a,this.onreceive=null,this.onclose=null}async connect(t,r){return ye.isRequired(t,"url"),ye.isRequired(r,"transferFormat"),ye.isIn(r,Fe,"transferFormat"),this._logger.log(_.Trace,"(SSE transport) Connecting."),this._url=t,this._accessToken&&(t+=(t.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((n,a)=>{let i=!1;if(r!==Fe.Text){a(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let l;if(le.isBrowser||le.isWebWorker)l=new this._options.EventSource(t,{withCredentials:this._options.withCredentials});else{const o=this._httpClient.getCookieString(t),c={};c.Cookie=o;const[d,h]=us();c[d]=h,l=new this._options.EventSource(t,{withCredentials:this._options.withCredentials,headers:{...c,...this._options.headers}})}try{l.onmessage=o=>{if(this.onreceive)try{this._logger.log(_.Trace,`(SSE transport) data received. ${ua(o.data,this._options.logMessageContent)}.`),this.onreceive(o.data)}catch(c){this._close(c);return}},l.onerror=o=>{i?this._close():a(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},l.onopen=()=>{this._logger.log(_.Information,`SSE connected to ${this._url}`),this._eventSource=l,i=!0,n()}}catch(o){a(o);return}})}async send(t){return this._eventSource?gf(this._logger,"SSE",this._httpClient,this._url,t,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(t){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(t))}}class yb{constructor(t,r,n,a,i,l){this._logger=n,this._accessTokenFactory=r,this._logMessageContent=a,this._webSocketConstructor=i,this._httpClient=t,this.onreceive=null,this.onclose=null,this._headers=l}async connect(t,r){ye.isRequired(t,"url"),ye.isRequired(r,"transferFormat"),ye.isIn(r,Fe,"transferFormat"),this._logger.log(_.Trace,"(WebSockets transport) Connecting.");let n;return this._accessTokenFactory&&(n=await this._accessTokenFactory()),new Promise((a,i)=>{t=t.replace(/^http/,"ws");let l;const o=this._httpClient.getCookieString(t);let c=!1;if(le.isNode||le.isReactNative){const d={},[h,u]=us();d[h]=u,n&&(d[mn.Authorization]=`Bearer ${n}`),o&&(d[mn.Cookie]=o),l=new this._webSocketConstructor(t,void 0,{headers:{...d,...this._headers}})}else n&&(t+=(t.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(n)}`);l||(l=new this._webSocketConstructor(t)),r===Fe.Binary&&(l.binaryType="arraybuffer"),l.onopen=d=>{this._logger.log(_.Information,`WebSocket connected to ${t}.`),this._webSocket=l,c=!0,a()},l.onerror=d=>{let h=null;typeof ErrorEvent<"u"&&d instanceof ErrorEvent?h=d.error:h="There was an error with the transport",this._logger.log(_.Information,`(WebSockets transport) ${h}.`)},l.onmessage=d=>{if(this._logger.log(_.Trace,`(WebSockets transport) data received. ${ua(d.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(d.data)}catch(h){this._close(h);return}},l.onclose=d=>{if(c)this._close(d);else{let h=null;typeof ErrorEvent<"u"&&d instanceof ErrorEvent?h=d.error:h="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",i(new Error(h))}}})}send(t){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(_.Trace,`(WebSockets transport) sending data. ${ua(t,this._logMessageContent)}.`),this._webSocket.send(t),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(t){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(_.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(t)&&(t.wasClean===!1||t.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${t.code} (${t.reason||"no reason given"}).`)):t instanceof Error?this.onclose(t):this.onclose())}_isCloseEvent(t){return t&&typeof t.wasClean=="boolean"&&typeof t.code=="number"}}const rh=100;class vb{constructor(t,r={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,ye.isRequired(t,"url"),this._logger=Yv(r.logger),this.baseUrl=this._resolveUrl(t),r=r||{},r.logMessageContent=r.logMessageContent===void 0?!1:r.logMessageContent,typeof r.withCredentials=="boolean"||r.withCredentials===void 0)r.withCredentials=r.withCredentials===void 0?!0:r.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");r.timeout=r.timeout===void 0?100*1e3:r.timeout;let n=null,a=null;if(le.isNode&&typeof require<"u"){const i=typeof __webpack_require__=="function"?__non_webpack_require__:require;n=i("ws"),a=i("eventsource")}!le.isNode&&typeof WebSocket<"u"&&!r.WebSocket?r.WebSocket=WebSocket:le.isNode&&!r.WebSocket&&n&&(r.WebSocket=n),!le.isNode&&typeof EventSource<"u"&&!r.EventSource?r.EventSource=EventSource:le.isNode&&!r.EventSource&&typeof a<"u"&&(r.EventSource=a),this._httpClient=new mb(r.httpClient||new ib(this._logger),r.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=r,this.onreceive=null,this.onclose=null}async start(t){if(t=t||Fe.Binary,ye.isIn(t,Fe,"transferFormat"),this._logger.log(_.Debug,`Starting connection with transfer format '${Fe[t]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(t),await this._startInternalPromise,this._connectionState==="Disconnecting"){const r="Failed to start the HttpConnection before stop() was called.";return this._logger.log(_.Error,r),await this._stopPromise,Promise.reject(new St(r))}else if(this._connectionState!=="Connected"){const r="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(_.Error,r),Promise.reject(new St(r))}this._connectionStarted=!0}send(t){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new xd(this.transport)),this._sendQueue.send(t))}async stop(t){if(this._connectionState==="Disconnected")return this._logger.log(_.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(_.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(r=>{this._stopPromiseResolver=r}),await this._stopInternal(t),await this._stopPromise}async _stopInternal(t){this._stopError=t;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(r){this._logger.log(_.Error,`HttpConnection.transport.stop() threw error '${r}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(_.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(t){let r=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===ke.WebSockets)this.transport=this._constructTransport(ke.WebSockets),await this._startTransport(r,t);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let n=null,a=0;do{if(n=await this._getNegotiationResponse(r),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new St("The connection was stopped during negotiation.");if(n.error)throw new Error(n.error);if(n.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(n.url&&(r=n.url),n.accessToken){const i=n.accessToken;this._accessTokenFactory=()=>i,this._httpClient._accessToken=i,this._httpClient._accessTokenFactory=void 0}a++}while(n.url&&a<rh);if(a===rh&&n.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(r,this._options.transport,n,t)}this.transport instanceof th&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(_.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(n){return this._logger.log(_.Error,"Failed to start the connection: "+n),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(n)}}async _getNegotiationResponse(t){const r={},[n,a]=us();r[n]=a;const i=this._resolveNegotiateUrl(t);this._logger.log(_.Debug,`Sending negotiation request: ${i}.`);try{const l=await this._httpClient.post(i,{content:"",headers:{...r,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(l.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${l.statusCode}'`));const o=JSON.parse(l.content);return(!o.negotiateVersion||o.negotiateVersion<1)&&(o.connectionToken=o.connectionId),o.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new Ju("Client didn't negotiate Stateful Reconnect but the server did.")):o}catch(l){let o="Failed to complete negotiation with the server: "+l;return l instanceof fn&&l.statusCode===404&&(o=o+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(_.Error,o),Promise.reject(new Ju(o))}}_createConnectUrl(t,r){return r?t+(t.indexOf("?")===-1?"?":"&")+`id=${r}`:t}async _createTransport(t,r,n,a){let i=this._createConnectUrl(t,n.connectionToken);if(this._isITransport(r)){this._logger.log(_.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=r,await this._startTransport(i,a),this.connectionId=n.connectionId;return}const l=[],o=n.availableTransports||[];let c=n;for(const d of o){const h=this._resolveTransportOrError(d,r,a,(c==null?void 0:c.useStatefulReconnect)===!0);if(h instanceof Error)l.push(`${d.transport} failed:`),l.push(h);else if(this._isITransport(h)){if(this.transport=h,!c){try{c=await this._getNegotiationResponse(t)}catch(u){return Promise.reject(u)}i=this._createConnectUrl(t,c.connectionToken)}try{await this._startTransport(i,a),this.connectionId=c.connectionId;return}catch(u){if(this._logger.log(_.Error,`Failed to start the transport '${d.transport}': ${u}`),c=void 0,l.push(new Kv(`${d.transport} failed: ${u}`,ke[d.transport])),this._connectionState!=="Connecting"){const m="Failed to select transport before stop() was called.";return this._logger.log(_.Debug,m),Promise.reject(new St(m))}}}}return l.length>0?Promise.reject(new Vv(`Unable to connect to the server with any of the available transports. ${l.join(" ")}`,l)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(t){switch(t){case ke.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new yb(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case ke.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new xb(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case ke.LongPolling:return new th(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${t}.`)}}_startTransport(t,r){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async n=>{let a=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(t,r),await this.features.resend()}catch{a=!0}else{this._stopConnection(n);return}a&&this._stopConnection(n)}:this.transport.onclose=n=>this._stopConnection(n),this.transport.connect(t,r)}_resolveTransportOrError(t,r,n,a){const i=ke[t.transport];if(i==null)return this._logger.log(_.Debug,`Skipping transport '${t.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${t.transport}' because it is not supported by this client.`);if(bb(r,i))if(t.transferFormats.map(o=>Fe[o]).indexOf(n)>=0){if(i===ke.WebSockets&&!this._options.WebSocket||i===ke.ServerSentEvents&&!this._options.EventSource)return this._logger.log(_.Debug,`Skipping transport '${ke[i]}' because it is not supported in your environment.'`),new Qv(`'${ke[i]}' is not supported in your environment.`,i);this._logger.log(_.Debug,`Selecting transport '${ke[i]}'.`);try{return this.features.reconnect=i===ke.WebSockets?a:void 0,this._constructTransport(i)}catch(o){return o}}else return this._logger.log(_.Debug,`Skipping transport '${ke[i]}' because it does not support the requested transfer format '${Fe[n]}'.`),new Error(`'${ke[i]}' does not support ${Fe[n]}.`);else return this._logger.log(_.Debug,`Skipping transport '${ke[i]}' because it was disabled by the client.`),new Wv(`'${ke[i]}' is disabled by the client.`,i)}_isITransport(t){return t&&typeof t=="object"&&"connect"in t}_stopConnection(t){if(this._logger.log(_.Debug,`HttpConnection.stopConnection(${t}) called while in state ${this._connectionState}.`),this.transport=void 0,t=this._stopError||t,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(_.Debug,`Call to HttpConnection.stopConnection(${t}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(_.Warning,`Call to HttpConnection.stopConnection(${t}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${t}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),t?this._logger.log(_.Error,`Connection disconnected with error '${t}'.`):this._logger.log(_.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(r=>{this._logger.log(_.Error,`TransportSendQueue.stop() threw error '${r}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(t)}catch(r){this._logger.log(_.Error,`HttpConnection.onclose(${t}) threw error '${r}'.`)}}}_resolveUrl(t){if(t.lastIndexOf("https://",0)===0||t.lastIndexOf("http://",0)===0)return t;if(!le.isBrowser)throw new Error(`Cannot resolve '${t}'.`);const r=window.document.createElement("a");return r.href=t,this._logger.log(_.Information,`Normalizing '${t}' to '${r.href}'.`),r.href}_resolveNegotiateUrl(t){const r=new URL(t);r.pathname.endsWith("/")?r.pathname+="negotiate":r.pathname+="/negotiate";const n=new URLSearchParams(r.searchParams);return n.has("negotiateVersion")||n.append("negotiateVersion",this._negotiateVersion.toString()),n.has("useStatefulReconnect")?n.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&n.append("useStatefulReconnect","true"),r.search=n.toString(),r.toString()}}function bb(e,t){return!e||(t&e)!==0}class xd{constructor(t){this._transport=t,this._buffer=[],this._executing=!0,this._sendBufferedData=new Qa,this._transportResult=new Qa,this._sendLoopPromise=this._sendLoop()}send(t){return this._bufferData(t),this._transportResult||(this._transportResult=new Qa),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(t){if(this._buffer.length&&typeof this._buffer[0]!=typeof t)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof t}`);this._buffer.push(t),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new Qa;const t=this._transportResult;this._transportResult=void 0;const r=typeof this._buffer[0]=="string"?this._buffer.join(""):xd._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(r),t.resolve()}catch(n){t.reject(n)}}}static _concatBuffers(t){const r=t.map(i=>i.byteLength).reduce((i,l)=>i+l),n=new Uint8Array(r);let a=0;for(const i of t)n.set(new Uint8Array(i),a),a+=i.byteLength;return n.buffer}}class Qa{constructor(){this.promise=new Promise((t,r)=>[this._resolver,this._rejecter]=[t,r])}resolve(){this._resolver()}reject(t){this._rejecter(t)}}const kb="json";class wb{constructor(){this.name=kb,this.version=2,this.transferFormat=Fe.Text}parseMessages(t,r){if(typeof t!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!t)return[];r===null&&(r=da.instance);const n=st.parse(t),a=[];for(const i of n){const l=JSON.parse(i);if(typeof l.type!="number")throw new Error("Invalid payload.");switch(l.type){case q.Invocation:this._isInvocationMessage(l);break;case q.StreamItem:this._isStreamItemMessage(l);break;case q.Completion:this._isCompletionMessage(l);break;case q.Ping:break;case q.Close:break;case q.Ack:this._isAckMessage(l);break;case q.Sequence:this._isSequenceMessage(l);break;default:r.log(_.Information,"Unknown message type '"+l.type+"' ignored.");continue}a.push(l)}return a}writeMessage(t){return st.write(JSON.stringify(t))}_isInvocationMessage(t){this._assertNotEmptyString(t.target,"Invalid payload for Invocation message."),t.invocationId!==void 0&&this._assertNotEmptyString(t.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(t){if(this._assertNotEmptyString(t.invocationId,"Invalid payload for StreamItem message."),t.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(t){if(t.result&&t.error)throw new Error("Invalid payload for Completion message.");!t.result&&t.error&&this._assertNotEmptyString(t.error,"Invalid payload for Completion message."),this._assertNotEmptyString(t.invocationId,"Invalid payload for Completion message.")}_isAckMessage(t){if(typeof t.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(t){if(typeof t.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(t,r){if(typeof t!="string"||t==="")throw new Error(r)}}const jb={trace:_.Trace,debug:_.Debug,info:_.Information,information:_.Information,warn:_.Warning,warning:_.Warning,error:_.Error,critical:_.Critical,none:_.None};function Nb(e){const t=jb[e.toLowerCase()];if(typeof t<"u")return t;throw new Error(`Unknown log level: ${e}`)}class Sb{configureLogging(t){if(ye.isRequired(t,"logging"),Cb(t))this.logger=t;else if(typeof t=="string"){const r=Nb(t);this.logger=new $i(r)}else this.logger=new $i(t);return this}withUrl(t,r){return ye.isRequired(t,"url"),ye.isNotEmpty(t,"url"),this.url=t,typeof r=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...r}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:r},this}withHubProtocol(t){return ye.isRequired(t,"protocol"),this.protocol=t,this}withAutomaticReconnect(t){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return t?Array.isArray(t)?this.reconnectPolicy=new eh(t):this.reconnectPolicy=t:this.reconnectPolicy=new eh,this}withServerTimeout(t){return ye.isRequired(t,"milliseconds"),this._serverTimeoutInMilliseconds=t,this}withKeepAliveInterval(t){return ye.isRequired(t,"milliseconds"),this._keepAliveIntervalInMilliseconds=t,this}withStatefulReconnect(t){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=t==null?void 0:t.bufferSize,this}build(){const t=this.httpConnectionOptions||{};if(t.logger===void 0&&(t.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const r=new vb(this.url,t);return pd.create(r,this.logger||da.instance,this.protocol||new wb,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function Cb(e){return e.log!==void 0}class _b{constructor(){vd(this,"connection",null)}async start(){const t=Or.getToken()||"",r=`${Av}/${Ov}`;console.log("[SignalR] starting, hubUrl =",r,"tokenPresent =",!!t),this.connection=new Sb().withUrl(r,{accessTokenFactory:()=>t}).withAutomaticReconnect().configureLogging(_.Information).build(),this.connection.on("connected",()=>{console.log("[SignalR] server acknowledged connection")});try{await this.connection.start(),console.log("[SignalR] connected")}catch(n){throw console.warn("[SignalR] connection failed",n),n}}stop(){return this.connection?this.connection.stop():Promise.resolve()}on(t,r){var n;console.log("[SignalR] register handler for",t),(n=this.connection)==null||n.on(t,r)}onReconnected(t){var r;(r=this.connection)==null||r.onreconnected(t)}onReconnecting(t){var r;(r=this.connection)==null||r.onreconnecting(()=>t())}onClose(t){var r;(r=this.connection)==null||r.onclose(()=>t())}getConnectionState(){var t;return((t=this.connection)==null?void 0:t.state)||"Disconnected"}}function et(){const[e,t]=y.useState(null),[r,n]=y.useState(!0);y.useEffect(()=>{t(Or.getToken()),n(!1)},[]);const a=y.useCallback(async(l,o)=>{const c=await Or.login(l,o);return t(c.accessToken),c},[]),i=y.useCallback(()=>{Or.logout(),t(null)},[]);return{token:e,loading:r,login:a,logout:i,isAuthenticated:!!e}}const ff=y.createContext({hub:null,isConnected:!1});function Eb({children:e}){const{token:t,loading:r}=et(),[n]=y.useState(()=>new _b),[a,i]=y.useState(!1);return y.useEffect(()=>{if(r||!t){i(!1);return}let l=!0;(async()=>{try{await n.start(),l&&i(!0)}catch(d){console.warn("[SignalR] Connection failed",d),l&&i(!1)}})(),n.onReconnected(()=>{l&&(console.log("[SignalR] Reconnected"),i(!0))}),n.onReconnecting(()=>{l&&(console.log("[SignalR] Reconnecting..."),i(!1))}),n.onClose(()=>{l&&(console.log("[SignalR] Connection closed"),i(!1))});const c=setInterval(()=>{if(l){const d=n.getConnectionState();i(d==="Connected")}},5e3);return()=>{l=!1,clearInterval(c),n.stop().catch(()=>{})}},[t,r,n]),s.jsx(ff.Provider,{value:{hub:n,isConnected:a},children:e})}function ja(){return y.useContext(ff)}function Na(){const{isConnected:e}=ja();return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`h-2 w-2 rounded-full ${e?"bg-green-500 animate-pulse":"bg-gray-400 dark:bg-gray-600"}`}),s.jsx("span",{className:`text-sm font-medium ${e?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"}`,children:e?"Connected":"Connection Lost"})]})}async function pe(e,t){const r=Or.getToken(),n={"Content-Type":"application/json",...(t==null?void 0:t.headers)||{}};r&&(n.Authorization=`Bearer ${r}`);const a=await fetch(`${It}${e}`,{...t,headers:n});if(a.status===401)throw Or.logout(),window.location.href="/login",new Error("Unauthorized - redirecting to login");if(!a.ok)throw new Error(`API ${a.status}: ${await a.text()}`);return a.json()}const Te={getDashboardConsolidated:(e="24h")=>pe(`/dashboarddata/consolidated?timeRange=${e}`),getRecentSecurityEvents:(e=8)=>pe(`/security-events?limit=${e}&sort=timestamp&order=desc`),getSystemStatus:()=>pe("/system-status"),getMalwareStatus:()=>pe("/malware-rules/status").catch(()=>null),getTimeline:(e,t,r)=>pe(`/timeline?granularity=${encodeURIComponent(e)}&from=${encodeURIComponent(t)}&to=${encodeURIComponent(r)}`),getTimelineStats:(e,t)=>pe(`/timeline/stats?startTime=${encodeURIComponent(e)}&endTime=${encodeURIComponent(t)}`),getMitreTechniques:(e={})=>{const t=new URLSearchParams;return e.page&&t.append("page",e.page.toString()),e.perPage&&t.append("perPage",e.perPage.toString()),e.search&&t.append("search",e.search),e.tactic&&t.append("tactic",e.tactic),e.platform&&t.append("platform",e.platform),e.sort&&t.append("sort",e.sort),e.order&&t.append("order",e.order),pe(`/mitre/techniques?${t.toString()}`)},getMitreStatistics:()=>pe("/mitre/statistics"),importMitreTechniques:()=>pe("/mitre/import",{method:"POST"}),getMalwareRules:(e={})=>{const t=new URLSearchParams;return e.page&&t.append("page",e.page.toString()),e.perPage&&t.append("perPage",e.perPage.toString()),e.search&&t.append("q",e.search),e.category&&t.append("category",e.category),e.threatLevel&&t.append("threatLevel",e.threatLevel),e.isValid!==void 0&&t.append("isValid",e.isValid.toString()),e.isEnabled!==void 0&&t.append("isEnabled",e.isEnabled.toString()),pe(`/malware-rules?${t.toString()}`)},getMalwareStatistics:()=>pe("/malware-rules/statistics"),toggleMalwareRule:(e,t)=>pe(`/malware-rules/${e}/toggle`,{method:"POST",body:JSON.stringify({isEnabled:t})}),deleteMalwareRule:e=>pe(`/malware-rules/${e}`,{method:"DELETE"}),importMalwareRules:e=>pe("/malware-rules/import",{method:"POST",body:JSON.stringify(e)}),getThreatScans:(e={})=>{const t=new URLSearchParams;return e.page&&t.append("page",e.page.toString()),e.perPage&&t.append("perPage",e.perPage.toString()),e.sort&&t.append("sort",e.sort),e.order&&t.append("order",e.order),pe(`/threat-scanner?${t.toString()}`)},getScanProgress:()=>pe("/threat-scanner/progress"),startQuickScan:()=>pe("/threat-scanner/quick-scan?async=true",{method:"POST"}),startFullScan:()=>pe("/threat-scanner/full-scan?async=true",{method:"POST"}),cancelScan:()=>pe("/threat-scanner/cancel",{method:"POST"}),getLastScanResult:()=>pe("/threat-scanner/last-result")};function Tb(){const{token:e,loading:t}=et(),r=Qe(),n=xt(),{hub:a}=ja();y.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]);const i=be({queryKey:["dashboard","consolidated","24h"],queryFn:()=>Te.getDashboardConsolidated("24h"),refetchInterval:3e4,enabled:!t&&!!e});y.useEffect(()=>{a&&(a.on("DashboardUpdate",o=>{n.setQueryData(["dashboard","consolidated","24h"],o)}),a.on("SecurityEvent",()=>{n.invalidateQueries({queryKey:["security-events"]})}),a.on("SystemStatusUpdate",()=>{n.invalidateQueries({queryKey:["system-status"]})}))},[a,n]);const l=y.useMemo(()=>{const o=i.data||{},c=o.data&&typeof o.data=="object"?o.data:o,d=c.securityEvents||{},h=d.totalEvents??0,u=Array.isArray(d.recentEvents)?d.recentEvents:[],m=d.riskLevelCounts||{},x=m.CRITICAL??m.critical??0,k=u.filter(L=>{const U=(L.status||"").toUpperCase();return U==="OPEN"||U==="INVESTIGATING"}).length,w=u.length??0,j=h,g=c.malware||c.yara||{},f=g.enabledRules??0,p=g.totalRules??0,b=g.recentMatches??0,N=c.threatScanner||{},T=N.totalScans??0,S=N.lastScanResult??"N/A",E=N.lastScanStatus??"unknown",D=c.systemStatus||{};let I="UNKNOWN";const A=D.healthyComponents??0,V=D.totalComponents??0;typeof D.totalComponents=="number"&&typeof D.healthyComponents=="number"&&(I=D.totalComponents>0&&D.healthyComponents===D.totalComponents?"OPERATIONAL":"DEGRADED");const X=Object.keys(m).map(L=>({severity:L,count:m[L]})),R=Array.isArray(c.recentActivity)?c.recentActivity:[];return{events:{open:k,last24h:w,critical:x,events24h:j},malware:{enabledRules:f,totalRules:p,recentMatches:b},threatScans:{totalScans:T,lastScanResult:S,lastScanStatus:E},system:{status:I,healthyComponents:A,totalComponents:V},threatDistribution:X,recentActivity:R}},[i.data]);return y.useEffect(()=>{i.data&&(console.group("[Dashboard] Consolidated data"),console.log(i.data),console.groupEnd())},[i.data]),i.isLoading?s.jsx(Kr,{}):s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"px-8 py-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Real-time security platform overview"})]}),s.jsx(Na,{})]})})}),s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx(jt,{title:"Open Events",value:l.events.open,change:{value:l.events.last24h,period:"last 24h"},icon:Ut,color:l.events.critical>0?"red":"green",description:"Security events requiring attention"}),s.jsx(jt,{title:"Critical Threats",value:l.events.critical,icon:Le,color:"red",description:"High-priority security incidents"}),s.jsx(jt,{title:"Malware Rules",value:`${l.malware.enabledRules}/${l.malware.totalRules}`,change:{value:l.malware.recentMatches,period:"matches today"},icon:il,color:"blue",description:"Active malware detection rules"}),s.jsx(jt,{title:"Threat Scans",value:l.threatScans.totalScans,change:{value:l.threatScans.lastScanResult,period:"last result"},icon:cf,color:l.threatScans.lastScanStatus==="clean"?"green":l.threatScans.lastScanStatus==="threat"?"red":"gray",description:"Threat intelligence scans completed"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsx(jt,{title:"Events/24h",value:l.events.events24h,icon:df,color:"blue",description:"Total events in 24-hour window"}),s.jsx(jt,{title:"System Status",value:`${l.system.healthyComponents}/${l.system.totalComponents}`,icon:Oi,color:l.system.healthyComponents===l.system.totalComponents&&l.system.totalComponents>0?"green":"yellow",description:"Healthy components / Total components"}),s.jsx(jt,{title:"Response Time",value:"2.3min",icon:fd,color:"green",description:"Average incident response time"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsx(Hv,{events:l.recentActivity??[],isLoading:i.isLoading})}),s.jsx(qv,{data:l.threatDistribution??[],isLoading:i.isLoading})]})]})]})}function Pb(){const e=Qe(),[t,r]=y.useState(""),[n,a]=y.useState(""),[i,l]=y.useState(null),[o,c]=y.useState(!1),d=async h=>{h.preventDefault(),c(!0),l(null);try{await Or.login(t,n),e("/",{replace:!0})}catch(u){l((u==null?void 0:u.message)||"Login failed")}finally{c(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:s.jsxs("form",{onSubmit:d,className:"w-full max-w-sm bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6 shadow-sm",children:[s.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Sign in"}),s.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300 mb-1",children:"Username"}),s.jsx("input",{value:t,onChange:h=>r(h.target.value),className:"w-full mb-3 px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"admin"}),s.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),s.jsx("input",{value:n,onChange:h=>a(h.target.value),type:"password",className:"w-full mb-4 px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"••••••••"}),i&&s.jsx("div",{className:"text-sm text-red-600 mb-3",children:i}),s.jsx("button",{type:"submit",disabled:o,className:"w-full py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-medium disabled:opacity-60",children:o?"Signing in…":"Sign in"}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-3",children:"Local demo credentials: admin / CastellanAdmin2024!"})]})})}function mf(e){switch(e){case"CRITICAL":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"HIGH":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";case"MEDIUM":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"LOW":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}}const Ib=({event:e,isOpen:t,onClose:r})=>{if(!t||!e)return null;const n=(e.riskLevel||e.level||"MEDIUM").toUpperCase(),a=(e.status||"Open").toUpperCase(),i=(e.correlationScore||0)>0;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:r,children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:l=>l.stopPropagation(),children:[s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Le,{className:"h-6 w-6 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e.eventType||"Security Event"}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 font-mono",children:["ID: ",e.id]})]})]}),s.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(cl,{className:"h-6 w-6"})})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Risk Level"}),s.jsx("div",{className:"mt-1",children:s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${mf(n)}`,children:n})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white font-medium",children:a})]}),e.eventId&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Event ID"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white font-mono",children:e.eventId})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[s.jsx(ud,{className:"h-4 w-4"}),"Timestamp"]}),s.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:new Date(e.timestamp||Date.now()).toLocaleString()})]}),e.source&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Source"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:e.source})]})]})]}),e.message&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Message"}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:s.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:e.message})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"System Information"}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.machine&&s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm font-medium text-blue-600 dark:text-blue-400 flex items-center gap-2",children:[s.jsx(Rv,{className:"h-4 w-4"}),"Machine"]}),s.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white font-mono",children:e.machine})]}),e.user&&s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm font-medium text-green-600 dark:text-green-400 flex items-center gap-2",children:[s.jsx(uf,{className:"h-4 w-4"}),"User"]}),s.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:e.user})]})]})]}),e.mitreAttack&&e.mitreAttack.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"MITRE ATT&CK Techniques"}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:e.mitreAttack.map((l,o)=>s.jsx("span",{className:"px-3 py-1 bg-purple-100 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 text-sm rounded border border-purple-200 dark:border-purple-800",children:l},o))})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Threat Analysis"}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Confidence"}),s.jsxs("p",{className:"mt-1 text-lg font-bold text-gray-900 dark:text-white",children:[Math.round(e.confidence||0),"%"]})]}),i&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Correlation"}),s.jsx("p",{className:"mt-1 text-lg font-bold text-blue-600 dark:text-blue-400",children:(e.correlationScore||0).toFixed(2)})]}),(e.burstScore||0)>0&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Burst"}),s.jsx("p",{className:"mt-1 text-lg font-bold text-orange-600 dark:text-orange-400",children:(e.burstScore||0).toFixed(2)})]}),(e.anomalyScore||0)>0&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Anomaly"}),s.jsx("p",{className:"mt-1 text-lg font-bold text-red-600 dark:text-red-400",children:(e.anomalyScore||0).toFixed(2)})]})]})})]}),e.ipAddresses&&e.ipAddresses.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[s.jsx(lf,{className:"h-5 w-5"}),"IP Addresses"]}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:e.ipAddresses.map((l,o)=>s.jsx("span",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm rounded font-mono border",children:l},o))})})]}),e.notes&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Notes"}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:s.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:e.notes})})]}),e.assignedTo&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Assignment"}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:s.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["Assigned to: ",s.jsx("span",{className:"font-medium",children:e.assignedTo})]})})]})]})]})})};function Rb(){const{token:e,loading:t}=et(),r=Qe(),n=xt(),{hub:a}=ja(),[i,l]=y.useState(null),[o,c]=y.useState(!1);y.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]);const d=be({queryKey:["security-events",{limit:25}],queryFn:()=>Te.getRecentSecurityEvents(25),refetchInterval:3e4,enabled:!t&&!!e}),h=be({queryKey:["dashboard","consolidated","24h"],queryFn:()=>Te.getDashboardConsolidated("24h"),refetchInterval:3e4,enabled:!t&&!!e,staleTime:15e3});y.useEffect(()=>{a&&a.on("SecurityEvent",()=>{n.invalidateQueries({queryKey:["security-events"]})})},[a,n]);const u=y.useMemo(()=>{const x=d.data||{};return Array.isArray(x)?x:x.data||[]},[d.data]),m=y.useMemo(()=>{var I;const x=h.data||{},k=x.data&&typeof x.data=="object"?x.data:x,w=k.securityEvents||k.SecurityEvents||{},j=w.totalEvents||w.TotalEvents,g=((I=d.data)==null?void 0:I.total)??0,f=(u==null?void 0:u.length)||0,p=g>0?g:typeof j=="number"?j:f,b=w.riskLevelCounts||w.RiskLevelCounts||{},N=b.CRITICAL??b.critical??b.Critical;let T=0,S=0;u==null||u.forEach(A=>{const V=(A.status||"").toUpperCase();(V==="OPEN"||V==="INVESTIGATING")&&T++,S+=A.riskScore||0});const E=((u==null?void 0:u.length)??0)>0?Math.round(S/((u==null?void 0:u.length)??1)):0,D=typeof N=="number"?N:(u==null?void 0:u.filter(A=>(A.severity||"").toUpperCase()==="CRITICAL").length)??0;return{total:p,open:T,critical:D,avgRisk:E}},[u,d.data,h.data]);return d.isLoading?s.jsx(Kr,{}):s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-8 py-6 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Security Events"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Real-time threat detection and incident response"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Na,{}),s.jsx("button",{className:"px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Filters"})]})]})}),s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx(jt,{title:"Total Events",value:m.total,icon:ds,color:"blue",description:"All security events detected"}),s.jsx(jt,{title:"Open Events",value:m.open,icon:Ut,color:m.critical>0?"red":"yellow",description:"Events requiring attention"}),s.jsx(jt,{title:"Critical Threats",value:m.critical,icon:Le,color:"red",description:"High-priority security incidents"}),s.jsx(jt,{title:"Average Risk",value:m.avgRisk,icon:ds,color:m.avgRisk>=75?"red":m.avgRisk>=50?"yellow":"green",description:"Mean risk score across all events"})]}),s.jsxs("div",{className:"space-y-5",children:[d.isLoading&&s.jsx("div",{className:"space-y-3",children:[...Array(4)].map((x,k)=>s.jsx("div",{className:"h-28 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 animate-pulse"},k))}),!d.isLoading&&(u==null?void 0:u.map(x=>{const k=(x.riskLevel||x.level||"MEDIUM").toUpperCase(),w=(x.status||"Open").toUpperCase(),j=(x.correlationScore||0)>0;return s.jsx("div",{onClick:()=>{l(x),c(!0)},className:"rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-5 cursor-pointer hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-600 transition-all duration-200",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[s.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${mf(k)}`,children:k}),s.jsx("div",{className:"text-gray-900 dark:text-gray-100 font-semibold",children:x.eventType||"Security Event"}),x.eventId&&s.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded font-mono",children:["Event ",x.eventId]}),j&&s.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 rounded-full flex items-center gap-1",children:"🔗 Correlated"}),w&&s.jsx("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-400",children:w}),s.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500 font-mono ml-auto",children:[x.id.substring(0,8),"..."]})]}),s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-3",children:x.message||"—"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-3 text-xs",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Machine:"})," ",s.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:x.machine||"—"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"User:"})," ",s.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:x.user||"—"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Source:"})," ",s.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:x.source||"—"})]})]}),x.mitreAttack&&x.mitreAttack.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mr-2",children:"MITRE:"}),s.jsx("div",{className:"inline-flex flex-wrap gap-1",children:x.mitreAttack.map((g,f)=>s.jsx("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200 rounded",children:g},f))})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-gray-400"}),new Date(x.timestamp||Date.now()).toLocaleString()]}),s.jsxs("div",{children:["Confidence: ",s.jsxs("span",{className:"text-gray-900 dark:text-gray-100 font-semibold",children:[Math.round(x.confidence||0),"%"]})]}),j&&s.jsxs("div",{children:["Correlation: ",s.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold",children:(x.correlationScore||0).toFixed(2)})]}),(x.burstScore||0)>0&&s.jsxs("div",{children:["Burst: ",s.jsx("span",{className:"text-orange-600 dark:text-orange-400 font-semibold",children:(x.burstScore||0).toFixed(2)})]}),(x.anomalyScore||0)>0&&s.jsxs("div",{children:["Anomaly: ",s.jsx("span",{className:"text-red-600 dark:text-red-400 font-semibold",children:(x.anomalyScore||0).toFixed(2)})]})]}),x.ipAddresses&&x.ipAddresses.length>0&&s.jsxs("div",{className:"mt-2 text-xs",children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400 mr-2",children:"IPs:"}),x.ipAddresses.slice(0,3).map((g,f)=>s.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-mono mr-2",children:g},f)),x.ipAddresses.length>3&&s.jsxs("span",{className:"text-gray-500",children:["+",x.ipAddresses.length-3," more"]})]})]})})},x.id)}))]})]}),s.jsx(Ib,{event:i,isOpen:o,onClose:()=>c(!1)})]})}function Mb(e){switch(e){case"CRITICAL":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200 border-red-300";case"HIGH":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200 border-orange-300";case"MEDIUM":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200 border-yellow-300";case"LOW":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 border-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200 border-gray-300"}}function Db(){const{id:e}=Sx(),t=Qe(),{token:r,loading:n}=et();y.useEffect(()=>{!n&&!r&&t("/login")},[r,n,t]);const a=be({queryKey:["security-event",e],queryFn:async()=>{const c=await fetch(`/api/security-events/${e}`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!c.ok)throw new Error("Failed to fetch event");const d=await c.json();return d.data||d},enabled:!n&&!!r&&!!e}),i=a.data,l=((i==null?void 0:i.riskLevel)||(i==null?void 0:i.level)||"MEDIUM").toUpperCase(),o=((i==null?void 0:i.correlationScore)||0)>0;return a.isLoading?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading event details..."})]})}):a.isError||!i?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ut,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Event Not Found"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"The security event you're looking for doesn't exist."}),s.jsx("button",{onClick:()=>t("/security-events"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Back to Events"})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-8 py-6",children:[s.jsxs("button",{onClick:()=>t("/security-events"),className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white mb-4",children:[s.jsx(Nv,{className:"h-4 w-4"}),"Back to Security Events"]}),s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold border ${Mb(l)}`,children:l}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:i.eventType||"Security Event"}),o&&s.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 rounded-full text-sm flex items-center gap-1",children:"🔗 Correlated Event"})]}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Event ID: ",e]})]})})]})}),s.jsx("div",{className:"p-8 max-w-7xl mx-auto",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Event Summary"}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:i.message||"No message available"})]}),i.mitreAttack&&i.mitreAttack.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"MITRE ATT&CK Techniques"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:i.mitreAttack.map((c,d)=>s.jsx("div",{className:"px-3 py-2 bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200 rounded-lg border border-purple-200 dark:border-purple-800",children:c},d))})]}),i.ipAddresses&&i.ipAddresses.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"IP Addresses"}),s.jsx("div",{className:"space-y-2",children:i.ipAddresses.map((c,d)=>{var u;const h=(u=i.enrichedIPs)==null?void 0:u.find(m=>m.IP===c||m.ip===c);return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[s.jsx("span",{className:"font-mono text-gray-900 dark:text-white",children:c}),h&&s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[h.country&&s.jsx("span",{children:h.country}),h.city&&s.jsx("span",{children:h.city}),h.isHighRisk&&s.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200 rounded text-xs font-semibold",children:"High Risk"})]})]},d)})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Event Details"}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Timestamp"}),s.jsx("p",{className:"text-gray-900 dark:text-white font-medium mt-1",children:i.timestamp?new Date(i.timestamp).toLocaleString():"—"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Machine"}),s.jsx("p",{className:"text-gray-900 dark:text-white font-medium mt-1",children:i.machine||"—"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"User"}),s.jsx("p",{className:"text-gray-900 dark:text-white font-medium mt-1",children:i.user||"—"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Source"}),s.jsx("p",{className:"text-gray-900 dark:text-white font-medium mt-1",children:i.source||"—"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Windows Event ID"}),s.jsx("p",{className:"text-gray-900 dark:text-white font-medium mt-1 font-mono",children:i.eventId||"—"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Status"}),s.jsx("p",{className:"text-blue-600 dark:text-blue-400 font-medium mt-1",children:i.status||"Open"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Analysis Scores"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Confidence"}),s.jsxs("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[Math.round(i.confidence||0),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${i.confidence||0}%`}})})]}),o&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Correlation"}),s.jsx("span",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:(i.correlationScore||0).toFixed(2)})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.min((i.correlationScore||0)*100,100)}%`}})})]}),(i.burstScore||0)>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Burst"}),s.jsx("span",{className:"text-sm font-semibold text-orange-600 dark:text-orange-400",children:(i.burstScore||0).toFixed(2)})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:`${Math.min((i.burstScore||0)*100,100)}%`}})})]}),(i.anomalyScore||0)>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Anomaly"}),s.jsx("span",{className:"text-sm font-semibold text-red-600 dark:text-red-400",children:(i.anomalyScore||0).toFixed(2)})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-red-600 h-2 rounded-full",style:{width:`${Math.min((i.anomalyScore||0)*100,100)}%`}})})]})]})]})]})]})})]})}function nh(e){return e.toISOString()}function sh(e){return e.toString().padStart(2,"0")}function Lb(e){const t=new Date(e);return`${t.getMonth()+1}/${t.getDate()}/${t.getFullYear()}, ${(t.getHours()+11)%12+1}:${sh(t.getMinutes())}:${sh(t.getSeconds())} ${t.getHours()>=12?"PM":"AM"}`}function Fb(){const{token:e,loading:t}=et(),r=Qe(),n=xt(),{hub:a}=ja();y.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]);const[i,l]=y.useState("hour"),[o,c]=y.useState(()=>{const b=new Date;return b.setHours(b.getHours()-24),b}),[d,h]=y.useState(()=>new Date),u=y.useMemo(()=>nh(o),[o]),m=y.useMemo(()=>nh(d),[d]),x=be({queryKey:["timeline",i,u,m],queryFn:async()=>{const b=await Te.getTimeline(i,u,m);return Array.isArray(b)?b:b.data||[]},enabled:!t&&!!e}),k=be({queryKey:["timeline-stats",u,m],queryFn:()=>Te.getTimelineStats(u,m),enabled:!t&&!!e});y.useEffect(()=>{a&&a.on("SecurityEvent",()=>{n.invalidateQueries({queryKey:["timeline"]}),n.invalidateQueries({queryKey:["timeline-stats"]})})},[a,n]);const w=y.useMemo(()=>(x.data||[]).map(N=>({label:Lb(N.timestamp),count:N.count})),[x.data]),j=(()=>{const b=k.data||{};return b.total??b.totalEvents??w.reduce((N,T)=>N+T.count,0)})(),g=(()=>{const N=(k.data||{}).eventsByRiskLevel||{};return{critical:N.Critical??N.critical??0,high:N.High??N.high??0,medium:N.Medium??N.medium??0,low:N.Low??N.low??0,info:N.Info??N.info??0}})(),f=(()=>{const N=(k.data||{}).eventsByType||{};return Object.entries(N).map(([T,S])=>({type:T,count:S})).sort((T,S)=>S.count-T.count).slice(0,5)})(),p=()=>{};return y.useEffect(()=>{},[]),x.isLoading?s.jsx(Kr,{}):s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-8 py-6 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Timeline"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Security events over time (24-hour rolling window)"})]}),s.jsx(Na,{})]})}),s.jsxs("div",{className:"p-8 pt-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 mb-6 flex items-end gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400",children:"Granularity"}),s.jsxs("select",{value:i,onChange:b=>l(b.target.value),className:"mt-1 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-sm",children:[s.jsx("option",{value:"day",children:"Day"}),s.jsx("option",{value:"hour",children:"Hour"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400",children:"From"}),s.jsx("input",{type:"datetime-local",value:new Date(o).toISOString().slice(0,16),onChange:b=>c(new Date(b.target.value)),className:"mt-1 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400",children:"To"}),s.jsx("input",{type:"datetime-local",value:new Date(d).toISOString().slice(0,16),onChange:b=>h(new Date(b.target.value)),className:"mt-1 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-sm"})]}),s.jsx("button",{onClick:p,className:"h-9 px-4 rounded-lg bg-blue-600 hover:bg-blue-700 text-white text-sm",children:"REFRESH"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Security Events Over Time"}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:["Granularity: ",i]}),s.jsxs("div",{className:"space-y-3",children:[x.isLoading&&[...Array(4)].map((b,N)=>s.jsx("div",{className:"h-5 rounded bg-gray-200 dark:bg-gray-700 animate-pulse"},N)),!x.isLoading&&w.map((b,N)=>s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-72 text-sm text-gray-700 dark:text-gray-300",children:b.label}),s.jsx("div",{className:"flex-1",children:s.jsx("div",{className:"h-3 w-full bg-gray-200 dark:bg-gray-700 rounded-full",children:s.jsx("div",{className:"h-3 bg-blue-600 rounded-full",style:{width:`${Math.min(100,b.count/Math.max(1,Math.max(...w.map(T=>T.count)))*100)}%`}})})}),s.jsx("div",{className:"w-10 text-right text-sm text-gray-600 dark:text-gray-400",children:b.count})]},N))]})]})}),s.jsx("div",{children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Summary"}),k.isLoading?s.jsx("div",{className:"space-y-3",children:[...Array(4)].map((b,N)=>s.jsx("div",{className:"h-5 rounded bg-gray-200 dark:bg-gray-700 animate-pulse"},N))}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-3",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Total Events"}),s.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:j.toLocaleString()})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[g.critical>0&&s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"h-2 w-2 rounded-full bg-red-500"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Critical"})]}),s.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:g.critical})]}),g.high>0&&s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"h-2 w-2 rounded-full bg-orange-500"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"High"})]}),s.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:g.high})]}),g.medium>0&&s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"h-2 w-2 rounded-full bg-yellow-500"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Medium"})]}),s.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:g.medium})]}),g.low>0&&s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"h-2 w-2 rounded-full bg-green-500"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Low"})]}),s.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:g.low})]}),g.info>0&&s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"h-2 w-2 rounded-full bg-blue-500"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Info"})]}),s.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:g.info})]})]})]}),f.length>0&&s.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Top Event Types"}),s.jsx("div",{className:"space-y-2 text-sm",children:f.map(({type:b,count:N})=>s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400 truncate mr-2",children:b}),s.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium whitespace-nowrap",children:N})]},b))})]})]})]})})]})]})]})}const Ab={reconnaissance:"bg-blue-100 text-blue-800 border-blue-200","resource-development":"bg-purple-100 text-purple-800 border-purple-200","initial-access":"bg-yellow-100 text-yellow-800 border-yellow-200",execution:"bg-red-100 text-red-800 border-red-200",persistence:"bg-red-100 text-red-800 border-red-200","privilege-escalation":"bg-red-100 text-red-800 border-red-200","defense-evasion":"bg-yellow-100 text-yellow-800 border-yellow-200","credential-access":"bg-red-100 text-red-800 border-red-200",discovery:"bg-blue-100 text-blue-800 border-blue-200","lateral-movement":"bg-yellow-100 text-yellow-800 border-yellow-200",collection:"bg-blue-100 text-blue-800 border-blue-200","command-and-control":"bg-yellow-100 text-yellow-800 border-yellow-200",exfiltration:"bg-red-100 text-red-800 border-red-200",impact:"bg-red-100 text-red-800 border-red-200"},pf=e=>{const t=(e==null?void 0:e.toLowerCase().replace(/\s+/g,"-"))||"";return Ab[t]||"bg-gray-100 text-gray-800 border-gray-200"},Ob=async e=>Te.getMitreTechniques(e),$b=async()=>Te.getMitreStatistics(),Ub=({technique:e,onClick:t})=>{var n;const r=((n=e.platform)==null?void 0:n.split(",").map(a=>a.trim()))||[];return s.jsxs("div",{onClick:t,className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",children:[s.jsx("div",{className:"flex items-start justify-between mb-3",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("span",{className:"text-sm font-mono text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 px-2 py-1 rounded",children:e.techniqueId}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${pf(e.tactic)}`,children:e.tactic})]}),s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2 line-clamp-2",children:e.name}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2",children:e.description})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex flex-wrap gap-1",children:[r.slice(0,3).map((a,i)=>s.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-xs rounded",children:a},i)),r.length>3&&s.jsxs("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-xs rounded",children:["+",r.length-3," more"]})]}),s.jsx(af,{className:"h-4 w-4 text-gray-400"})]})]})},zb=({technique:e,isOpen:t,onClose:r})=>{var o;if(!t||!e)return null;const n=((o=e.platform)==null?void 0:o.split(",").map(c=>c.trim()))||[],a=e.dataSources||[],i=e.mitigations||[],l=e.examples||[];return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Le,{className:"h-6 w-6 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e.techniqueId}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:e.name})]})]}),s.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(cl,{className:"h-6 w-6"})})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Tactic"}),s.jsx("div",{className:"mt-1",children:s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium border ${pf(e.tactic)}`,children:e.tactic})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Platforms"}),s.jsx("div",{className:"mt-1 flex flex-wrap gap-2",children:n.map((c,d)=>s.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm rounded",children:c},d))})]})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Added to Database"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:new Date(e.createdAt).toLocaleString()})]})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Description"}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:s.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-wrap",children:e.description||"No description available"})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Technical Details"}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-600 dark:text-blue-400 mb-2",children:"Data Sources"}),a.length>0?s.jsx("div",{className:"flex flex-wrap gap-2",children:a.map((c,d)=>s.jsx("span",{className:"px-2 py-1 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 text-sm rounded border border-blue-200 dark:border-blue-800",children:c},d))}):s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.dataSources||"No data sources specified"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-green-600 dark:text-green-400 mb-2",children:"Mitigations"}),i.length>0?s.jsx("div",{className:"flex flex-wrap gap-2",children:i.map((c,d)=>s.jsx("span",{className:"px-2 py-1 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 text-sm rounded border border-green-200 dark:border-green-800",children:c},d))}):s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.mitigations||"No mitigations specified"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-purple-600 dark:text-purple-400 mb-2",children:"Examples"}),l.length>0?s.jsx("div",{className:"flex flex-wrap gap-2",children:l.map((c,d)=>s.jsx("span",{className:"px-2 py-1 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 text-sm rounded border border-purple-200 dark:border-purple-800",children:c},d))}):s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.examples||"No examples specified"})]})]})]}),e.associatedApplications&&e.associatedApplications.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Associated Applications"}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:e.associatedApplications.map((c,d)=>s.jsxs("span",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm rounded border",children:[c.ApplicationName," (",c.Confidence,"%)"]},d))})})]})]})]})})},Bb=()=>{var E,D,I;const{token:e,loading:t}=et(),r=Qe(),[n,a]=y.useState(null),[i,l]=y.useState(!1),[o,c]=y.useState(""),[d,h]=y.useState(""),[u,m]=y.useState(""),[x,k]=y.useState(1);y.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]);const w=be({queryKey:["mitre-techniques",x,o,d,u],queryFn:async()=>{console.log("[MitreAttack] Fetching techniques with params:",{page:x,perPage:25,search:o||void 0,tactic:d||void 0,platform:u||void 0});const A=await Ob({page:x,perPage:25,search:o||void 0,tactic:d||void 0,platform:u||void 0,sort:"techniqueId",order:"ASC"});console.log("[MitreAttack] Raw API response:",A);const V=A.techniques||A.data||[],X=A.totalCount||A.total||V.length;return console.log("[MitreAttack] Parsed techniques:",V.length,"Total:",X),{techniques:V.map(L=>({...L,id:L.id||L.techniqueId})),totalCount:X,totalPages:Math.ceil(X/25)}},enabled:!t&&!!e,staleTime:5*60*1e3,gcTime:30*60*1e3}),j=be({queryKey:["mitre-statistics"],queryFn:$b,enabled:!t&&!!e,staleTime:10*60*1e3,gcTime:30*60*1e3}),g=((E=w.data)==null?void 0:E.techniques)||[],f=((D=w.data)==null?void 0:D.totalCount)||0,p=((I=w.data)==null?void 0:I.totalPages)||1,b=j.data||null,N=w.isLoading,T=w.error?w.error.message:null,S=A=>{a(A),l(!0)};return N?s.jsx(Kr,{}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"MITRE ATT&CK Techniques"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Threat Intelligence Database"})]}),b&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Database Statistics"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ar,{className:"h-4 w-4 text-green-500"}),s.jsx("span",{className:"text-sm text-gray-500",children:"Cached"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:b.totalTechniques}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Total Techniques"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Last Updated"}),s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:b.lastUpdated?new Date(b.lastUpdated).toLocaleString():"Unknown"})]}),s.jsx("div",{children:s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"⚡ Instant load from cache"})})]}),b.shouldImport&&s.jsx("div",{className:"mt-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Li,{className:"h-5 w-5 text-blue-600 mr-2 mt-0.5"}),s.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:"The MITRE database appears to be empty or outdated. Consider importing the latest techniques."})]})})]}),s.jsx("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(il,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search techniques...",value:o,onChange:A=>c(A.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{value:d,onChange:A=>h(A.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"All Tactics"}),s.jsx("option",{value:"reconnaissance",children:"Reconnaissance"}),s.jsx("option",{value:"resource-development",children:"Resource Development"}),s.jsx("option",{value:"initial-access",children:"Initial Access"}),s.jsx("option",{value:"execution",children:"Execution"}),s.jsx("option",{value:"persistence",children:"Persistence"}),s.jsx("option",{value:"privilege-escalation",children:"Privilege Escalation"}),s.jsx("option",{value:"defense-evasion",children:"Defense Evasion"}),s.jsx("option",{value:"credential-access",children:"Credential Access"}),s.jsx("option",{value:"discovery",children:"Discovery"}),s.jsx("option",{value:"lateral-movement",children:"Lateral Movement"}),s.jsx("option",{value:"collection",children:"Collection"}),s.jsx("option",{value:"command-and-control",children:"Command and Control"}),s.jsx("option",{value:"exfiltration",children:"Exfiltration"}),s.jsx("option",{value:"impact",children:"Impact"})]}),s.jsxs("select",{value:u,onChange:A=>m(A.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"All Platforms"}),s.jsx("option",{value:"Windows",children:"Windows"}),s.jsx("option",{value:"Linux",children:"Linux"}),s.jsx("option",{value:"macOS",children:"macOS"}),s.jsx("option",{value:"Network",children:"Network"}),s.jsx("option",{value:"Cloud",children:"Cloud"}),s.jsx("option",{value:"Mobile",children:"Mobile"})]})]})]})}),T&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(zr,{className:"h-5 w-5 text-red-600 mr-2"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading techniques"}),s.jsx("p",{className:"text-sm text-red-700 mt-1",children:T}),s.jsx("p",{className:"text-xs text-red-600 mt-2",children:"Check the browser console for more details. Make sure the backend API is running on port 5000."})]})]})}),N?s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx(ca,{className:"h-8 w-8 animate-spin text-blue-600"}),s.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading techniques..."})]}):g.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ll,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No techniques found"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:o||d||u?"Try adjusting your search or filters":"No MITRE techniques are available. Consider importing them."}),!o&&!d&&!u&&s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["To import techniques, go to ",s.jsx("button",{onClick:()=>r("/configuration"),className:"text-blue-600 hover:underline",children:"Configuration → MITRE Techniques"})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(A=>s.jsx(Ub,{technique:A,onClick:()=>S(A)},A.id))}),p>1&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Showing ",(x-1)*25+1," to ",Math.min(x*25,f)," of ",f," techniques"]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>k(A=>Math.max(1,A-1)),disabled:x===1,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),s.jsxs("span",{className:"px-3 py-1 text-gray-700 dark:text-gray-300",children:["Page ",x," of ",p]}),s.jsx("button",{onClick:()=>k(A=>Math.min(p,A+1)),disabled:x===p,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}),s.jsx(zb,{technique:n,isOpen:i,onClose:()=>l(!1)})]})},xf=[{id:"Malware",name:"Malware"},{id:"Ransomware",name:"Ransomware"},{id:"Trojan",name:"Trojan"},{id:"Backdoor",name:"Backdoor"},{id:"Suspicious",name:"Suspicious"},{id:"PUA",name:"Potentially Unwanted Application"},{id:"Exploit",name:"Exploit"},{id:"Custom",name:"Custom"}],Hb=[{id:"Low",name:"Low"},{id:"Medium",name:"Medium"},{id:"High",name:"High"},{id:"Critical",name:"Critical"}],yf=e=>{switch(e==null?void 0:e.toLowerCase()){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},qb=async e=>Te.getMalwareRules(e),Qb=async()=>Te.getMalwareStatistics(),Wb=async(e,t)=>Te.toggleMalwareRule(e,t),Kb=async e=>Te.deleteMalwareRule(e),Vb=async e=>Te.importMalwareRules(e),Gb=({isOpen:e,onClose:t,importMutation:r})=>{const[n,a]=y.useState(""),[i,l]=y.useState("Custom"),[o,c]=y.useState("Imported"),[d,h]=y.useState(!0),[u,m]=y.useState(!1),[x,k]=y.useState(null),w=g=>{var p;const f=(p=g.target.files)==null?void 0:p[0];if(f){const b=new FileReader;b.onload=N=>{var T;a((T=N.target)==null?void 0:T.result)},b.readAsText(f)}},j=async()=>{if(!n.trim()){alert("Please enter or upload rule content");return}k(null);try{const g=await r.mutateAsync({ruleContent:n,category:i,author:o,skipDuplicates:d,enableByDefault:u});k(g.data||g)}catch(g){k({success:!1,message:g.message,details:g.toString()})}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Import Malware Rules"})}),s.jsx("div",{className:"p-6 space-y-4",children:r.isPending?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(ca,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-blue-600"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Importing malware rules..."})]}):x?s.jsx("div",{className:"space-y-4",children:x.success!==!1?s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ar,{className:"h-5 w-5 text-green-600 mr-2"}),s.jsx("h3",{className:"text-lg font-medium text-green-800",children:"Import Successful!"})]}),s.jsxs("div",{className:"mt-2 text-sm text-green-700",children:[s.jsxs("p",{children:["• ",x.importedCount||0," rules imported"]}),s.jsxs("p",{children:["• ",x.skippedCount||0," rules skipped"]}),s.jsxs("p",{children:["• ",x.failedCount||0," rules failed"]})]})]}):s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(zr,{className:"h-5 w-5 text-red-600 mr-2"}),s.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Import Failed"})]}),s.jsx("p",{className:"mt-2 text-sm text-red-700",children:x.message})]})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Default Category"}),s.jsx("select",{value:i,onChange:g=>l(g.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:xf.map(g=>s.jsx("option",{value:g.id,children:g.name},g.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Default Author"}),s.jsx("input",{type:"text",value:o,onChange:g=>c(g.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:d,onChange:g=>h(g.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Skip Duplicates"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:u,onChange:g=>m(g.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Enable Rules by Default"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Upload Malware File"}),s.jsx("input",{type:"file",accept:".yar,.yara,.txt",onChange:w,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Malware Rules Content"}),s.jsx("textarea",{value:n,onChange:g=>a(g.target.value),rows:10,placeholder:"Paste malware rules here or upload a file...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm"})]})]})}),s.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3",children:[s.jsx("button",{onClick:t,disabled:r.isPending,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg disabled:opacity-50",children:x?"Close":"Cancel"}),!x&&s.jsxs("button",{onClick:j,disabled:r.isPending,className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg disabled:opacity-50 flex items-center",children:[s.jsx(sc,{className:"h-4 w-4 mr-2"}),"Import"]})]})]})}):null},Xb=({rule:e,isOpen:t,onClose:r,onToggle:n,onDelete:a})=>!t||!e?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e.name}),s.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${yf(e.threatLevel)}`,children:e.threatLevel}),s.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-xs rounded",children:e.category}),e.isValid?s.jsxs("span",{className:"flex items-center text-xs text-green-600",children:[s.jsx(ar,{className:"h-3 w-3 mr-1"}),"Valid"]}):s.jsxs("span",{className:"flex items-center text-xs text-red-600",children:[s.jsx(_r,{className:"h-3 w-3 mr-1"}),"Invalid"]}),e.isEnabled?s.jsxs("span",{className:"flex items-center text-xs text-blue-600",children:[s.jsx(nc,{className:"h-3 w-3 mr-1"}),"Enabled"]}):s.jsxs("span",{className:"flex items-center text-xs text-gray-500",children:[s.jsx(rc,{className:"h-3 w-3 mr-1"}),"Disabled"]})]})]}),s.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(cl,{className:"h-6 w-6"})})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Author"}),s.jsx("p",{className:"mt-1 text-gray-900 dark:text-white",children:e.author||"Unknown"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Priority"}),s.jsx("p",{className:"mt-1 text-gray-900 dark:text-white",children:e.priority||0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Hit Count"}),s.jsx("p",{className:"mt-1 text-gray-900 dark:text-white",children:e.hitCount||0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Last Match"}),s.jsx("p",{className:"mt-1 text-gray-900 dark:text-white",children:e.lastMatch?new Date(e.lastMatch).toLocaleString():"Never"})]})]}),e.tags&&e.tags.length>0&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Tags"}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:e.tags.map((i,l)=>s.jsx("span",{className:"px-2 py-1 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 text-sm rounded border border-blue-200 dark:border-blue-800",children:i},l))})]}),e.description&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),s.jsx("p",{className:"mt-1 text-gray-700 dark:text-gray-300",children:e.description})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Rule Content"}),s.jsx("pre",{className:"mt-2 p-4 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg overflow-x-auto text-sm font-mono text-gray-900 dark:text-gray-100",children:e.ruleContent})]}),!e.isValid&&e.validationError&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(zr,{className:"h-5 w-5 text-red-600 mr-2 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-red-800",children:"Validation Error"}),s.jsx("p",{className:"text-sm text-red-700 mt-1",children:e.validationError})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Created"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:new Date(e.createdAt).toLocaleString()})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Updated"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:new Date(e.updatedAt).toLocaleString()})]})]})]}),s.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-between",children:[s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>n(e.id,!e.isEnabled),className:`px-4 py-2 rounded-lg flex items-center ${e.isEnabled?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-blue-600 text-white hover:bg-blue-700"}`,children:e.isEnabled?s.jsxs(s.Fragment,{children:[s.jsx(rc,{className:"h-4 w-4 mr-2"}),"Disable"]}):s.jsxs(s.Fragment,{children:[s.jsx(nc,{className:"h-4 w-4 mr-2"}),"Enable"]})}),s.jsxs("button",{onClick:()=>{confirm("Are you sure you want to delete this rule?")&&(a(e.id),r())},className:"px-4 py-2 bg-red-600 text-white hover:bg-red-700 rounded-lg flex items-center",children:[s.jsx(ol,{className:"h-4 w-4 mr-2"}),"Delete"]})]}),s.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:"Close"})]})]})}),Yb=({rule:e,onClick:t,onToggle:r})=>s.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1 cursor-pointer",onClick:t,children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e.name}),e.isValid?s.jsx(ar,{className:"h-4 w-4 text-green-500"}):s.jsx(_r,{className:"h-4 w-4 text-red-500"})]}),s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${yf(e.threatLevel)}`,children:e.threatLevel}),s.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-xs rounded",children:e.category})]}),e.description&&s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2 mb-2",children:e.description}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{children:["Hits: ",e.hitCount||0]}),s.jsxs("span",{children:["Updated: ",new Date(e.updatedAt).toLocaleDateString()]})]})]}),s.jsx("button",{onClick:n=>{n.stopPropagation(),r(e.id,!e.isEnabled)},className:`ml-4 p-2 rounded-lg ${e.isEnabled?"bg-blue-50 text-blue-600 hover:bg-blue-100":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:e.isEnabled?s.jsx(nc,{className:"h-4 w-4"}):s.jsx(rc,{className:"h-4 w-4"})})]})}),Jb=()=>{var H,ne,he,Vr;const{token:e,loading:t}=et(),r=Qe(),n=xt(),[a,i]=y.useState(!1),[l,o]=y.useState(null),[c,d]=y.useState(!1),[h,u]=y.useState(""),[m,x]=y.useState(""),[k,w]=y.useState(""),[j,g]=y.useState(void 0),[f,p]=y.useState(1),b=25;y.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),y.useEffect(()=>{p(1)},[h,m,k,j]);const N=be({queryKey:["malware-rules",f,h,m,k,j],queryFn:async()=>{const $=await qb({page:f,perPage:b,search:h||void 0,category:m||void 0,threatLevel:k||void 0,isEnabled:j}),Y=$.data||$.rules||[],tt=$.total||$.totalCount||Y.length,Gr=$.pageSize||$.perPage||Y.length||b;return{rules:Y,totalCount:tt,totalPages:Math.ceil(tt/Gr),pageSize:Gr}},enabled:!t&&!!e,staleTime:5*60*1e3,gcTime:30*60*1e3}),T=be({queryKey:["malware-statistics"],queryFn:async()=>{const $=await Qb();console.log("[MalwareRules] Statistics response:",$);const Y=$.data||$,tt={totalRules:Y.totalRules||Y.TotalRules||0,enabledRules:Y.enabledRules||Y.EnabledRules||0,disabledRules:Y.disabledRules||Y.DisabledRules||0,validRules:Y.validRules||Y.ValidRules||0,invalidRules:Y.invalidRules||Y.InvalidRules||0,rulesByCategory:Y.rulesByCategory||Y.RulesByCategory||{},rulesByThreatLevel:Y.rulesByThreatLevel||Y.RulesByThreatLevel||{},topPerformingRules:Y.topPerformingRules||Y.TopPerformingRules||[],slowestRules:Y.slowestRules||Y.SlowestRules||[]};return console.log("[MalwareRules] Mapped statistics:",tt),tt},enabled:!t&&!!e,staleTime:10*60*1e3,gcTime:30*60*1e3}),S=$t({mutationFn:({id:$,enabled:Y})=>Wb($,Y),onSuccess:()=>{n.invalidateQueries({queryKey:["malware-rules"]}),n.invalidateQueries({queryKey:["malware-statistics"]})},onError:$=>{alert(`Failed to toggle rule: ${$.message}`)}}),E=$t({mutationFn:Kb,onSuccess:()=>{n.invalidateQueries({queryKey:["malware-rules"]}),n.invalidateQueries({queryKey:["malware-statistics"]})},onError:$=>{alert(`Failed to delete rule: ${$.message}`)}}),D=$t({mutationFn:Vb,onSuccess:()=>{n.invalidateQueries({queryKey:["malware-rules"]}),n.invalidateQueries({queryKey:["malware-statistics"]})}}),I=($,Y)=>{S.mutate({id:$,enabled:Y})},A=$=>{E.mutate($)},V=((H=N.data)==null?void 0:H.rules)||[],X=((ne=N.data)==null?void 0:ne.totalCount)||0,R=((he=N.data)==null?void 0:he.totalPages)||1,L=((Vr=N.data)==null?void 0:Vr.pageSize)||b,U=T.data||null,me=N.isLoading,C=N.error?N.error.message:null,B=$=>{o($),d(!0)};return me?s.jsx(Kr,{}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Malware Detection"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Detection Rules & Signatures"})]}),U&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Statistics"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-6",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:U.totalRules||0}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Total Rules"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:U.enabledRules||0}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Enabled"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:U.disabledRules||0}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Disabled"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:U.validRules||0}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Valid"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:U.invalidRules||0}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Invalid"})]})]})]}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(il,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search rules...",value:h,onChange:$=>u($.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{value:m,onChange:$=>x($.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"All Categories"}),xf.map($=>s.jsx("option",{value:$.id,children:$.name},$.id))]}),s.jsxs("select",{value:k,onChange:$=>w($.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"All Threat Levels"}),Hb.map($=>s.jsx("option",{value:$.id,children:$.name},$.id))]}),s.jsxs("select",{value:j===void 0?"":j?"true":"false",onChange:$=>g($.target.value===""?void 0:$.target.value==="true"),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"All Status"}),s.jsx("option",{value:"true",children:"Enabled"}),s.jsx("option",{value:"false",children:"Disabled"})]})]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(sc,{className:"h-4 w-4"}),s.jsx("span",{children:"Import"})]})})]}),C&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(zr,{className:"h-5 w-5 text-red-600 mr-2"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading rules"}),s.jsx("p",{className:"text-sm text-red-700 mt-1",children:C})]})]})}),me?s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx(ca,{className:"h-8 w-8 animate-spin text-blue-600"}),s.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading rules..."})]}):V.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Le,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No rules found"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:h||m||k?"Try adjusting your search or filters":"No malware rules are available. Consider importing them."}),!h&&!m&&!k&&s.jsxs("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg flex items-center space-x-2 mx-auto",children:[s.jsx(sc,{className:"h-4 w-4"}),s.jsx("span",{children:"Import Rules"})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:V.map($=>s.jsx(Yb,{rule:$,onClick:()=>B($),onToggle:I},$.id))}),X>0&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Showing ",V.length>0?(f-1)*L+1:0," to ",Math.min((f-1)*L+V.length,X)," of ",X," rules"]}),R>1&&s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>p($=>Math.max(1,$-1)),disabled:f===1,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),s.jsxs("span",{className:"px-3 py-1 text-gray-700 dark:text-gray-300",children:["Page ",f," of ",R]}),s.jsx("button",{onClick:()=>p($=>Math.min(R,$+1)),disabled:f===R,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}),s.jsx(Gb,{isOpen:a,onClose:()=>i(!1),importMutation:D}),s.jsx(Xb,{rule:l,isOpen:c,onClose:()=>d(!1),onToggle:I,onDelete:A})]})};function Zb(){var U,me;const{token:e,loading:t}=et(),r=Qe(),n=xt(),{hub:a}=ja(),[i,l]=y.useState(!1),[o,c]=y.useState(""),[d,h]=y.useState(!1),[u,m]=y.useState(null),[x,k]=y.useState(""),[w,j]=y.useState(""),[g,f]=y.useState("");y.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]);const p=be({queryKey:["threat-scans"],queryFn:()=>Te.getThreatScans(),enabled:!t&&!!e,refetchInterval:5e3}),b=be({queryKey:["scan-progress"],queryFn:()=>Te.getScanProgress(),enabled:!t&&!!e,refetchInterval:2e3});y.useEffect(()=>{var C,B;if((C=b.data)!=null&&C.progress){const H=(B=b.data.progress.status)==null?void 0:B.toLowerCase();h(H==="running"||H==="initializing"),c(b.data.progress.scanType||"Scan")}else h(!1)},[b.data]),y.useEffect(()=>{a&&(a.on("ScanProgressUpdate",()=>{n.invalidateQueries({queryKey:["scan-progress"]})}),a.on("ScanCompleted",()=>{n.invalidateQueries({queryKey:["threat-scans"]}),n.invalidateQueries({queryKey:["scan-progress"]})}))},[a,n]);const N=async()=>{try{await Te.startQuickScan(),c("Quick Scan"),l(!0),n.invalidateQueries({queryKey:["threat-scans"]}),n.invalidateQueries({queryKey:["scan-progress"]})}catch(C){console.error("Failed to start quick scan:",C)}},T=async()=>{try{await Te.startFullScan(),c("Full Scan"),l(!0),n.invalidateQueries({queryKey:["threat-scans"]}),n.invalidateQueries({queryKey:["scan-progress"]})}catch(C){console.error("Failed to start full scan:",C)}},S=async()=>{try{await Te.cancelScan(),n.invalidateQueries({queryKey:["scan-progress"]}),n.invalidateQueries({queryKey:["threat-scans"]}),l(!1)}catch(C){console.error("Failed to cancel scan:",C)}},E=C=>{switch(C==null?void 0:C.toLowerCase()){case"completed":return"text-green-600 bg-green-50 dark:bg-green-900/20 dark:text-green-400";case"completedwiththreats":return"text-orange-600 bg-orange-50 dark:bg-orange-900/20 dark:text-orange-400";case"running":return"text-blue-600 bg-blue-50 dark:bg-blue-900/20 dark:text-blue-400";case"failed":return"text-red-600 bg-red-50 dark:bg-red-900/20 dark:text-red-400";case"cancelled":return"text-gray-600 bg-gray-50 dark:bg-gray-700/20 dark:text-gray-400";default:return"text-gray-600 bg-gray-50 dark:bg-gray-700/20 dark:text-gray-400"}},D=C=>{switch(C==null?void 0:C.toLowerCase()){case"completed":return"Clean";case"completedwiththreats":return"Findings Detected";case"running":return"Scanning";case"failed":return"Failed";case"cancelled":return"Cancelled";default:return C}},I=C=>{switch(C==null?void 0:C.toLowerCase()){case"completed":return s.jsx(ar,{className:"h-4 w-4"});case"completedwiththreats":return s.jsx(Ut,{className:"h-4 w-4"});case"running":return s.jsx(ds,{className:"h-4 w-4 animate-spin"});case"failed":return s.jsx(_r,{className:"h-4 w-4"});case"cancelled":return s.jsx(_r,{className:"h-4 w-4"});default:return s.jsx(Le,{className:"h-4 w-4"})}},A=C=>{switch(C==null?void 0:C.toLowerCase()){case"critical":return"text-red-600 dark:text-red-400";case"high":return"text-orange-600 dark:text-orange-400";case"medium":return"text-yellow-600 dark:text-yellow-400";case"low":return"text-green-600 dark:text-green-400";default:return"text-gray-600 dark:text-gray-400"}},V=C=>C<1?`${Math.round(C*60)}s`:C<60?`${Math.round(C)}m`:`${Math.round(C/60)}h ${Math.round(C%60)}m`,X=((U=p.data)==null?void 0:U.data)||[],R=X.filter(C=>!(x&&C.scanType!==x||w&&C.status.toLowerCase()!==w.toLowerCase()||g&&C.riskLevel!==g)),L=u?X.find(C=>C.id===u):null;return p.isLoading?s.jsx(Kr,{}):s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"px-8 py-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Threat Scanner"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Security scanning and malware detection"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[d&&s.jsxs("button",{onClick:()=>l(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/40 transition-colors",children:[s.jsx(ca,{className:"h-4 w-4 animate-spin"}),s.jsxs("span",{className:"text-sm font-medium",children:[o," in progress..."]})]}),s.jsx(Na,{}),s.jsxs("button",{onClick:N,disabled:d,className:"flex items-center space-x-2 px-4 py-2 border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(Yu,{className:"h-5 w-5"}),s.jsx("span",{className:"font-medium",children:"Quick Scan"})]}),s.jsxs("button",{onClick:T,disabled:d,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(Le,{className:"h-5 w-5"}),s.jsx("span",{className:"font-medium",children:"Full Scan"})]})]})]})})}),i&&((me=b.data)==null?void 0:me.progress)&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Le,{className:"h-6 w-6 text-blue-600"}),s.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[o," Progress"]})]}),s.jsx("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(_r,{className:"h-6 w-6"})})]})}),s.jsx("div",{className:"p-6 space-y-4",children:s.jsx(ek,{progress:b.data.progress,onCancel:S})}),s.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end",children:s.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Hide"})})]})}),L&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Le,{className:"h-6 w-6 text-blue-600"}),s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Scan Details"})]}),s.jsx("button",{onClick:()=>m(null),className:"text-gray-400 hover:text-gray-600",children:s.jsx(_r,{className:"h-6 w-6"})})]})}),s.jsx("div",{className:"p-6 space-y-6",children:s.jsx(tk,{scan:L})}),s.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end",children:s.jsx("button",{onClick:()=>m(null),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Close"})})]})}),s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Scan History"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Tv,{className:"h-5 w-5 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Filters"})]})]}),s.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Scan Type"}),s.jsxs("select",{value:x,onChange:C=>k(C.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"",children:"All Types"}),s.jsx("option",{value:"QuickScan",children:"Quick Scan"}),s.jsx("option",{value:"FullScan",children:"Full Scan"}),s.jsx("option",{value:"DirectoryScan",children:"Directory Scan"}),s.jsx("option",{value:"FileScan",children:"File Scan"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),s.jsxs("select",{value:w,onChange:C=>j(C.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"",children:"All Statuses"}),s.jsx("option",{value:"Completed",children:"Clean"}),s.jsx("option",{value:"CompletedWithThreats",children:"Findings Detected"}),s.jsx("option",{value:"Running",children:"Scanning"}),s.jsx("option",{value:"Failed",children:"Failed"}),s.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Risk Level"}),s.jsxs("select",{value:g,onChange:C=>f(C.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"",children:"All Levels"}),s.jsx("option",{value:"Low",children:"Low"}),s.jsx("option",{value:"Medium",children:"Medium"}),s.jsx("option",{value:"High",children:"High"}),s.jsx("option",{value:"Critical",children:"Critical"})]})]})]})]}),p.isLoading?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(ca,{className:"h-8 w-8 animate-spin mx-auto text-gray-400"}),s.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading scan history..."})]}):R.length===0?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(Le,{className:"h-12 w-12 mx-auto text-gray-400"}),s.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900 dark:text-white",children:X.length===0?"No scan history yet":"No matching scans found"}),s.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:X.length===0?"Start a security scan to check for threats":"Try adjusting your filters"}),s.jsxs("div",{className:"mt-6 flex items-center justify-center space-x-3",children:[s.jsxs("button",{onClick:N,className:"flex items-center space-x-2 px-4 py-2 border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:[s.jsx(Yu,{className:"h-5 w-5"}),s.jsx("span",{children:"Quick Scan"})]}),s.jsxs("button",{onClick:T,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Le,{className:"h-5 w-5"}),s.jsx("span",{children:"Full Scan"})]})]})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Type"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Started"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Duration"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Files"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Results"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Risk"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:R.map(C=>s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:C.scanType})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:`inline-flex items-center space-x-2 px-2.5 py-1 rounded-full text-xs font-medium ${E(C.status)}`,children:[I(C.status),s.jsx("span",{children:D(C.status)})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:new Date(C.startTime).toLocaleString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:V(C.duration)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:C.filesScanned.toLocaleString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C.threatsFound===0?s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-green-600 dark:text-green-400",children:[s.jsx(ar,{className:"h-4 w-4"}),s.jsx("span",{children:"Clean"})]}):s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-orange-600 dark:text-orange-400 font-medium",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsxs("span",{children:[C.threatsFound," finding",C.threatsFound!==1?"s":""]})]}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:[C.malwareDetected+C.backdoorsDetected>0&&s.jsxs("span",{className:"font-medium text-red-600 dark:text-red-400",children:[C.malwareDetected+C.backdoorsDetected," threat",C.malwareDetected+C.backdoorsDetected!==1?"s":""]}),C.malwareDetected+C.backdoorsDetected>0&&C.suspiciousFiles>0&&", ",C.suspiciousFiles>0&&`${C.suspiciousFiles} flagged`]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`text-sm font-medium ${A(C.riskLevel)}`,children:C.riskLevel})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("button",{onClick:()=>m(C.id),className:"flex items-center space-x-1 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:[s.jsx(al,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm font-medium",children:"View"})]})})]},C.id))})]})})]})})]})}function ek({progress:e,onCancel:t}){var n;const r=((n=e.status)==null?void 0:n.toLowerCase())==="running";return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.scanPhase}),s.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:[e.percentComplete.toFixed(1),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${e.percentComplete}%`}})}),s.jsxs("div",{className:"mt-3 space-y-1",children:[s.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:[s.jsx("span",{className:"font-medium",children:"Current file:"})," ",e.currentFile||"Initializing..."]}),s.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:[s.jsx("span",{className:"font-medium",children:"Directory:"})," ",e.currentDirectory||"N/A"]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 text-center",children:[s.jsx(_v,{className:"h-6 w-6 mx-auto text-blue-600 dark:text-blue-400 mb-2"}),s.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.filesScanned.toLocaleString()}),s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Files Scanned"}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["of ",e.totalEstimatedFiles.toLocaleString()]})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 text-center",children:[s.jsx(of,{className:"h-6 w-6 mx-auto text-blue-600 dark:text-blue-400 mb-2"}),s.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.directoriesScanned.toLocaleString()}),s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Directories"})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 text-center",children:[s.jsx(Ut,{className:`h-6 w-6 mx-auto mb-2 ${e.threatsFound>0?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400"}`}),s.jsx("div",{className:`text-2xl font-bold ${e.threatsFound>0?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400"}`,children:e.threatsFound.toLocaleString()}),s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Findings"})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 text-center",children:[s.jsx(ud,{className:"h-6 w-6 mx-auto text-blue-600 dark:text-blue-400 mb-2"}),s.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.elapsedTime}),s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Elapsed"}),e.estimatedTimeRemaining&&s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["~",e.estimatedTimeRemaining," left"]})]})]}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.jsx("span",{className:"font-medium",children:"Data Scanned:"})," ",(e.bytesScanned/(1024*1024*1024)).toFixed(2)," GB"]})}),r&&s.jsx("button",{onClick:t,className:"w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Cancel Scan"})]})}function tk({scan:e}){const t=i=>{switch(i==null?void 0:i.toLowerCase()){case"critical":return"text-red-600 dark:text-red-400";case"high":return"text-orange-600 dark:text-orange-400";case"medium":return"text-yellow-600 dark:text-yellow-400";case"low":return"text-green-600 dark:text-green-400";default:return"text-gray-600 dark:text-gray-400"}},r=i=>{switch(i==null?void 0:i.toLowerCase()){case"completed":return"text-green-600 bg-green-50 dark:bg-green-900/20 dark:text-green-400";case"completedwiththreats":return"text-orange-600 bg-orange-50 dark:bg-orange-900/20 dark:text-orange-400";case"running":return"text-blue-600 bg-blue-50 dark:bg-blue-900/20 dark:text-blue-400";case"failed":return"text-red-600 bg-red-50 dark:bg-red-900/20 dark:text-red-400";case"cancelled":return"text-gray-600 bg-gray-50 dark:bg-gray-700/20 dark:text-gray-400";default:return"text-gray-600 bg-gray-50 dark:bg-gray-700/20 dark:text-gray-400"}},n=i=>{switch(i==null?void 0:i.toLowerCase()){case"completed":return"Clean";case"completedwiththreats":return"Findings Detected";case"running":return"Scanning";case"failed":return"Failed";case"cancelled":return"Cancelled";default:return i}},a=i=>(i/1073741824).toFixed(2)+" GB";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Scan ID"}),s.jsx("p",{className:"text-sm text-gray-900 dark:text-white font-mono",children:e.id})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Scan Type"}),s.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:e.scanType})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Status"}),s.jsx("div",{className:`inline-flex items-center space-x-2 px-2.5 py-1 rounded-full text-xs font-medium ${r(e.status)}`,children:s.jsx("span",{children:n(e.status)})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Risk Level"}),s.jsx("p",{className:`text-sm font-bold ${t(e.riskLevel)}`,children:e.riskLevel})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Start Time"}),s.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(e.startTime).toLocaleString()})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"End Time"}),s.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:e.endTime?new Date(e.endTime).toLocaleString():"N/A"})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Scan Statistics"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Files Scanned"}),s.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:e.filesScanned.toLocaleString()})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Directories"}),s.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:e.directoriesScanned.toLocaleString()})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Data Scanned"}),s.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:a(e.bytesScanned)})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Duration"}),s.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:[Math.round(e.duration)," min"]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Security Analysis"}),e.threatsFound===0?s.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ar,{className:"h-6 w-6 text-green-600 dark:text-green-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-bold text-green-900 dark:text-green-300",children:"System Clean"}),s.jsx("p",{className:"text-xs text-green-700 dark:text-green-400",children:"No security findings detected"})]})]})}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ut,{className:"h-6 w-6 text-orange-600 dark:text-orange-400"}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-bold text-orange-900 dark:text-orange-300",children:[e.threatsFound," Security Finding",e.threatsFound!==1?"s":""," Detected"]}),s.jsxs("p",{className:"text-xs text-orange-700 dark:text-orange-400",children:[e.malwareDetected+e.backdoorsDetected>0&&s.jsxs("span",{className:"font-medium",children:[e.malwareDetected+e.backdoorsDetected," threat",e.malwareDetected+e.backdoorsDetected!==1?"s":""," (",e.malwareDetected," malware, ",e.backdoorsDetected," backdoors)"]}),e.malwareDetected+e.backdoorsDetected>0&&e.suspiciousFiles>0&&", ",e.suspiciousFiles>0&&`${e.suspiciousFiles} suspicious file${e.suspiciousFiles!==1?"s":""}`]})]})]})}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 text-center border border-red-200 dark:border-red-800",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:e.malwareDetected}),s.jsx("div",{className:"text-xs text-red-700 dark:text-red-400 font-medium",children:"Malware"})]}),s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 text-center border border-red-200 dark:border-red-800",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:e.backdoorsDetected}),s.jsx("div",{className:"text-xs text-red-700 dark:text-red-400 font-medium",children:"Backdoors"})]}),s.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 text-center border border-yellow-200 dark:border-yellow-800",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:e.suspiciousFiles}),s.jsx("div",{className:"text-xs text-yellow-700 dark:text-yellow-400 font-medium",children:"Suspicious"})]})]})]})]}),e.summary&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Summary"}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:s.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:e.summary})})]}),e.errorMessage&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Error Details"}),s.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:s.jsx("p",{className:"text-sm text-red-900 dark:text-red-300 font-mono",children:e.errorMessage})})]})]})}const rk=(e,t)=>{if(t)return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 border-green-300";switch(e==null?void 0:e.toLowerCase()){case"error":case"failed":case"down":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200 border-red-300";case"warning":case"degraded":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200 border-yellow-300";default:return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 border-blue-300"}},nk=(e,t)=>{if(t)return s.jsx(ar,{className:"h-4 w-4"});switch(e==null?void 0:e.toLowerCase()){case"error":case"failed":case"down":return s.jsx(_r,{className:"h-4 w-4"});case"warning":case"degraded":return s.jsx(Ut,{className:"h-4 w-4"});default:return s.jsx(Li,{className:"h-4 w-4"})}},sk=e=>{const t=(e==null?void 0:e.toLowerCase())||"";return t.includes("qdrant")||t.includes("vector")||t.includes("database")?s.jsx(Cv,{className:"h-5 w-5"}):t.includes("ollama")||t.includes("llm")||t.includes("ai")?s.jsx(fd,{className:"h-5 w-5"}):t.includes("security")||t.includes("detector")||t.includes("yara")?s.jsx(Le,{className:"h-5 w-5"}):t.includes("cloud")||t.includes("connector")||t.includes("threat")?s.jsx(Sv,{className:"h-5 w-5"}):t.includes("event")||t.includes("log")||t.includes("collector")?s.jsx(ds,{className:"h-5 w-5"}):t.includes("storage")||t.includes("disk")?s.jsx(of,{className:"h-5 w-5"}):t.includes("performance")||t.includes("monitor")?s.jsx(df,{className:"h-5 w-5"}):s.jsx(Oi,{className:"h-5 w-5"})},ak=e=>e<=50?"text-green-600 dark:text-green-400":e<=150?"text-blue-600 dark:text-blue-400":e<=500?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400",ik=e=>e<=50?"Excellent":e<=150?"Good":e<=500?"Fair":"Poor",lk=e=>{const t=parseFloat(e.replace("%",""));return t>=99?"text-green-600 dark:text-green-400":t>=95?"text-blue-600 dark:text-blue-400":t>=90?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"};function ok(){const{token:e,loading:t}=et(),r=Qe();y.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]);const n=be({queryKey:["system-status"],queryFn:async()=>{const l=await fetch("/api/system-status",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!l.ok)throw new Error("Failed to fetch system status");const o=await l.json();console.log("[SystemStatus] Raw API response:",o);const c=o.data||o;return Array.isArray(c)?c:Array.isArray(o)?o:(console.warn("[SystemStatus] Response is not an array:",c),[])},enabled:!t&&!!e,refetchInterval:3e4}),a=Array.isArray(n.data)?n.data:[],i={total:a.length,healthy:a.filter(l=>l.isHealthy).length,warning:a.filter(l=>{var o;return((o=l.status)==null?void 0:o.toLowerCase())==="warning"||l.warningCount>0}).length,error:a.filter(l=>{var o;return!l.isHealthy&&((o=l.status)==null?void 0:o.toLowerCase())==="error"}).length,avgResponseTime:a.length>0?Math.round(a.reduce((l,o)=>l+o.responseTime,0)/a.length):0};return n.isLoading?s.jsx(Kr,{}):s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-8 py-6 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"System Status"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Platform health and component monitoring"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400",children:[s.jsx(Lv,{className:"h-5 w-5"}),s.jsx("span",{className:"text-sm font-medium",children:"Live Monitoring"})]}),s.jsxs("button",{onClick:()=>n.refetch(),disabled:n.isRefetching,className:"px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 flex items-center gap-2",children:[s.jsx(Ai,{className:`h-4 w-4 ${n.isRefetching?"animate-spin":""}`}),"Refresh"]})]})]})}),s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(Oi,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"}),s.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.total})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Components"})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(ar,{className:"h-8 w-8 text-green-600 dark:text-green-400"}),s.jsx("span",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:i.healthy})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Healthy"})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(Ut,{className:"h-8 w-8 text-yellow-600 dark:text-yellow-400"}),s.jsx("span",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:i.warning})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Warnings"})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(_r,{className:"h-8 w-8 text-red-600 dark:text-red-400"}),s.jsx("span",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:i.error})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Errors"})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(fd,{className:"h-8 w-8 text-purple-600 dark:text-purple-400"}),s.jsxs("span",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[i.avgResponseTime,"ms"]})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg Response"})]})]}),n.isLoading?s.jsx("div",{className:"space-y-4",children:[...Array(4)].map((l,o)=>s.jsx("div",{className:"h-32 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 animate-pulse"},o))}):a.length===0?s.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[s.jsx(Oi,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Components Found"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"System status data is not available"})]}):s.jsx("div",{className:"space-y-4",children:a.map(l=>s.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6 hover:shadow-lg transition-shadow",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:sk(l.component)}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:l.component}),s.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border flex items-center gap-1 ${rk(l.status,l.isHealthy)}`,children:[nk(l.status,l.isHealthy),l.status]})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:l.details}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Last Check"}),s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:new Date(l.lastCheck).toLocaleTimeString()})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Response Time"}),s.jsxs("p",{className:`text-sm font-semibold mt-1 ${ak(l.responseTime)}`,children:[l.responseTime,"ms",s.jsxs("span",{className:"text-xs ml-1 font-normal",children:["(",ik(l.responseTime),")"]})]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Uptime"}),s.jsx("p",{className:`text-sm font-semibold mt-1 ${lk(l.uptime)}`,children:l.uptime})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Errors"}),s.jsx("p",{className:`text-sm font-semibold mt-1 ${l.errorCount>0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:l.errorCount})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Warnings"}),s.jsx("p",{className:`text-sm font-semibold mt-1 ${l.warningCount>0?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400"}`,children:l.warningCount})]})]})]})})},l.id))})]})]})}function ck({config:e,onSave:t,isSaving:r}){const n={autoUpdate:{enabled:!1,updateFrequencyDays:7,lastUpdate:null,nextUpdate:null},sources:{enabled:!0,urls:["https://raw.githubusercontent.com/Yara-Rules/rules/master/malware/APT_APT1.yar","https://raw.githubusercontent.com/Neo23x0/signature-base/master/yara/apt_cobalt_strike.yar","https://raw.githubusercontent.com/Yara-Rules/rules/master/malware/MALW_Zeus.yar"],maxRulesPerSource:50},rules:{enabledByDefault:!0,autoValidation:!0,performanceThresholdMs:1e3},import:{lastImportDate:null,totalRules:0,enabledRules:0,failedRules:0}},[a,i]=y.useState(n),[l,o]=y.useState(!1),{token:c}=et();y.useEffect(()=>{e&&e.autoUpdate&&e.sources&&e.rules&&e.import?i({autoUpdate:{...n.autoUpdate,...e.autoUpdate},sources:{...n.sources,...e.sources},rules:{...n.rules,...e.rules},import:{...n.import,...e.import}}):i(n)},[e]);const d=k=>{k.preventDefault(),t(a)},h=async()=>{o(!0);try{const k=await fetch("/api/yara-configuration/import",{method:"POST",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"}});if(k.ok){const w=await k.json(),j=w.data||w;i(g=>({...g,import:{lastImportDate:new Date().toISOString(),totalRules:j.totalRules||j.importedCount||g.import.totalRules,enabledRules:j.enabledRules||j.importedCount||g.import.enabledRules,failedRules:j.failedRules||j.failedCount||0}}))}}catch(k){console.error("Error importing YARA rules:",k)}finally{o(!1)}},u=()=>{i({...a,sources:{...a.sources,urls:[...a.sources.urls,""]}})},m=k=>{i({...a,sources:{...a.sources,urls:a.sources.urls.filter((w,j)=>j!==k)}})},x=(k,w)=>{const j=[...a.sources.urls];j[k]=w,i({...a,sources:{...a.sources,urls:j}})};return s.jsxs("form",{onSubmit:d,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Ai,{className:"h-5 w-5 text-blue-600"}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Auto Update Settings"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:a.autoUpdate.enabled,onChange:k=>i({...a,autoUpdate:{...a.autoUpdate,enabled:k.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Enable automatic rule updates"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Update Frequency (days)"}),s.jsx("input",{type:"number",min:"1",max:"365",value:a.autoUpdate.updateFrequencyDays,onChange:k=>i({...a,autoUpdate:{...a.autoUpdate,updateFrequencyDays:parseInt(k.target.value)||7}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"How often to check for new YARA rules (1-365 days)"})]}),a.autoUpdate.lastUpdate&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 dark:bg-blue-900/20 dark:border-blue-800 rounded-lg p-3",children:s.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("strong",{children:"Last Update:"})," ",new Date(a.autoUpdate.lastUpdate).toLocaleString()]})})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(ec,{className:"h-5 w-5 text-blue-600"}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Rule Sources"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:a.sources.enabled,onChange:k=>i({...a,sources:{...a.sources,enabled:k.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Enable rule source downloads"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Max Rules Per Source"}),s.jsx("input",{type:"number",min:"1",max:"1000",value:a.sources.maxRulesPerSource,onChange:k=>i({...a,sources:{...a.sources,maxRulesPerSource:parseInt(k.target.value)||50}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Maximum rules to import from each source"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Active Sources: ",a.sources.urls.length," configured"]}),s.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:a.sources.urls.map((k,w)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"url",placeholder:`Source ${w+1}`,value:k,onChange:j=>x(w,j.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs"}),s.jsx("button",{type:"button",onClick:()=>m(w),disabled:a.sources.urls.length<=1,className:"px-3 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(ol,{className:"h-4 w-4"})})]},w))}),s.jsxs("button",{type:"button",onClick:u,className:"mt-2 flex items-center gap-2 px-3 py-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg text-sm",children:[s.jsx(Fi,{className:"h-4 w-4"}),"Add Source"]})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Import Statistics"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Rules:"}),s.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 rounded-full font-semibold",children:a.import.totalRules})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enabled Rules:"}),s.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 rounded-full font-semibold",children:a.import.enabledRules})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Failed Rules:"}),s.jsx("span",{className:`px-3 py-1 rounded-full font-semibold ${a.import.failedRules>0?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:a.import.failedRules})]}),a.import.lastImportDate&&s.jsxs("div",{className:"pt-3 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Last Import Date:"}),s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:new Date(a.import.lastImportDate).toLocaleString()})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:h,disabled:l,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-green-600 text-white hover:bg-green-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:l?s.jsxs(s.Fragment,{children:[s.jsx(Ai,{className:"h-5 w-5 animate-spin"}),"Importing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ec,{className:"h-5 w-5"}),"Import YARA Rules"]})}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center",children:"Download and import YARA rules from all configured sources"})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Rule Settings"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:a.rules.enabledByDefault,onChange:k=>i({...a,rules:{...a.rules,enabledByDefault:k.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Enable rules by default"})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:a.rules.autoValidation,onChange:k=>i({...a,rules:{...a.rules,autoValidation:k.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Auto-validate rules"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Performance Threshold (ms)"}),s.jsx("input",{type:"number",min:"100",max:"10000",value:a.rules.performanceThresholdMs,onChange:k=>i({...a,rules:{...a.rules,performanceThresholdMs:parseInt(k.target.value)||1e3}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Warn if rule execution exceeds this threshold"})]})]})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{type:"submit",disabled:r,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(vs,{className:"h-4 w-4"}),r?"Saving...":"Save YARA Configuration"]})})]})}const dk=[{id:"threat-intelligence",label:"Threat Intelligence",icon:Le},{id:"notifications",label:"Notifications",icon:sf},{id:"ip-enrichment",label:"IP Enrichment",icon:lf},{id:"malware",label:"Malware Rules",icon:Ev},{id:"mitre",label:"MITRE Techniques",icon:ll},{id:"threat-scanner",label:"Threat Scanner",icon:ds},{id:"performance",label:"Performance",icon:gd,disabled:!0}];function uk(){const{token:e,loading:t}=et(),r=Qe(),n=xt(),[a,i]=y.useState("threat-intelligence"),[l,o]=y.useState(!1),[c,d]=y.useState(!1);y.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]);const h=a!=="mitre"&&a!=="threat-scanner"&&a!=="performance",u=be({queryKey:["configuration",a],queryFn:async()=>{const w=await fetch(`/api${{"threat-intelligence":"/settings/threat-intelligence",notifications:"/notifications/config","ip-enrichment":"/settings/ip-enrichment",malware:"/yara-configuration",mitre:"/mitre/config","threat-scanner":"/threat-scanner/config",performance:"/performance/config"}[a]}`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!w.ok)throw new Error("Failed to fetch configuration");const j=await w.json();if(a==="notifications"){const g=j.data||[];return g.length>0?g[0]:null}return j.data||j},enabled:!t&&!!e&&h}),m=$t({mutationFn:async k=>{const w={"threat-intelligence":"/settings/threat-intelligence",notifications:"/notifications/config","ip-enrichment":"/settings/ip-enrichment",malware:"/yara-configuration",mitre:"/mitre/config","threat-scanner":"/threat-scanner/config",performance:"/performance/config"};if(a==="notifications"){const g=k.id?"PUT":"POST",f=k.id?`/api${w[a]}/${k.id}`:`/api${w[a]}`,p=await fetch(f,{method:g,headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(k)});if(!p.ok)throw new Error("Failed to save configuration");return p.json()}const j=await fetch(`/api${w[a]}`,{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(k)});if(!j.ok)throw new Error("Failed to save configuration");return j.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["configuration",a]}),d(!0),setTimeout(()=>d(!1),3e3)}}),x=k=>{m.mutate(k)};return s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-8 py-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(gd,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"System Configuration"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Configure integrations and platform settings"})]})]}),s.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:dk.map(k=>s.jsxs("button",{onClick:()=>!k.disabled&&i(k.id),disabled:k.disabled,className:`flex items-center gap-2 px-4 py-2 rounded-lg whitespace-nowrap transition-colors ${a===k.id?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-200":k.disabled?"text-gray-400 dark:text-gray-600 cursor-not-allowed":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[s.jsx(k.icon,{className:"h-4 w-4"}),k.label]},k.id))})]})}),s.jsxs("div",{className:"p-8 max-w-6xl mx-auto",children:[c&&s.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4 flex items-center gap-2",children:[s.jsx(dd,{className:"h-5 w-5 text-green-600"}),s.jsx("span",{className:"text-green-800 font-medium",children:"Configuration saved successfully!"})]}),h&&u.isLoading?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):h&&u.isError?s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 flex items-start gap-3",children:[s.jsx(zr,{className:"h-5 w-5 text-red-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-red-800 font-medium",children:"Failed to load configuration"}),s.jsx("p",{className:"text-red-700 text-sm mt-1",children:u.error.message})]})]}):s.jsxs(s.Fragment,{children:[a==="threat-intelligence"&&s.jsx(hk,{config:u.data,onSave:x,showApiKeys:l,onToggleApiKeys:()=>o(!l),isSaving:m.isPending}),a==="notifications"&&s.jsx(gk,{config:u.data,onSave:x,showApiKeys:l,onToggleApiKeys:()=>o(!l),isSaving:m.isPending}),a==="ip-enrichment"&&s.jsx(fk,{config:u.data,onSave:x,showApiKeys:l,onToggleApiKeys:()=>o(!l),isSaving:m.isPending}),a==="malware"&&s.jsx(ck,{config:u.data,onSave:x,isSaving:m.isPending}),a==="mitre"&&s.jsx(pk,{onSaveSuccess:()=>{d(!0),setTimeout(()=>d(!1),3e3)}}),a==="threat-scanner"&&s.jsx(mk,{})]})]})]})}function hk({config:e,onSave:t,showApiKeys:r,onToggleApiKeys:n,isSaving:a}){const i={virusTotal:{enabled:!1,apiKey:"",rateLimitPerMinute:4,cacheEnabled:!0,cacheTtlMinutes:60},malwareBazaar:{enabled:!1,rateLimitPerMinute:10,cacheEnabled:!0,cacheTtlMinutes:60},alienVaultOtx:{enabled:!1,apiKey:"",rateLimitPerMinute:10,cacheEnabled:!0,cacheTtlMinutes:60}},[l,o]=y.useState(i);y.useEffect(()=>{e&&e.virusTotal&&e.malwareBazaar&&e.alienVaultOtx?o({virusTotal:{...i.virusTotal,...e.virusTotal},malwareBazaar:{...i.malwareBazaar,...e.malwareBazaar},alienVaultOtx:{...i.alienVaultOtx,...e.alienVaultOtx}}):o(i)},[e]);const c=d=>{d.preventDefault(),t(l)};return s.jsxs("form",{onSubmit:c,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"VirusTotal"}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:l.virusTotal.enabled,onChange:d=>o({...l,virusTotal:{...l.virusTotal,enabled:d.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Enabled"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"API Key"}),s.jsx("input",{type:r?"text":"password",value:l.virusTotal.apiKey,onChange:d=>o({...l,virusTotal:{...l.virusTotal,apiKey:d.target.value}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Enter VirusTotal API key"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Rate Limit (per minute)"}),s.jsx("input",{type:"number",value:l.virusTotal.rateLimitPerMinute,onChange:d=>o({...l,virusTotal:{...l.virusTotal,rateLimitPerMinute:parseInt(d.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:l.virusTotal.cacheEnabled,onChange:d=>o({...l,virusTotal:{...l.virusTotal,cacheEnabled:d.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Cache Enabled"})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cache TTL (minutes)"}),s.jsx("input",{type:"number",value:l.virusTotal.cacheTtlMinutes,onChange:d=>o({...l,virusTotal:{...l.virusTotal,cacheTtlMinutes:parseInt(d.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"MalwareBazaar"}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:l.malwareBazaar.enabled,onChange:d=>o({...l,malwareBazaar:{...l.malwareBazaar,enabled:d.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Enabled"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Rate Limit (per minute)"}),s.jsx("input",{type:"number",value:l.malwareBazaar.rateLimitPerMinute,onChange:d=>o({...l,malwareBazaar:{...l.malwareBazaar,rateLimitPerMinute:parseInt(d.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:l.malwareBazaar.cacheEnabled,onChange:d=>o({...l,malwareBazaar:{...l.malwareBazaar,cacheEnabled:d.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Cache Enabled"})]})})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"AlienVault OTX"}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:l.alienVaultOtx.enabled,onChange:d=>o({...l,alienVaultOtx:{...l.alienVaultOtx,enabled:d.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Enabled"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"API Key"}),s.jsx("input",{type:r?"text":"password",value:l.alienVaultOtx.apiKey,onChange:d=>o({...l,alienVaultOtx:{...l.alienVaultOtx,apiKey:d.target.value}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Enter AlienVault OTX API key"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Rate Limit (per minute)"}),s.jsx("input",{type:"number",value:l.alienVaultOtx.rateLimitPerMinute,onChange:d=>o({...l,alienVaultOtx:{...l.alienVaultOtx,rateLimitPerMinute:parseInt(d.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{type:"button",onClick:n,className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:[r?s.jsx(hd,{className:"h-4 w-4"}):s.jsx(al,{className:"h-4 w-4"}),r?"Hide":"Show"," API Keys"]}),s.jsxs("button",{type:"submit",disabled:a,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(vs,{className:"h-4 w-4"}),a?"Saving...":"Save Configuration"]})]})]})}function gk({config:e,onSave:t,showApiKeys:r,onToggleApiKeys:n,isSaving:a}){const i={id:void 0,name:"Default Notification Configuration",teams:{enabled:!1,webhookUrl:"",castellanUrl:"http://localhost:3000",rateLimitSettings:{criticalThrottleMinutes:0,highThrottleMinutes:5,mediumThrottleMinutes:15,lowThrottleMinutes:60}},slack:{enabled:!1,webhookUrl:"",castellanUrl:"http://localhost:3000",defaultChannel:"#security-alerts",criticalChannel:"",highChannel:"",rateLimitSettings:{criticalThrottleMinutes:0,highThrottleMinutes:5,mediumThrottleMinutes:15,lowThrottleMinutes:60}}},[l,o]=y.useState(i);y.useEffect(()=>{e&&e.teams&&e.slack?o({id:e.id,name:e.name||i.name,teams:{...i.teams,...e.teams,rateLimitSettings:{...i.teams.rateLimitSettings,...e.teams.rateLimitSettings}},slack:{...i.slack,...e.slack,rateLimitSettings:{...i.slack.rateLimitSettings,...e.slack.rateLimitSettings}}}):o(i)},[e]);const c=d=>{d.preventDefault(),t(l)};return s.jsxs("form",{onSubmit:c,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Microsoft Teams"}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:l.teams.enabled,onChange:d=>o({...l,teams:{...l.teams,enabled:d.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Enabled"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Webhook URL"}),s.jsx("input",{type:r?"text":"password",value:l.teams.webhookUrl,onChange:d=>o({...l,teams:{...l.teams,webhookUrl:d.target.value}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://outlook.office.com/webhook/..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Castellan URL"}),s.jsx("input",{type:"text",value:l.teams.castellanUrl,onChange:d=>o({...l,teams:{...l.teams,castellanUrl:d.target.value}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"http://localhost:3000"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Base URL for Castellan instance (used in notification links)"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rate Limit Settings (minutes between alerts)"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Critical"}),s.jsx("input",{type:"number",min:"0",value:l.teams.rateLimitSettings.criticalThrottleMinutes,onChange:d=>o({...l,teams:{...l.teams,rateLimitSettings:{...l.teams.rateLimitSettings,criticalThrottleMinutes:parseInt(d.target.value)||0}}}),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"High"}),s.jsx("input",{type:"number",min:"0",value:l.teams.rateLimitSettings.highThrottleMinutes,onChange:d=>o({...l,teams:{...l.teams,rateLimitSettings:{...l.teams.rateLimitSettings,highThrottleMinutes:parseInt(d.target.value)||0}}}),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Medium"}),s.jsx("input",{type:"number",min:"0",value:l.teams.rateLimitSettings.mediumThrottleMinutes,onChange:d=>o({...l,teams:{...l.teams,rateLimitSettings:{...l.teams.rateLimitSettings,mediumThrottleMinutes:parseInt(d.target.value)||0}}}),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Low"}),s.jsx("input",{type:"number",min:"0",value:l.teams.rateLimitSettings.lowThrottleMinutes,onChange:d=>o({...l,teams:{...l.teams,rateLimitSettings:{...l.teams.rateLimitSettings,lowThrottleMinutes:parseInt(d.target.value)||0}}}),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"})]})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Slack"}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:l.slack.enabled,onChange:d=>o({...l,slack:{...l.slack,enabled:d.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Enabled"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Webhook URL"}),s.jsx("input",{type:r?"text":"password",value:l.slack.webhookUrl,onChange:d=>o({...l,slack:{...l.slack,webhookUrl:d.target.value}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://hooks.slack.com/services/..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Castellan URL"}),s.jsx("input",{type:"text",value:l.slack.castellanUrl,onChange:d=>o({...l,slack:{...l.slack,castellanUrl:d.target.value}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"http://localhost:3000"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Base URL for Castellan instance (used in notification links)"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Default Channel"}),s.jsx("input",{type:"text",value:l.slack.defaultChannel,onChange:d=>o({...l,slack:{...l.slack,defaultChannel:d.target.value}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"#security-alerts"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Critical Channel"}),s.jsx("input",{type:"text",value:l.slack.criticalChannel,onChange:d=>o({...l,slack:{...l.slack,criticalChannel:d.target.value}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"#critical-alerts"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Optional"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"High Priority Channel"}),s.jsx("input",{type:"text",value:l.slack.highChannel,onChange:d=>o({...l,slack:{...l.slack,highChannel:d.target.value}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"#high-alerts"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Optional"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rate Limit Settings (minutes between alerts)"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Critical"}),s.jsx("input",{type:"number",min:"0",value:l.slack.rateLimitSettings.criticalThrottleMinutes,onChange:d=>o({...l,slack:{...l.slack,rateLimitSettings:{...l.slack.rateLimitSettings,criticalThrottleMinutes:parseInt(d.target.value)||0}}}),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"High"}),s.jsx("input",{type:"number",min:"0",value:l.slack.rateLimitSettings.highThrottleMinutes,onChange:d=>o({...l,slack:{...l.slack,rateLimitSettings:{...l.slack.rateLimitSettings,highThrottleMinutes:parseInt(d.target.value)||0}}}),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Medium"}),s.jsx("input",{type:"number",min:"0",value:l.slack.rateLimitSettings.mediumThrottleMinutes,onChange:d=>o({...l,slack:{...l.slack,rateLimitSettings:{...l.slack.rateLimitSettings,mediumThrottleMinutes:parseInt(d.target.value)||0}}}),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Low"}),s.jsx("input",{type:"number",min:"0",value:l.slack.rateLimitSettings.lowThrottleMinutes,onChange:d=>o({...l,slack:{...l.slack,rateLimitSettings:{...l.slack.rateLimitSettings,lowThrottleMinutes:parseInt(d.target.value)||0}}}),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"})]})]})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{type:"button",onClick:n,className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:[r?s.jsx(hd,{className:"h-4 w-4"}):s.jsx(al,{className:"h-4 w-4"}),r?"Hide":"Show"," Webhook URLs"]}),s.jsxs("button",{type:"submit",disabled:a,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(vs,{className:"h-4 w-4"}),a?"Saving...":"Save Configuration"]})]})]})}function fk({config:e,onSave:t,showApiKeys:r,onToggleApiKeys:n,isSaving:a}){const i={enabled:!1,provider:"Disabled",maxMind:{licenseKey:"",accountId:"",autoUpdate:!1,updateFrequencyDays:7},ipInfo:{apiKey:""}},[l,o]=y.useState(i);y.useEffect(()=>{e&&typeof e.enabled<"u"&&e.maxMind&&e.ipInfo?o({...i,...e,maxMind:{...i.maxMind,...e.maxMind},ipInfo:{...i.ipInfo,...e.ipInfo}}):o(i)},[e]);const c=d=>{d.preventDefault(),t(l)};return s.jsxs("form",{onSubmit:c,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"General Settings"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:l.enabled,onChange:d=>o({...l,enabled:d.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Enable IP Enrichment"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Provider"}),s.jsxs("select",{value:l.provider,onChange:d=>o({...l,provider:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"Disabled",children:"Disabled"}),s.jsx("option",{value:"MaxMind",children:"MaxMind GeoIP2"}),s.jsx("option",{value:"IPInfo",children:"IPInfo"})]})]})]})]}),l.provider==="MaxMind"&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"MaxMind Configuration"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"License Key"}),s.jsx("input",{type:r?"text":"password",value:l.maxMind.licenseKey,onChange:d=>o({...l,maxMind:{...l.maxMind,licenseKey:d.target.value}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Enter MaxMind license key"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Account ID"}),s.jsx("input",{type:"text",value:l.maxMind.accountId,onChange:d=>o({...l,maxMind:{...l.maxMind,accountId:d.target.value}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Enter account ID"})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:l.maxMind.autoUpdate,onChange:d=>o({...l,maxMind:{...l.maxMind,autoUpdate:d.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Auto Update"})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Update Frequency (days)"}),s.jsx("input",{type:"number",value:l.maxMind.updateFrequencyDays,onChange:d=>o({...l,maxMind:{...l.maxMind,updateFrequencyDays:parseInt(d.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]}),l.provider==="IPInfo"&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"IPInfo Configuration"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"API Key"}),s.jsx("input",{type:r?"text":"password",value:l.ipInfo.apiKey,onChange:d=>o({...l,ipInfo:{...l.ipInfo,apiKey:d.target.value}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Enter IPInfo API key"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{type:"button",onClick:n,className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:[r?s.jsx(hd,{className:"h-4 w-4"}):s.jsx(al,{className:"h-4 w-4"}),r?"Hide":"Show"," API Keys"]}),s.jsxs("button",{type:"submit",disabled:a,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(vs,{className:"h-4 w-4"}),a?"Saving...":"Save Configuration"]})]})]})}function mk(){var V,X;const{token:e}=et(),t=xt(),[r,n]=y.useState(""),[a,i]=y.useState(""),[l,o]=y.useState(!1),[c,d]=y.useState(null),h={enabled:!1,scheduledScanInterval:"1.00:00:00",defaultScanType:0,quarantineThreats:!1,quarantineDirectory:"C:\\Castellan\\Quarantine",maxFileSizeMB:100,maxConcurrentFiles:10,notificationThreshold:2,excludedDirectories:[],excludedExtensions:[],enableRealTimeProtection:!1},[u,m]=y.useState(h),x=be({queryKey:["threat-scanner-config"],queryFn:async()=>{console.log("[ThreatScanner] Fetching config from API...");const R=await fetch("/api/scheduledscan/config",{headers:{Authorization:`Bearer ${e}`}});if(!R.ok)throw new Error("Failed to fetch scanner config");const L=await R.json(),U=L.data||L;console.log("[ThreatScanner] Raw config from API:",U);const me={enabled:U.enabled??!1,scheduledScanInterval:U.scheduledScanInterval||"1.00:00:00",defaultScanType:U.defaultScanType??0,quarantineThreats:U.quarantineThreats??!1,quarantineDirectory:U.quarantineDirectory||"",maxFileSizeMB:U.maxFileSizeMB??100,maxConcurrentFiles:U.maxConcurrentFiles??10,notificationThreshold:U.notificationThreshold??2,excludedDirectories:U.excludedDirectories||[],excludedExtensions:U.excludedExtensions||[],enableRealTimeProtection:U.enableRealTimeProtection??!1};return console.log("[ThreatScanner] Normalized config:",me),me},enabled:!!e});y.useEffect(()=>{x.data&&(console.log("[ThreatScanner] useEffect updating formData with:",x.data),m(x.data))},[x.data]);const k=be({queryKey:["threat-scanner-status"],queryFn:async()=>{const R=await fetch("/api/scheduledscan/status",{headers:{Authorization:`Bearer ${e}`}});if(!R.ok)throw new Error("Failed to fetch scanner status");const L=await R.json();return L.data||L},enabled:!!e,refetchInterval:3e4}),w=$t({mutationFn:async R=>{console.log("[ThreatScanner] Saving config:",R);const L={Enabled:R.enabled,ScheduledScanInterval:R.scheduledScanInterval,DefaultScanType:R.defaultScanType,QuarantineThreats:R.quarantineThreats,QuarantineDirectory:R.quarantineDirectory,MaxFileSizeMB:R.maxFileSizeMB,MaxConcurrentFiles:R.maxConcurrentFiles,NotificationThreshold:R.notificationThreshold,ExcludedDirectories:R.excludedDirectories,ExcludedExtensions:R.excludedExtensions,EnableRealTimeProtection:R.enableRealTimeProtection};console.log("[ThreatScanner] Sending to backend:",L);const U=await fetch("/api/scheduledscan/config",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(L)});if(console.log("[ThreatScanner] Response status:",U.status),!U.ok){const C=await U.text();throw console.error("[ThreatScanner] Save failed:",C),new Error("Failed to save configuration")}const me=await U.json();return console.log("[ThreatScanner] Save successful, response:",me),me},onSuccess:()=>{console.log("[ThreatScanner] Save mutation onSuccess, invalidating queries..."),t.invalidateQueries({queryKey:["threat-scanner-config"]}),o(!0),d(null),setTimeout(()=>o(!1),3e3)},onError:R=>{console.error("[ThreatScanner] Save mutation onError:",R),d(R.message),o(!1)}}),j=k.data||{isEnabled:!1,lastScanTime:null,nextScanTime:null,currentStatus:"Idle"},g=R=>{if(!R)return{days:1,hours:0};const L=R.split(":");if(L.length===3){const[U,me]=L[0].split(".");return{days:parseInt(U||"0",10),hours:parseInt(L[0].includes(".")?me:L[0],10)}}return{days:1,hours:0}},f=(R,L)=>`${R}.${L.toString().padStart(2,"0")}:00:00`,[p,b]=y.useState(g(u.scheduledScanInterval||"1.00:00:00").days),[N,T]=y.useState(g(u.scheduledScanInterval||"1.00:00:00").hours);y.useEffect(()=>{const R=g(u.scheduledScanInterval);b(R.days),T(R.hours)},[u.scheduledScanInterval]);const S=R=>{R.preventDefault();const L={...u,scheduledScanInterval:f(p,N)};w.mutate(L)},E=()=>{r.trim()&&(m({...u,excludedDirectories:[...u.excludedDirectories||[],r.trim()]}),n(""))},D=R=>{m({...u,excludedDirectories:u.excludedDirectories.filter(L=>L!==R)})},I=()=>{if(a.trim()){const R=a.trim().startsWith(".")?a.trim():`.${a.trim()}`;m({...u,excludedExtensions:[...u.excludedExtensions||[],R]}),i("")}},A=R=>{m({...u,excludedExtensions:u.excludedExtensions.filter(L=>L!==R)})};return x.isLoading||k.isLoading?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):x.isError||k.isError?s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 flex items-start gap-3",children:[s.jsx(zr,{className:"h-5 w-5 text-red-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-red-800 font-medium",children:"Failed to load configuration"}),s.jsx("p",{className:"text-red-700 text-sm mt-1",children:((V=x.error)==null?void 0:V.message)||((X=k.error)==null?void 0:X.message)})]})]}):s.jsxs("form",{onSubmit:S,className:"space-y-6",children:[l&&s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center gap-2",children:[s.jsx(dd,{className:"h-5 w-5 text-green-600"}),s.jsx("span",{className:"text-green-800 font-medium",children:"Configuration saved successfully!"})]}),c&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[s.jsx(zr,{className:"h-5 w-5 text-red-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-red-800 font-medium",children:"Failed to save configuration"}),s.jsx("p",{className:"text-red-700 text-sm mt-1",children:c})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Scanner Status"}),s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${j.currentStatus==="Running"?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-200":j.isEnabled?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:j.currentStatus||"Idle"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Last Scan"}),s.jsx("p",{className:"text-gray-900 dark:text-white",children:j.lastScanTime?new Date(j.lastScanTime).toLocaleString():"Never"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Next Scan"}),s.jsx("p",{className:"text-gray-900 dark:text-white",children:j.nextScanTime?new Date(j.nextScanTime).toLocaleString():"Not scheduled"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Scheduler Status"}),s.jsx("p",{className:"text-gray-900 dark:text-white",children:j.isEnabled?"Enabled":"Disabled"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Scheduled Scans"}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:u.enabled,onChange:R=>m({...u,enabled:R.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Enabled"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Scan Interval (Days)"}),s.jsx("input",{type:"number",min:"0",max:"365",value:p,onChange:R=>b(parseInt(R.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Scan Interval (Hours)"}),s.jsx("input",{type:"number",min:"0",max:"23",value:N,onChange:R=>T(parseInt(R.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Default Scan Type"}),s.jsxs("select",{value:u.defaultScanType,onChange:R=>m({...u,defaultScanType:parseInt(R.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"0",children:"Quick Scan"}),s.jsx("option",{value:"1",children:"Full Scan"})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Quarantine Settings"}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:u.quarantineThreats,onChange:R=>m({...u,quarantineThreats:R.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Enabled"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Quarantine Directory"}),s.jsx("input",{type:"text",value:u.quarantineDirectory||"",onChange:R=>m({...u,quarantineDirectory:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"C:\\Castellan\\Quarantine"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Suspicious files will be moved to this directory for analysis"})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Performance Settings"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Max Concurrent Files"}),s.jsx("input",{type:"number",min:"1",max:"100",value:u.maxConcurrentFiles||10,onChange:R=>m({...u,maxConcurrentFiles:parseInt(R.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Number of files to scan simultaneously"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Max File Size (MB)"}),s.jsx("input",{type:"number",min:"1",max:"1000",value:u.maxFileSizeMB||100,onChange:R=>m({...u,maxFileSizeMB:parseInt(R.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Skip files larger than this size"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notification Threshold"}),s.jsx("input",{type:"number",min:"1",max:"100",value:u.notificationThreshold||10,onChange:R=>m({...u,notificationThreshold:parseInt(R.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Notify when threats exceed this count"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Scan Exclusions"}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Excluded Directories"}),s.jsxs("div",{className:"flex gap-2 mb-3",children:[s.jsx("input",{type:"text",value:r,onChange:R=>n(R.target.value),onKeyPress:R=>R.key==="Enter"&&E(),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"C:\\Windows\\System32"}),s.jsxs("button",{type:"button",onClick:E,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg",children:[s.jsx(Fi,{className:"h-4 w-4"}),"Add"]})]}),s.jsxs("div",{className:"space-y-2",children:[(u.excludedDirectories||[]).map((R,L)=>s.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-700 px-3 py-2 rounded-lg",children:[s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 font-mono",children:R}),s.jsx("button",{type:"button",onClick:()=>D(R),className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:s.jsx(ol,{className:"h-4 w-4"})})]},L)),(!u.excludedDirectories||u.excludedDirectories.length===0)&&s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"No excluded directories"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Excluded File Extensions"}),s.jsxs("div",{className:"flex gap-2 mb-3",children:[s.jsx("input",{type:"text",value:a,onChange:R=>i(R.target.value),onKeyPress:R=>R.key==="Enter"&&I(),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:".tmp, .log"}),s.jsxs("button",{type:"button",onClick:I,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg",children:[s.jsx(Fi,{className:"h-4 w-4"}),"Add"]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[(u.excludedExtensions||[]).map((R,L)=>s.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 dark:bg-gray-700 px-3 py-1 rounded-full",children:[s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 font-mono",children:R}),s.jsx("button",{type:"button",onClick:()=>A(R),className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:s.jsx(cl,{className:"h-3 w-3"})})]},L)),(!u.excludedExtensions||u.excludedExtensions.length===0)&&s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"No excluded extensions"})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{type:"submit",disabled:w.isPending,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(vs,{className:"h-4 w-4"}),w.isPending?"Saving...":"Save Configuration"]})})]})}function pk({onSaveSuccess:e}){var b,N,T,S,E,D,I,A,V,X,R;const{token:t}=et(),r=xt(),n=Qe(),a=be({queryKey:["mitre-statistics"],queryFn:async()=>{const L=await fetch("/api/mitre/statistics",{headers:{Authorization:`Bearer ${t}`}});if(!L.ok)throw new Error("Failed to fetch statistics");return await L.json()},enabled:!!t}),i=be({queryKey:["mitre-config"],queryFn:async()=>{const L=await fetch("/api/mitre/config",{headers:{Authorization:`Bearer ${t}`}});if(!L.ok)throw new Error("Failed to fetch MITRE config");const U=await L.json();return U.data||U},enabled:!!t}),l=$t({mutationFn:async L=>{const U=await fetch("/api/mitre/config",{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(L)});if(!U.ok)throw new Error("Failed to save configuration");return U.json()},onSuccess:()=>{r.invalidateQueries({queryKey:["mitre-config"]}),e==null||e()}}),o=i.data||{autoUpdate:{enabled:!1,updateFrequencyDays:30,lastUpdate:null,nextUpdate:null}},c=a.data||{totalTechniques:0,lastUpdated:null},[d,h]=y.useState(((b=o.autoUpdate)==null?void 0:b.enabled)||!1),[u,m]=y.useState(((N=o.autoUpdate)==null?void 0:N.updateFrequencyDays)||30);y.useEffect(()=>{var L,U;h(((L=o.autoUpdate)==null?void 0:L.enabled)||!1),m(((U=o.autoUpdate)==null?void 0:U.updateFrequencyDays)||30)},[o]);const x=()=>{var U,me;const L={autoUpdate:{enabled:d,updateFrequencyDays:u,lastUpdate:(U=o.autoUpdate)==null?void 0:U.lastUpdate,nextUpdate:(me=o.autoUpdate)==null?void 0:me.nextUpdate}};l.mutate(L)},w=Gu({filters:{mutationKey:["mitre-import"],status:"pending"}}).length>0,j=$t({mutationKey:["mitre-import"],mutationFn:async()=>{const L=await fetch("/api/mitre/import",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!L.ok)throw new Error("Failed to import MITRE techniques");return L.json()},onSuccess:()=>{r.invalidateQueries({queryKey:["mitre-statistics"]}),r.invalidateQueries({queryKey:["mitre-config"]})}}),g=()=>{j.mutate()},f=Gu({filters:{mutationKey:["mitre-import"]},select:L=>({status:L.state.status,data:L.state.data,error:L.state.error})}),p=f[f.length-1];return i.isLoading||a.isLoading?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Database Statistics"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:c.totalTechniques||0}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Total Techniques"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Last Updated"}),s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:c.lastUpdated?new Date(c.lastUpdated).toLocaleString():"Never"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Next Update"}),s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:(T=o.autoUpdate)!=null&&T.nextUpdate?new Date(o.autoUpdate.nextUpdate).toLocaleString():"Not scheduled"})]})]}),c.totalTechniques===0&&s.jsx("div",{className:"mt-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Li,{className:"h-5 w-5 text-blue-600 mr-2 mt-0.5"}),s.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:'The MITRE database appears to be empty. Click "Import MITRE Techniques" to download the latest techniques from the official source.'})]})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Auto Update Settings"}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:d,onChange:L=>h(L.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Enabled"})]})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Update Frequency (days)"}),s.jsx("input",{type:"number",min:"1",max:"365",value:u,onChange:L=>m(parseInt(L.target.value)||30),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Automatically check for and import new MITRE ATT&CK techniques every N days"})]})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Manual Import"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Import MITRE ATT&CK techniques from the official MITRE repository. This will download and process all current techniques and sub-techniques."}),s.jsx("button",{onClick:g,disabled:w,className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white hover:bg-green-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:w?s.jsxs(s.Fragment,{children:[s.jsx(Ai,{className:"h-5 w-5 animate-spin"}),"Importing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ec,{className:"h-5 w-5"}),"Import MITRE Techniques"]})}),p&&p.status==="success"&&p.data?s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(dd,{className:"h-5 w-5 text-green-600 mr-2"}),s.jsx("h3",{className:"text-lg font-medium text-green-800",children:"Import Successful!"})]}),s.jsxs("div",{className:"mt-2 text-sm text-gray-700",children:[s.jsxs("p",{children:["• ",((E=(S=p.data)==null?void 0:S.result)==null?void 0:E.techniquesImported)||0," new techniques imported"]}),s.jsxs("p",{children:["• ",((I=(D=p.data)==null?void 0:D.result)==null?void 0:I.techniquesUpdated)||0," existing techniques updated"]}),((X=(V=(A=p.data)==null?void 0:A.result)==null?void 0:V.errors)==null?void 0:X.length)>0&&s.jsxs("p",{className:"text-yellow-700",children:["• ",p.data.result.errors.length," techniques had errors"]})]})]}):null,p&&p.status==="error"&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(zr,{className:"h-5 w-5 text-red-600 mr-2"}),s.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Import Failed"})]}),s.jsx("p",{className:"mt-2 text-sm text-red-700",children:((R=p.error)==null?void 0:R.message)||"Failed to import techniques"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Links"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>n("/mitre-attack"),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[s.jsx(ll,{className:"h-4 w-4"}),"Browse Techniques"]}),s.jsxs("button",{onClick:()=>window.open("https://attack.mitre.org/","_blank"),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[s.jsx(Li,{className:"h-4 w-4"}),"MITRE ATT&CK Framework"]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{onClick:x,disabled:l.isPending,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(vs,{className:"h-4 w-4"}),l.isPending?"Saving...":"Save Configuration"]})})]})}const Es={async sendMessage(e){const t=localStorage.getItem("auth_token"),r=new AbortController,n=setTimeout(()=>r.abort(),12e4);try{const a=await fetch(`${It}/chat/message`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(e),signal:r.signal});if(clearTimeout(n),!a.ok){const l=await a.text();throw new Error(`Failed to send message: ${a.statusText} - ${l}`)}return await a.json()}catch(a){throw clearTimeout(n),a.name==="AbortError"?new Error("Request timeout - the AI is taking too long to respond. Please try again."):a}},async getConversations(){const e=localStorage.getItem("auth_token"),t=await fetch(`${It}/chat/conversations`,{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error(`Failed to get conversations: ${t.statusText}`);const r=await t.json();return Array.isArray(r)?r:r.data||[]},async getConversation(e){const t=localStorage.getItem("auth_token"),r=await fetch(`${It}/chat/conversations/${e}`,{method:"GET",headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw new Error(`Failed to get conversation: ${r.statusText}`);return await r.json()},async createConversation(){const e=localStorage.getItem("auth_token"),t=await fetch(`${It}/chat/conversations`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({title:"New Conversation"})});if(!t.ok)throw new Error(`Failed to create conversation: ${t.statusText}`);return t.json()},async deleteConversation(e){const t=localStorage.getItem("auth_token"),r=await fetch(`${It}/chat/conversations/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw new Error(`Failed to delete conversation: ${r.statusText}`)},async archiveConversation(e){const t=localStorage.getItem("auth_token"),r=await fetch(`${It}/chat/conversations/${e}/archive`,{method:"POST",headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw new Error(`Failed to archive conversation: ${r.statusText}`)},async getSuggestedFollowups(e){const t=localStorage.getItem("auth_token"),r=await fetch(`${It}/chat/conversations/${e}/suggested-followups`,{method:"GET",headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw new Error(`Failed to get suggested followups: ${r.statusText}`);const n=await r.json();return Array.isArray(n)?n:n.suggestions||[]},async submitFeedback(e,t,r){const n=localStorage.getItem("auth_token"),a=await fetch(`${It}/chat/conversations/${e}/feedback`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({rating:t,comment:r})});if(!a.ok)throw new Error(`Failed to submit feedback: ${a.statusText}`)}};function xk(){const{token:e,loading:t}=et(),r=Qe(),n=xt(),[a,i]=y.useState(null),[l,o]=y.useState(""),[c,d]=y.useState([]),[h,u]=y.useState(null),m=y.useRef(null);y.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]);const x=be({queryKey:["chat-conversations"],queryFn:()=>Es.getConversations(),enabled:!t&&!!e,retry:2,retryDelay:1e3,staleTime:3e4}),k=be({queryKey:["chat-conversation",a],queryFn:()=>Es.getConversation(a),enabled:!t&&!!e&&!!a,staleTime:0,gcTime:0});y.useEffect(()=>{var S;(S=k.data)!=null&&S.messages?d(k.data.messages):a||d([])},[k.data,a]),y.useEffect(()=>{var S;(S=m.current)==null||S.scrollIntoView({behavior:"smooth"})},[c]);const w=$t({mutationFn:S=>Es.sendMessage(S),onSuccess:S=>{const E={...S.message,id:S.message.id||`msg-${Date.now()}`};d(D=>[...D,E]),a||i(S.conversationId),n.invalidateQueries({queryKey:["chat-conversations"]}),n.invalidateQueries({queryKey:["chat-conversation",a||S.conversationId]})},onError:S=>{console.error("Failed to send message:",S),alert(`Failed to send message: ${S.message||"Unknown error"}`),d(E=>E.slice(0,-1))}}),j=$t({mutationFn:()=>Es.createConversation(),onSuccess:S=>{i(S.id),d([]),n.invalidateQueries({queryKey:["chat-conversations"]})}}),g=$t({mutationFn:S=>Es.deleteConversation(S),onMutate:async S=>{await n.cancelQueries({queryKey:["chat-conversations"]});const E=n.getQueryData(["chat-conversations"]);return n.setQueryData(["chat-conversations"],D=>D?D.filter(I=>I.id!==S):[]),a===S&&(i(null),d([])),{previousConversations:E}},onError:(S,E,D)=>{D!=null&&D.previousConversations&&n.setQueryData(["chat-conversations"],D.previousConversations),console.error("Failed to delete conversation:",S),alert(`Failed to delete conversation: ${S.message||"Unknown error"}`)},onSettled:()=>{n.invalidateQueries({queryKey:["chat-conversations"]})}}),f=(S,E)=>{S.stopPropagation(),confirm("Are you sure you want to delete this conversation?")&&g.mutate(E)},p=async()=>{if(!l.trim())return;const S={id:`msg-${Date.now()}`,conversationId:a||"temp",role:"user",content:l,timestamp:new Date().toISOString()};d(D=>[...D,S]);const E=l;o(""),w.mutate({message:E,conversationId:a||void 0})},b=S=>{S.key==="Enter"&&S.ctrlKey&&p()},N=x.data||[],T=N.find(S=>S.id===a);return s.jsxs("div",{className:"h-screen bg-gray-50 dark:bg-gray-900 flex overflow-hidden",children:[s.jsxs("div",{className:"w-80 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col h-full",children:[s.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("button",{onClick:()=>j.mutate(),disabled:j.isPending,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[s.jsx(Fi,{className:"h-5 w-5"}),s.jsx("span",{className:"font-medium",children:"New Conversation"})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:x.isLoading?s.jsxs("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:[s.jsx(Kr,{}),s.jsx("div",{className:"text-sm mt-2",children:"Loading conversations..."})]}):N.length===0?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(tc,{className:"h-12 w-12 mx-auto text-gray-400 dark:text-gray-600 mb-3"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"No conversations yet"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Start a new conversation to begin"})]}):s.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:N.map(S=>s.jsx("div",{className:"relative group",onMouseEnter:()=>u(S.id),onMouseLeave:()=>u(null),children:s.jsx("div",{className:`w-full p-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${a===S.id?"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-600":""}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>i(S.id),children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white truncate",children:S.title}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:new Date(S.updatedAt).toLocaleDateString()})]}),h===S.id&&s.jsx("button",{onClick:E=>f(E,S.id),className:"ml-2 p-1.5 text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors flex-shrink-0",title:"Delete conversation",children:s.jsx(ol,{className:"h-4 w-4"})})]})})},S.id))})})]}),s.jsxs("div",{className:"flex-1 flex flex-col h-full",children:[s.jsx("div",{className:"flex-shrink-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-8 py-6 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:(T==null?void 0:T.title)||"CastellanAI Chat"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Ask questions about your security events"})]}),s.jsx(Na,{})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-6",children:[!a&&c.length===0&&s.jsxs("div",{className:"text-center py-16",children:[s.jsx(tc,{className:"h-16 w-16 mx-auto text-gray-400 dark:text-gray-600 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Start a Conversation"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Ask me about security events, threats, or compliance"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-w-2xl mx-auto",children:["Show critical events from last hour","Summarize today's threats","Check compliance status","Find failed login attempts"].map(S=>s.jsx("button",{onClick:()=>o(S),className:"px-4 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-left",children:S},S))})]}),c.map(S=>s.jsx("div",{className:`flex ${S.role==="user"?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-3xl rounded-lg p-4 ${S.role==="user"?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white"}`,children:[s.jsx("div",{className:"whitespace-pre-wrap",children:S.content}),S.citations&&S.citations.length>0&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-xs font-medium mb-2",children:"References:"}),S.citations.map((E,D)=>s.jsxs("div",{className:"text-xs mb-1",children:[E.url?s.jsx("a",{href:E.url,className:"text-blue-600 dark:text-blue-400 hover:underline cursor-pointer",children:E.displayText}):s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:E.displayText}),s.jsxs("span",{className:"text-gray-500 dark:text-gray-400 ml-2",children:["(",Math.round(E.relevance*100),"% relevant)"]})]},D))]}),S.suggestedActions&&S.suggestedActions.length>0&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-xs font-medium mb-2",children:"Suggested Actions:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:S.suggestedActions.map((E,D)=>s.jsx("button",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded text-xs font-medium hover:bg-blue-200 dark:hover:bg-blue-900/40 transition-colors",children:E.label},D))})]}),s.jsx("div",{className:"text-xs opacity-70 mt-2",children:new Date(S.timestamp).toLocaleTimeString()})]})},S.id)),w.isPending&&s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"max-w-3xl rounded-lg p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("div",{className:"h-2 w-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),s.jsx("div",{className:"h-2 w-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),s.jsx("div",{className:"h-2 w-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"CastellanAI is thinking..."})]})})}),s.jsx("div",{ref:m})]}),s.jsxs("div",{className:"flex-shrink-0 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-4",children:[s.jsxs("div",{className:"flex items-end space-x-3",children:[s.jsx("textarea",{value:l,onChange:S=>o(S.target.value),onKeyDown:b,placeholder:"Ask about security events, threats, or compliance... (Ctrl+Enter to send)",className:"flex-1 resize-none rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-3 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[60px] max-h-[200px]",rows:2}),s.jsxs("button",{onClick:p,disabled:!l.trim()||w.isPending,className:"flex items-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(Dv,{className:"h-5 w-5"}),s.jsx("span",{className:"font-medium",children:"Send"})]})]}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Tip: Press Ctrl+Enter to send your message"})]})]})]})}function yk(){return s.jsx(Eb,{children:s.jsxs(Du,{children:[s.jsx(We,{path:"/login",element:s.jsx(Pb,{})}),s.jsx(We,{path:"/*",element:s.jsx(Uv,{children:s.jsxs(Du,{children:[s.jsx(We,{path:"/",element:s.jsx(Tb,{})}),s.jsx(We,{path:"/security-events",element:s.jsx(Rb,{})}),s.jsx(We,{path:"/security-events/:id",element:s.jsx(Db,{})}),s.jsx(We,{path:"/timeline",element:s.jsx(Fb,{})}),s.jsx(We,{path:"/mitre-attack",element:s.jsx(Bb,{})}),s.jsx(We,{path:"/malware-rules",element:s.jsx(Jb,{})}),s.jsx(We,{path:"/threat-scanner",element:s.jsx(Zb,{})}),s.jsx(We,{path:"/system-status",element:s.jsx(ok,{})}),s.jsx(We,{path:"/configuration",element:s.jsx(uk,{})}),s.jsx(We,{path:"/chat",element:s.jsx(xk,{})})]})})}),s.jsx(We,{path:"*",element:s.jsx(Ux,{to:"/",replace:!0})})]})})}const vk=new by({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:30*60*1e3,refetchOnWindowFocus:!1,retry:1}}});zl.createRoot(document.getElementById("root")).render(s.jsx(Ch.StrictMode,{children:s.jsxs(ky,{client:vk,children:[s.jsx(Vx,{children:s.jsx(yk,{})}),s.jsx(bv,{position:"top-right"})]})}));
